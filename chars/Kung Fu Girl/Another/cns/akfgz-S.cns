;===========================================================================
;Super Moves (Statedef 1000~2999)
;---------------------------------------------------------------------------
;  7000~7003	;Super Armour
;  8200		;Guard Cancel Attack
;===========================================================================

;Kung Fu Ghost Attack_A(Start)
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2
poweradd = 130

[State 1000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 1

[State 1000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 8

[State 1000,Helper]
type = Helper
trigger1 = animelem = 1
stateno = 1005
id = 1005
pos = 0,0
postype = p1
ownpal = 1

[State 1000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1001

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack_A
[Statedef 1001]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 2

[State 1001,Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 1091
pos = 20, 0
postype = p1
sprpriority = 3
bindtime = 10
ownpal = 1

[State 1001,Helper]
type = Helper
trigger1 = animelem = 1
stateno = 1006
id = 1006
pos = 0,0
postype = p1
ownpal = 1

[State 1001,Helper]
type = Helper
triggerall = Palno > 6 || var(17) >= 2
trigger1 = animelem = 5
stateno = 1006
id = 1006
pos = 0,0
postype = p1
ownpal = 1


[State 1001,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 9

[State 1001,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 1
value = 0

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack_A(Helper Start)
[Statedef 1005]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1005
ctrl = 0
sprpriority = 3

[State 1005,HitBy]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[State 1005,HitBy]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 1059

[State 1005,HitOverRide]
type = HitOverRide
trigger1 = 1
attr = SCA, AA, AT, AP
time = -1
stateno = 1060
IgnoreHitPause = 1

[State 1005,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 0

[State 1005,Explod]
type = Explod
trigger1 = AnimElem = 17
anim = 1095
pos = 0,0
sprpriority = 3
bindtime = 10
ownpal = 1

[State 1005,Explod]
type = Explod
trigger1 = AnimElem = 17
anim = 1006
id = 1006
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4
removetime = -1

[State 1005,RemoveExplod]
type = RemoveExplod
trigger1 = animtime = 0
id = 1006

[State 1005,DestroySelf]
type= DestroySelf
trigger1=animtime=0

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack_A(Helper)
[Statedef 1006]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1007
ctrl = 0
sprpriority = 3

[State 1006,HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP, NP , SP , HP
ignorehitpause = 1

[State 1006,ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1058
ignorehitpause = 1

[State 1006,HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, AP, NP , SP , HP
stateno = 1059
ignorehitpause = 1
time = -1

[State 1006,Explod]
type = Explod
trigger1 = time = 1
anim = 1008
id = 1008
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4
removetime = -1

[State 1006,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 1009
id = 1009
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 2
removetime = -1

[State 1006,Vel]
type = VelSet
trigger1 = Animelem = 5
trigger2 = Animelem = 6
trigger3 = Animelem = 7
trigger4 = Animelem = 8
trigger5 = Animelem = 9
trigger6 = Animelem = 10
trigger7 = Animelem = 11
trigger8 = Animelem = 12
x = 7

[State 1006,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 120, 20
getpower = 50, 20
givepower = 40, 20
hitflag = MAF
guardflag = MA
pausetime = 10,10
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -40
hitsound = s600, 3
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 1006,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 5

[State 1006,RemoveExplod]
type = RemoveExplod
trigger1 = MoveContact
trigger2 = Time >= 70
trigger3 = frontedgebodydist < -50
id = 1008

[State 1006,RemoveExplod]
type = RemoveExplod
trigger1 = MoveContact
trigger2 = Time >= 70
trigger3 = frontedgebodydist < -50
id = 1009

[State 1006,ChangeState]
type = ChangeState
trigger1 = MoveContact
trigger2 = Time >= 70
trigger3 = frontedgebodydist < -50
value = 1058

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack_B(Start)
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2
poweradd = 130

[State 1010,Helper]
type = Helper
trigger1 = animelem = 1
stateno = 1015
id = 1015
pos = 0,0
postype = p1
ownpal = 1

[State 1010,RemoveExplod]
type = RemoveExplod
trigger1 = animtime=0
id = 1016

[State 1010,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 1

[State 1010,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 8

[State 1010,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1011

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack_B
[Statedef 1011]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1011
ctrl = 0
sprpriority = 2

[State 1011,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 1091
pos = 20, 0
postype = p1
sprpriority = 3
bindtime = 10
ownpal = 1

[State 1011,Helper]
type = Helper
trigger1 = animelem = 1
stateno = 1016
id = 1016
pos = 0,0
postype = p1
ownpal = 1

[State 1011,Helper]
type = Helper
triggerall = Palno > 6 || var(17) >= 2
trigger1 = animelem = 5
stateno = 1016
id = 1016
pos = 0,0
postype = p1
ownpal = 1

[State 1011,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 9

[State 1011,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 1
value = 0

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack_B(Helper Start)
[Statedef 1015]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1005
ctrl = 0
sprpriority = 3

[State 1015,HitBy]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[State 1015,HitOverRide]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 1059

[State 1015,HitOverRide]
type = HitOverRide
trigger1 = 1
attr = SCA, AA, AT, AP
time = -1
stateno = 1060
IgnoreHitPause = 1

[State 1015,Explod]
type = Explod
trigger1 = AnimElem = 17
anim = 1095
pos = 0,0
sprpriority = 3
bindtime = 10
ownpal = 1

[State 1015,Explod]
type = Explod
trigger1 = AnimElem = 17
anim = 1006
id = 1006
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4
removetime = -1

[State 1015,RemoveExplod]
type = RemoveExplod
trigger1 = animtime=0
id = 1006

[State 1015,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 0

[State 1015,DestroySelf]
type = DestroySelf
trigger1=animtime=0

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack_B(Helper)
[Statedef 1016]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1015
ctrl = 0
sprpriority = 3

[State 1016,HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP, NP , SP , HP
ignorehitpause = 1

[State 1016,HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, AP, NP , SP , HP
stateno = 1059
ignorehitpause = 1
time = -1

[State 1016,Vel]
type = Velset
trigger1 = 1
x = 2.7

[State 1016,Vel]
type = VelSet
trigger1 = Animelem = 5
trigger2 = Animelem = 17
y = -1

[State 1016,Vel]
type = VelSet
trigger1 = Animelem = 6
trigger2 = Animelem = 7
trigger3 = Animelem = 18
trigger4 = Animelem = 19
y = -3

[State 1016,Vel]
type = VelSet
trigger1 = Animelem = 8
trigger2 = Animelem = 9
trigger3 = Animelem = 10
trigger4 = Animelem = 20
trigger5 = Animelem = 21
trigger6 = Animelem = 22
y = -8

[State 1016,Vel]
type = VelSet
trigger1 = Animelem = 11
trigger2 = Animelem = 23
y = 1

[State 1016,Vel]
type = VelSet
trigger1 = Animelem = 12
trigger2 = Animelem = 13
trigger3 = Animelem = 24
trigger4 = Animelem = 25
y = 3

[State 1016,Vel]
type = VelSet
trigger1 = Animelem = 14
trigger2 = Animelem = 15
trigger3 = Animelem = 16
trigger4 = Animelem = 26
trigger5 = Animelem = 27
trigger6 = Animelem = 28
y = 7

[State 1016,HitDef]
type = HitDef
trigger1 = Animelem = 5
trigger2 = Animelem = 6
trigger3 = Animelem = 11
trigger4 = Animelem = 12
trigger5 = Animelem = 17
trigger6 = Animelem = 18
trigger7 = Animelem = 23
trigger8 = Animelem = 24
attr = A, SP
animtype  = Hard
damage    = 20, 5
getpower = 20, 10
givepower = 20, 10
guardflag = MA
pausetime = 10,10
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -40
hitsound = s500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -8,-3

[State 1016,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 1016
id = 1016
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4
removetime = -1

[State 1016,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 1009
id = 1009
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 1
removetime = -1

[State 1016,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 7

[State 1016,RemoveExplod]
type = RemoveExplod
trigger1 = Time >= 150
trigger2 = frontedgebodydist < -50
id = 1009

[State 1016,RemoveExplod]
type = RemoveExplod
trigger1 = Time >= 150
trigger2 = frontedgebodydist < -50
id = 1016

[State 1016,ChangeState]
type = ChangeState
trigger1 = Time >= 150
trigger2 = frontedgebodydist < -50
value = 1058

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack_EX
[Statedef 1020]
type = S
movetype = A
physics = S
anim = 1030
juggle = 1
ctrl = 0
poweradd= ifelse((Palno > 6 || var(17) >= 2),-300,-500)

[State 1020,PalFX]
type = PalFX
trigger1 = Time%2=0
time = 1
add = 120,100,40
ignorehitpause = 1

[State 1020,Helper]
type = Helper
trigger1 = animelem = 1
stateno = 1021
id = 1021
pos = 0,0
postype = p1
ownpal = 1

[State 1020,Helper]
type = Helper
triggerall = Palno > 6 || var(17) >= 2
trigger1 = animelem = 5
stateno = 1021
id = 1021
pos = 0,0
postype = p1
ownpal = 1

[State 1020,Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 1091
pos = 20, 0
postype = p1
sprpriority = 3
bindtime = 10
ownpal = 1

[State 1020,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1095
pos = 0, 0
postype = p1
sprpriority = 3
bindtime = 10
ownpal = 1

[State 1020,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1000, 10

[State 1020,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1000, 1

[State 1020,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 4

[State 1020,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 1
value = 0

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack_Ex(Helper)
[Statedef 1021]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1033
ctrl = 0
sprpriority = 3


[State 1021,HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP, NP , SP , HP
ignorehitpause = 1

[State 1021,HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, AP, NP , SP , HP
stateno = 1059
ignorehitpause = 1
time = -1

[State 1021,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 1034
id = 1034
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4
removetime = -1

[State 1021,Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 1009
id = 1009
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 1
removetime = -1

[State 1021,Vel]
type = VelSet
triggerall = !movecontact
trigger1 = Animelem = 7
trigger2 = Animelem = 8
trigger3 = Animelem = 9
trigger4 = Animelem = 10
x = 14

[State 1021,Vel]
type = VelSet
triggerall = movecontact
trigger1 = Animelem = 7
trigger2 = Animelem = 8
trigger3 = Animelem = 9
trigger4 = Animelem = 10
x = 1

[State 1021,HitDef]
type = HitDef
trigger1 = Animelem = 4
trigger2 = Animelem = 5
trigger3 = Animelem = 6
trigger4 = Animelem = 7
trigger5 = Animelem = 8
trigger6 = Animelem = 9
trigger7 = Animelem = 10
attr = A, SP
animtype  = Hard
damage    = 5, 2
getpower = 0, 0
guardflag = MA
pausetime = 10,10
sparkno = S6040
guard.sparkno = S6020
sparkxy = 10, -40
hitsound = s500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 2
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0, 0

[State 1021,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 5

[State 1021,RemoveExplod]
type = RemoveExplod
trigger1 = Time >= 80
trigger2 = frontedgebodydist < -50
id = 1009

[State 1021,RemoveExplod]
type = RemoveExplod
trigger1 = Time >= 80
trigger2 = frontedgebodydist < -50
id = 1034

[State 1021,ChangeState]
type = ChangeState
trigger1 = Time >= 80
trigger2 = frontedgebodydist < -50
value = 1058

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack(Cancel)
[Statedef 1030]
type = S
movetype = A
physics = S
anim = 1030
juggle = 1
ctrl = 0
poweradd = 120

[State 1030,Helper]
type = Helper
trigger1 = animelem = 1
stateno = 1031
id = 1031
pos = 0,0
postype = p1
ownpal = 1

[State 1030,Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 1091
pos = 20, 0
postype = p1
sprpriority = 3
bindtime = 10
ownpal = 1

[State 1030,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1095
pos = 0, 0
postype = p1
sprpriority = 3
bindtime = 10
ownpal = 1

[State 1030,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1000, 1

[State 1030,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 4

[State 1030,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1000, 10

[State 1030,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 1
value = 0

;---------------------------------------------------------------------------
;Kung Fu Ghost Attack(Cancel_Helper)
[Statedef 1031]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1031
ctrl = 0
sprpriority = 3

[State 1031,HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP, NP , SP , HP
ignorehitpause = 1

[State 1031,ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1058
ignorehitpause = 1

[State 1031,HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, AP, NP , SP , HP
stateno = 1059
ignorehitpause = 1
time = -1

[State 1031,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 1032
id = 1032
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4
removetime = -1

[State 1031,Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 1009
id = 1009+ifelse((Palno > 6 || var(17) >= 2),1,0)
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 2
removetime = -1

[State 1031,Vel]
type = VelSet
trigger1 = Animelem = 7
trigger2 = Animelem = 8
trigger3 = Animelem = 9
trigger4 = Animelem = 10
x = 15

[State 1031,HitDef]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = Hard
damage    = 70, 10
getpower = 50, 20
givepower = 30, 10
guardflag = MA
pausetime = 10,10
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -40
hitsound = s600, 3
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 1031,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 5

[State 1031,RemoveExplod]
type = RemoveExplod
trigger1 = MoveContact
trigger2 = Time >= 70
trigger3 = frontedgebodydist < -50
id = 1009

[State 1031,RemoveExplod]
type = RemoveExplod
trigger1 = MoveContact
trigger2 = Time >= 70
trigger3 = frontedgebodydist < -50
id = 1032

[State 1031,ChangeState]
type = ChangeState
trigger1 = MoveContact
trigger2 = Time >= 70
trigger3 = frontedgebodydist < -50
value = 1058

;---------------------------------------------------------------------------
;Ghost(o.o)
[Statedef 1058]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1040
ctrl = 0
sprpriority = 3

[State 1058,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1058,RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1008)
id = 1008

[State 1058,RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1009)
id = 1009

[State 1058,RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1010)
id = 1010

[State 1058,RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1016)
id = 1016

[State 1058,RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1032)
id = 1032

[State 1058,RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(1034)
id = 1034

[State 1058,RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(2202)
id = 2202

[State 1058,RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(2222)
id = 2222

[State 1058,Explod]
type = Explod
trigger1 = time = 1
anim = 1041
id = 1041
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4

[State 1058,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 6

[State 1058,DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;Ghost(>o<)
[Statedef 1059]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1050
ctrl = 0
sprpriority = 3

[State 1059,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1059,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1008

[State 1059,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1009

[State 1059,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1016

[State 1059,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1032

[State 1059,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1034

[State 1059,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 2202

[State 1059,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 2222

[State 1059,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 1051
id = 1051
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4

[State 1059,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 2

[State 1059,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1000, 3

[State 1059,DestroySelf]
type = DestroySelf
trigger1 = animtime=0


;---------------------------------------------------------------------------
;Ghost(>o<)
[Statedef 1060]
type = A
movetype = I
physics = N
anim = 1050
sprpriority = 0

[State 1060,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1008

[State 1060,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1009

[State 1060,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1016

[State 1060,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1032

[State 1060,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1034

[State 1060,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 2202

[State 1060,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 2222

[State 1060,Explod]
type = Explod
trigger1 = time = 1
anim = 1051
id = 1051
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4

[State 1060,DestroySelf]
type = DestroySelf
trigger1 = 1
persistent = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
;Kung Fu Palm_X
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 4-ifelse((Palno > 6 || var(17) >= 2),4,0)
poweradd= 110
velset = 0,0
anim = 1100+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1100,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 12

[State 1100,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 7

[State 1100,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 3

[State 1100,HitDef]
type = HitDef
trigger1 = Time = 0
trigger1 = p2bodydist X < 1
trigger1 = EnemyNear,Movetype = A
attr = S, SA
animtype  = Hard
damage    = 70+ifelse((Palno > 6 || var(17) >= 2),70,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 40, 20
givepower = 20, 10
guardflag = MA
pausetime = 10,10
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = Low
ground.slidetime = 80
ground.hittime  = 80
ground.velocity = -5
air.velocity = -5,-3
air.fall = 1
envshake.time = 30
envshake.ampl = -15
envshake.freq = 120
envshake.phase = 18

[State 1100,HitDef]
type = HitDef
trigger1 = Time = 0
trigger1 = p2bodydist X < 1
trigger1 = EnemyNear,Movetype != A
attr = S, SA
animtype  = Hard
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),70,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 40, 20
givepower = 20, 10
guardflag = MA
pausetime = 12,12
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1100,HitDef]
type = HitDef
trigger1 = Time = 0
trigger1 = p2bodydist X >= 1
trigger1 = EnemyNear,Movetype != A
attr = S, SA
animtype  = Hard
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),70,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 30, 15
givepower = 20, 10
guardflag = MA
pausetime = 10,15
sparkno = S6060
guard.sparkno = S6020
sparkxy = -15,-60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-2.5
envshake.time = 20
envshake.ampl = -4
envshake.freq = 50
envshake.phase = 10

[State 1100,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 4
anim = 11010
pos = 0, -16
postype = p1
sprpriority = 4
bindtime = -1
scale = 1,.7
id = 307

[State 1100,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1125
pos = 0, 0
postype = p1
sprpriority = 4

[State 1100,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 1100, 0

[State 1100,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1100,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Palm_Y
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 4-ifelse((Palno > 6 || var(17) >= 2),4,0)
poweradd= 120
velset = 0,0
anim = 1100+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1110,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 15

[State 1110,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 10

[State 1110,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 6

[State 1110,HitDef]
type = HitDef
trigger1 = Time = 0
trigger1 = p2bodydist X < 1
trigger1 = EnemyNear,Movetype = A
attr = S, SA
animtype  = Hard
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 40, 20
givepower = 20, 10
guardflag = MA
pausetime = 10,10
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = Low
ground.slidetime = 80
ground.hittime  = 80
ground.velocity = -5
air.velocity = -5,-3
air.fall = 1
envshake.time = 30
envshake.ampl = -15
envshake.freq = 120
envshake.phase = 18

[State 1110,HitDef]
type = HitDef
trigger1 = Time = 0
trigger1 = p2bodydist X < 1
trigger1 = EnemyNear,Movetype != A
attr = S, SA
animtype  = Hard
damage    = 90+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 40, 20
givepower = 20, 10
guardflag = MA
pausetime = 12,12
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1110,HitDef]
type = HitDef
trigger1 = Time = 0
trigger1 = p2bodydist X >= 1
trigger1 = EnemyNear,Movetype != A
attr = S, SA
animtype  = Hard
damage    = 90+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 30, 15
givepower = 20, 10
guardflag = MA
pausetime = 10,15
sparkno = S6060
guard.sparkno = S6020
sparkxy = -15,-60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-2.5
envshake.time = 20
envshake.ampl = -4
envshake.freq = 50
envshake.phase = 10

[State 1110,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 4
anim = 11110
pos = 0, -16
postype = p1
sprpriority = 4
bindtime = -1
scale = 1,.7
id = 307

[State 1110,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1135
pos = 0, 0
postype = p1
sprpriority = 4

[State 1110,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 1100, 0

[State 1110,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 2

[State 1110,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Palm_EX
[Statedef 1120]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1120+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2
poweradd= ifelse((Palno > 6 || var(17) >= 2),-300,-500)
juggle  = 0

;-----------------
[State 1120,NotHitBy]
type = NotHitBy
triggerAll = Palno>6
trigger1 = Time = [0,5]
value = SCA, AA

[State 1120,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1120,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1120,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1120,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1120,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 32

[State 1120,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 17

[State 1120,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 11

[State 1120,HitDef]
type = HitDef
trigger1 = Time = 0
trigger1 = EnemyNear,Movetype = A
attr = S, SA
animtype  = Hard
damage    = 70+ifelse((Palno > 6 || var(17) >= 2),70,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 0, 0
givepower = 20, 10
guardflag = MA
pausetime = 10,10
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = Low
ground.slidetime = 80
ground.hittime  = 80
ground.velocity = -5
air.velocity = -5,-3
air.fall = 1
envshake.time = 30
envshake.ampl = -15
envshake.freq = 120
envshake.phase = 18

[State 1120,HitDef]
type = HitDef
trigger1 = Time = 0
trigger1 = EnemyNear,Movetype != A
attr = S, SA
animtype  = Hard
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),70,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 0, 0
givepower = 20, 10
guardflag = MA
pausetime = 10,12
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1120,HitDef]
type = HitDef
trigger1 = Time = 0
trigger1 = p2bodydist X >= 1
trigger1 = EnemyNear,Movetype != A
trigger1 = var(9)=0 || var(9)=10
attr = S, SA
animtype  = Hard
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),70,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 30, 15
givepower = 20, 10
guardflag = MA
pausetime = 10,50
sparkno = S6060
guard.sparkno = S6020
sparkxy = -15,-60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = -4,-2.5
envshake.time = 20
envshake.ampl = -4
envshake.freq = 50
envshake.phase = 10

[State 1120,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 1135
pos = 0, 0
postype = p1
sprpriority = 4

[State 1120,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 3
anim = 11110
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1120,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = Time = 3
anim = 11210
pos = 0, 172
postype = back
sprpriority = 0
bindtime = -1
scale = 1.2,.5
id = 307

[State 1120,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 5

[State 1120,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 1100, 0

[State 1120,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Knee_A(Jump)
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle   = 0
poweradd= 110
velset = 0,0
anim = 1200+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1200,NotHitBy]
type = NotHitBy
trigger1 = animelem = 1
value = SCA
time = 10

[State 1200,Pos]
type = PosAdd
trigger1 = AnimElem = 4
x = 20

[State 1200,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 20+ifelse((Palno > 6 || var(17) >= 2),20,0), 5+ifelse((Palno > 6 || var(17) >= 2),10,0)
getpower = 30, 15
givepower = 20, 10
priority  = 5
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.5,-7
guard.velocity = -7
air.velocity = -3.5,-7
fall = 1
nochainid = 1500,1200

[State 1200,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 4
anim = 12010
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1200,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 12000
pos = 0, 0
postype = p1
sprpriority = 4
scale = .5,.5

[State 1200,Pause]
type = Pause
trigger1 = movecontact = 1
time = 12
ignorehitpause = 1
pausebg = 0

[State 1200,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1200,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1203

;---------------------------------------------------------------------------
;Kung Fu Knee_A(Air)
[Statedef 1203]
type    = A
movetype= A
physics = N
velset = 2,-6
juggle   = 0
anim = 1203+ifelse((Palno > 6 || var(17) >= 2),1,0)
hitdefpersist = 1

[State 1203,Vel]
type = VelAdd
trigger1 = 1
y = .45

[State 1203,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 50+ifelse((Palno > 6 || var(17) >= 2),40,0), 5+ifelse((Palno > 6 || var(17) >= 2),10,0)
getpower = 30, 15
givepower = 20, 10
priority  = 5
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.5,-7+ifelse(NumTarget(1500)>0 || NumTarget(1200)>0,3,0)
guard.velocity = -7
air.velocity = -3.5,-7+ifelse(NumTarget(1500)>0 || NumTarget(1200)>0,3,0)
fall = 1
id = 1200

[State 1203,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 12040
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1203,Pause]
type = Pause
trigger1 = movecontact = 1
time = 12
ignorehitpause = 1
pausebg = 0

[State 1203,CtrlSet]
type = CtrlSet
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem >= 4
value = 1

[State 1203,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = Command = "a" || Command = "b"
trigger1 = Vel y < -1
value = 1205

[State 1203,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1209

;---------------------------------------------------------------------------
;Kung Fu Knee(1More Attacks)
[Statedef 1205]
type    = A
movetype= A
physics = N
juggle   = 0
anim = 1205+ifelse((Palno > 6 || var(17) >= 2),1,0)

[State 1205,Pos]
type = PosAdd
trigger1 = Time = 0
x = 10
y = -10

[State 1205,Vel]
type = VelAdd
trigger1 = 1
y = .45

[State 1205,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Med
damage    = 30+ifelse((Palno > 6 || var(17) >= 2),30,0), 5+ifelse((Palno > 6 || var(17) >= 2),10,0)
getpower = 20, 10
givepower = 10, 5
priority  = 4
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 16
ground.velocity = -6
guard.velocity = -8
guard.ctrltime = 12
air.velocity = -4,-5
airguard.velocity = -4,-4.5
air.fall = 1
id = 1200

[State 1205,Pause]
type = Pause
trigger1 = movecontact = 1
time = 12
ignorehitpause = 1
pausebg = 0

[State 1205,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 12060
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1205,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 300, 1

[State 1205,CtrlSet]
type = CtrlSet
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem >= 7
value = 1

[State 1205,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -5
value = 1209

;---------------------------------------------------------------------------
;Kung Fu Knee(Land)
[Statedef 1209]
type    = S
movetype= I
physics = S
anim = 1209
sprpriority = 1
velset = 0,0

[State 1209,Pos]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1209,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 100, 1

[State 1209,CtrlSet]
type = CtrlSet
trigger1 = AnimElem >= 3
value = 1

[State 1209,Pos]
type = PosAdd
trigger1 = AnimElem = 4
x = -15

[State 1209,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Knee_B(Jump)
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle   = 0
poweradd= 120
velset = 0,0
anim = 1210+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1210,NotHitBy]
type = NotHitBy
trigger1 = animelem = 1
value = SCA
time = 10

[State 1210,Pos]
type = PosAdd
trigger1 = AnimElem = 2
x = 6

[State 1210,Pos]
type = PosAdd
trigger1 = AnimElem = 4
x = 21

[State 1210,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 20+ifelse((Palno > 6 || var(17) >= 2),20,0), 5+ifelse((Palno > 6 || var(17) >= 2),10,0)
getpower = 30, 15
givepower = 20, 10
priority  = 5
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.5,-7.5
guard.velocity = -7
air.velocity = -3.5,-7.5
fall = 1

[State 1210,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 4
anim = 12010
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1210,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 12100
pos = 0, 0
postype = p1
sprpriority = 4

[State 1210,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 2

[State 1210,Pause]
type = Pause
trigger1 = movecontact = 1
time = 12
ignorehitpause = 1
pausebg = 0

[State 1210,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1213

;---------------------------------------------------------------------------
;Kung Fu Knee_B(Air)
[Statedef 1213]
type    = A
movetype= A
physics = N
velset = 2.2,-9.5
juggle   = 0
anim = 1213+ifelse((Palno > 6 || var(17) >= 2),1,0)
hitdefpersist = 1 ;Keep the HitDef from previous state active

[State 1213,Vel]
type = VelAdd
trigger1 = 1
y = .45

[State 1213,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 60+ifelse((Palno > 6 || var(17) >= 2),60,0), 5+ifelse((Palno > 6 || var(17) >= 2),10,0)
getpower = 10, 5
givepower = 10, 5
priority  = 5
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.5,-7.5
guard.velocity = -7
air.velocity = -3.5,-7.5
fall = 1

[State 1213,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 12140
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1213,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = Command = "a" || Command = "b"
trigger1 = Vel y < -1
value = 1205

[State 1213,CtrlSet]
type = CtrlSet
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem >= 4
value = 1

[State 1213,Pause]
type = Pause
trigger1 = movecontact = 1
time = 12
ignorehitpause = 1
pausebg = 0

[State 1213,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1209

;---------------------------------------------------------------------------
;Kung Fu Knee_Ex(Jump)
[Statedef 1220]
type    = S
movetype= A
physics = S
juggle   = 0
poweradd= ifelse((Palno > 6 || var(17) >= 2),-300,-500)
velset = 0,0
anim = 1220+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

;-----------------
[State 1220,NotHitBy]
type = NotHitBy
trigger1 = animelem = 1
value = SCA
time = 20

[State 1220,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1220,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1220,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1220,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1220,Pos]
type = PosAdd
trigger1 = AnimElem = 2
x = 6

[State 1220,Pos]
type = PosAdd
trigger1 = AnimElem = 4
x = 21

[State 1220,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Medium
getpower  = 0
damage    = 30+ifelse((Palno > 6 || var(17) >= 2),30,0), 5+ifelse((Palno > 6 || var(17) >= 2),10,0)
givepower = 20, 10
priority  = 7
hitflag   = MA
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2,-6
guard.velocity = -7
air.velocity = -2,-6
fall = 1
fall.animtype = Med
fall.recovertime = 30

[State 1220,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 4
anim = 12210
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1220,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 12100
pos = 0, 0
postype = p1
sprpriority = 4

[State 1220,Pause]
type = Pause
trigger1 = movecontact = 1
time = 8
ignorehitpause = 1
pausebg = 0

[State 1220,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 2

[State 1220,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1223

;---------------------------------------------------------------------------
;Kung Fu Knee_Ex(Air)
[Statedef 1223]
type    = A
movetype= A
physics = N
velset = 2.5,-11
anim = 1223+ifelse((Palno > 6 || var(17) >= 2),1,0)

[State 1223,PalFX]
type = PalFX
trigger1 = Time = 0
time = 18
add = 32,16,0
sinadd = 64,32,5,3

[State 1223,AfterImage]
type = AfterImageTime
trigger1 = Vel Y < 0
time = 2

[State 1223,Vel]
type = VelAdd
trigger1 = 1
y = .5

[State 1223,Vel]
type = VelAdd
trigger1 = Vel Y >= -1
y = .2

[State 1223,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
getpower  = 0
givepower = 10, 5
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),10,0)
priority  = 5
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -3,-9.5
guard.velocity = -7
air.velocity = -3,-9.5
fall = 1
fall.recovertime = 30

[State 1223,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 12240
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1223,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = Command = "a" || Command = "b"
trigger1 = Vel y < -1
trigger1 = Time > 0
value = 1225

[State 1223,CtrlSet]
type = CtrlSet
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem >= 4
value = 1

[State 1223,Pause]
type = Pause
trigger1 = movecontact = 1
time = 12
ignorehitpause = 1
pausebg = 0

[State 1223,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1209

;---------------------------------------------------------------------------
;Kung Fu Knee_Ex(2More Attacks)
[Statedef 1225]
type    = A
movetype= A
physics = N
anim = 1225+ifelse((Palno > 6 || var(17) >= 2),1,0)

[State 1225,AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1225,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1225,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 300, 1

[State 1225,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 300, 1

[State 1225,PlaySnd]
type = PlaySnd
trigger1 = Animelem = 7
value = 1500, 1

[State 1225,Pos]
type = PosAdd
trigger1 = Time = 0
x = 10
y = -10

[State 1225,Vel]
type = VelAdd
trigger1 = 1
y = .45

[State 1225,Vel]
type = VelAdd
trigger1 = Vel Y >= -1
y = .2

[State 1225,HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
animtype  = Med
damage    = 20+ifelse((Palno > 6 || var(17) >= 2),30,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower  = 0
givepower = 10, 5
priority  = 4
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -6
guard.velocity = -6
air.velocity = -4,-6
airguard.velocity = -4,-4.5
air.fall = 1
fall.recovertime = 30

[State 1225,HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = A, NA
damage    = 30+ifelse((Palno > 6 || var(17) >= 2),30,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 0, 0
givepower = 10, 5
guardflag = HA
priority = 1
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = -15,-60
hitsound   = S600,2
guardsound = S400,1
animtype = Med
ground.type = Trip
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,5
air.velocity = -3,40
fall.animtype = Hard
fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = -15
envshake.freq = 120
envshake.phase = 10
p2stateno = 1226

[State 1225,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 12060
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1225,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 5
anim = 12260
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 2402,Explod]
type = Explod
trigger1 = p2stateno = 1228
anim = 6150
pos = 14, 0
postype = p2
sprpriority = 1
persistent = 0

[State 2402,Explod]
type = Explod
trigger1 = p2stateno = 1228
anim = 6155
pos = 14, 0
postype = p2
sprpriority = 5
persistent = 0

[State 1225,CtrlSet]
type = CtrlSet
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem >= 9
value = 1

[State 1225,Pause]
type = Pause
trigger1 = movecontact = 1
time = 12
ignorehitpause = 1
pausebg = 0

[State 1225,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -5
value = 1209

;---------------------------------------------------------------------------
;Kung Fu Knee_Ex(Enemy_Hit)
[Statedef 1226]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1226,ChangeAnim2] 
type = ChangeAnim2
trigger1 = Time = 0
value = 1227

[State 1226,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time > 0
value = anim

[State 1226,ChangeState]
type = ChangeState
trigger1 = HitShakeOver
value = 1227

[State 1226,ForceFeedback]
type = ForceFeedback
trigger1 = anim = 5012
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
;---------------------------------------------------------------------------
;Kung Fu Knee_Ex(Enemy_Fall)
[Statedef 1227]
type    = A
movetype= H
physics = N

[State 1227,Vel]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1227,HitVelSet]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1227,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1228

[State 1227,ChangeState]
type = ChangeState
trigger1 = vel y > 0 && pos y >= 0
value = 1228
;---------------------------------------------------------------------------
;Kung Fu Knee_Ex(Enemy_Smash)
[Statedef 1228]
type    = L
movetype= H
physics = N
velset = 0,0

[State 1228,HitFallDamage]
type = HitFallDamage
trigger1 = Time = 3

[State 1228,EnvShake]
type = EnvShake
trigger1 = time = 0
time = 12
ampl = -5
freq = 180

[State 1228,Pos]
type = Posset 
trigger1 = Time = 0
y = 0

[State 1228,Pos]
type = Posadd 
trigger1 = Time = 0
x = -20

[State 1228,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1229

[State 1228,Changestate]
type = Changestate
trigger1 = animtime = 0
value = 1229

[State 1228,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 300, 2

[State 1228,ForceFeedback]
type = ForceFeedback
trigger1 = time = 0
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
;---------------------------------------------------------------------------
;Kung Fu Knee_Ex(Enemy_Bounce)
[Statedef 1229]
type    = L
movetype= H
physics = N
velset = -1,-6

[State 1229,Posadd ]
type = Posadd 
trigger1 = animelem = 2
y = -10
x = -5

[State 1229,Vel]
type = Veladd
trigger1 = Time > 0
y = .5

[State 1229,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1230

[State 1229,Selfstate]
type = Selfstate
trigger1 = vel y > 0 && pos y >= -10
value = 5110


;---------------------------------------------------------------------------
;Kung Fu Blow_A(Start)
[Statedef 1300]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1300
ctrl = 0
sprpriority = 2

[State 1300,Width]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1300,Width]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1300,PalFX]
type = PalFX
trigger1 = MoveContact = 1
time = 5
add = 190,190,228
mul = 190,190,228
sinadd = 190,190,228,-100

[State 1300,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1301

;---------------------------------------------------------------------------
;Kung Fu Blow_A
[Statedef 1301]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1301+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = -1

[State 1301,EnvShake]
type = EnvShake
trigger1 = AnimElem = 2
time = 4     ;Time to shake screen
ampl = 2     ;Amount to shake
freq = 180   ;A frequency of 180 shakes the screen rapidly

[State 1301,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 60+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 30, 15
givepower = 20, 10
priority  = 5
guardflag = MA
pausetime = 12,12
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 16
ground.hittime  = 18
ground.velocity = -10
ground.cornerpush.veloff = -12 ;To push far away when p2 is in corner
guard.velocity = -7
air.velocity = -3.5,-4.5
airguard.velocity = -3.5,-4.5

[State 1301,Helper]
type = Helper
triggerall = Palno > 6 || var(17) >= 2
trigger1 = animelem = 2
stateno = 1305
id = 1305
pos = 0,0
postype = p1
ownpal = 1

[State 1301,Helper]
type = Helper
trigger1 = animelem = 2
stateno = 1302
id = 1302
pos = 0,0
postype = p1
ownpal = 1

[State 1301,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 1305
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1301,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 1305
pos = 20, 0
postype = p1
sprpriority = 4
bindtime = -1
facing = -1
id = 307

[State 1301,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 2423
pos = 5, 0
postype = p1
sprpriority = -1
bindtime = -1
id = 307

[State 1301,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 1115
pos = 12, 3
postype = p1
sprpriority = 4
facing = -1

[State 1301,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 6160
pos = 14, 0
postype = p1
sprpriority = -2

[State 1301,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1301,NotHitBy];Ãß°¡
type = NotHitBy
trigger1 = Helper(1302),StateNo = [1303,1304]
value = SCA,AP,NP,SP,HP

[State 1301,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Blow_A(Helper)
[Statedef 1302]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1303
ctrl = 0
sprpriority = 6

[State 1302,ReversalDef]
type = ReversalDef
trigger1 = Time = 0
trigger2 = Root,NumProjID(1302)
Reversal.attr = SCA,AP,NP,SP,HP
pausetime = 0,0
sparkno = S8052
p1Stateno = 1303
hitsound = s400,0

[State 1302,HitOverride]
type = HitOverride
trigger1 = 1
trigger2 = Root,NumProjID(1302)
attr = SCA,AP,NP,SP,HP
stateno = 1304

[State 1302,HitBy]
type = HitBy
trigger1 = 1
value = SCA,AP,NP,SP,HP

[State 1302,DestroySelf]
type = DestroySelf
trigger1=animtime=0

;---------------------------------------------------------------------------
;Kung Fu Blow_A(Reversal)
[Statedef 1303]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1331
ctrl = 0
sprpriority = 5

[State 1303,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1303,HitDef]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = Hard
damage    = 120, 10
getpower = 50, 20
givepower = 40, 20
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -40
hitsound = s600, 3
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 1303,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1302

[State 1303,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 6

[State 1303,DestroySelf]
type = DestroySelf
trigger1=animtime=0
;---------------------------------------------------------------------------
;Kung Fu Blow_A(HitOverride)
[Statedef 1304]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1331
ctrl = 0
sprpriority = 5

[State 1304,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1304,Projectile]
type = Projectile
trigger1 = !NumProjID(1304)
trigger1 = AnimElemTime(8) < 0
projanim = 1333
projpriority = 99
offset = 0, 0
projremovetime = -2
id = 1304
attr = S, HP

[State 1304,Explod]
type = Explod
trigger1 = time = 0
anim = 6070
pos = 57,-66
postype = p1
sprpriority = 10

[State 1304,PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 600, 3

[State 1304,HitDef]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = Hard
damage    = 120, 10
getpower = 50, 20
givepower = 40, 20
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -40
hitsound = s600, 3
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 1304,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1302

[State 1304,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 6

[State 1304,DestroySelf]
type = DestroySelf
trigger1=animtime=0

;---------------------------------------------------------------------------
;Kung Fu Blow_A(S/Helper)
[Statedef 1305]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1304
ctrl = 0
sprpriority = 6

[State 1302,ReversalDef]
type = ReversalDef
trigger1 = Time = 0
trigger2 = Root,NumProjID(1302)
Reversal.attr = SCA,AP,NP,SP,HP
pausetime = 0,0
sparkno = S8052
p1Stateno = 1306
hitsound = s400,0

[State 1302,HitOverride]
type = HitOverride
trigger1 = 1
trigger2 = Root,NumProjID(1302)
attr = SCA,AP,NP,SP,HP
stateno = 1304

[State 1302,HitBy]
type = HitBy
trigger1 = 1
value = SCA,AP,NP,SP,HP

[State 1302,DestroySelf]
type = DestroySelf
trigger1=animtime=0
;---------------------------------------------------------------------------
;Kung Fu Blow_A(S/Reversal)
[Statedef 1306]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1332
ctrl = 0
sprpriority = 5

[State 1303,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1303,HitDef]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = Hard
damage    = 120, 10
getpower = 50, 20
givepower = 40, 20
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -40
hitsound = s600, 3
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 1303,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1302

[State 1303,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 6

[State 1303,DestroySelf]
type = DestroySelf
trigger1=animtime=0

;---------------------------------------------------------------------------
;Kung Fu Blow_Ex(S/Helper)
[Statedef 1307]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1304
ctrl = 0
sprpriority = 6

[State 1302,ReversalDef]
type = ReversalDef
trigger1 = Time = 0
trigger2 = Root,NumProjID(1302)
Reversal.attr = SCA,AP,NP,SP,HP
pausetime = 0,0
sparkno = S8052
p1Stateno = 1308
hitsound = s400,0

[State 1302,HitOverride]
type = HitOverride
trigger1 = 1
trigger2 = Root,NumProjID(1302)
attr = SCA,AP,NP,SP,HP
stateno = 1306

[State 1302,HitBy]
type = HitBy
trigger1 = 1
value = SCA,AP,NP,SP,HP

[State 1302,DestroySelf]
type = DestroySelf
trigger1=animtime=0
;---------------------------------------------------------------------------
;Kung Fu Blow_Ex(S/Reversal)
[Statedef 1308]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1332
ctrl = 0
sprpriority = 5

[State 1303,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1303,HitDef]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = Hard
damage    = 120, 10
getpower = 50, 20
givepower = 40, 20
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -40
hitsound = s600, 3
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 1303,RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1302

[State 1303,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 6

[State 1303,DestroySelf]
type = DestroySelf
trigger1=animtime=0
;---------------------------------------------------------------------------
;Kung Fu Blow_B(Start)
[Statedef 1310]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 1310
ctrl = 0
sprpriority = 2

[State 1310,Width]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1310,Width]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1310,ReversalDef]
type = ReversalDef
trigger1 = Time = 0
Reversal.attr = SCA, NA, SA
ID = 2500
pausetime = 10, 10
numhits = 0
priority = 5, Miss
sparkno = S6000
sparkxy = 16, -5
hitsound = S600, 0
sprpriority = -2
p1stateno = 1330
p2facing = 1

[State 1310,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1311
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Blow_B
[Statedef 1311]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1311+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1311,EnvShake]
type = EnvShake
trigger1 = AnimElem = 2
time = 8
ampl = 2
freq = 170   ;A frequency of less than 180 causes a dampening effect

[State 1311,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 100+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 30, 15
givepower = 20, 10
priority  = 5
guardflag = MA
pausetime = 12,12
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -10
ground.cornerpush.veloff = -15 ;To push far away when p2 is in corner
guard.velocity = -8
air.velocity = -4,-4.5
airguard.velocity = -4,-4.5

[State 1311,Helper]
type = Helper
triggerall = Palno > 6 || var(17) >= 2
trigger1 = animelem = 2
stateno = 1305
id = 1305
pos = 0,0
postype = p1
ownpal = 1

[State 1311,Helper]
type = Helper
trigger1 = animelem = 2
stateno = 1302
id = 1302
pos = 0,0
postype = p1
ownpal = 1

[State 1311,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 1305
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1311,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 1305
pos = 20, 0
postype = p1
sprpriority = 4
bindtime = -1
facing = -1
id = 307

[State 1311,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 2423
pos = 5, 0
postype = p1
sprpriority = -1
bindtime = -1
id = 307

[State 1311,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 1115
pos = 12, 3
postype = p1
sprpriority = 4
facing = -1

[State 1311,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 6161
pos = 14, 0
postype = p1
sprpriority = -2

[State 1311,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 2

[State 1311,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Blow_Ex(Start)
[Statedef 1320]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= ifelse((Palno > 6 || var(17) >= 2),-300,-500)
velset = 0,0
anim = 1320
ctrl = 0
sprpriority = 2

;-----------------
[State 1320,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1320,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1320,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1320,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1320,Width]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1320,Width]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1320,ReversalDef]
type = ReversalDef
trigger1 = Time = 0
Reversal.attr = SCA, NA, SA
ID = 2500
pausetime = 10, 10
numhits = 0
priority = 5, Miss
sparkno = S6000
sparkxy = 16, -5
hitsound = S600, 0
sprpriority = -2
p1stateno = 1330
p2facing = 1

[State 1320,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1321
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Blow_Ex
[Statedef 1321]
type    = S
movetype= A
physics = S
juggle  = 6
velset = 0,0
anim = 1322+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

;-----------------
[State 1321,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1321,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1321,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1321,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1321,EnvShake]
type = EnvShake
trigger1 = AnimElem = 2
time = 8
ampl = 3
freq = 170

[State 1321,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 120+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower  = 0
givepower = 20, 10
priority  = 5
guardflag = MA
pausetime = 15,15
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -15
ground.cornerpush.veloff = -20 
guard.velocity = -9
air.velocity = -5,-5
airguard.velocity = -5,-5
air.fall = 1
fall.animtype = Hard         
yaccel = .4  

[State 1321,Helper]
type = Helper
triggerall = Palno > 6 || var(17) >= 2
trigger1 = animelem = 2
stateno = 1307
id = 1307
pos = 0,0
postype = p1
ownpal = 1 

[State 1321,Helper]
type = Helper
trigger1 = animelem = 2
stateno = 1305
id = 1305
pos = 0,0
postype = p1
ownpal = 1

[State 1321,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 3
anim = 1305
pos = -10, 33
postype = p1
sprpriority = 4
bindtime = -1
scale = 1+ifelse((Palno > 6 || var(17) >= 2),.5,0),1+ifelse((Palno > 6 || var(17) >= 2),.5,0)
id = 307

[State 1321,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 3
anim = 1305
pos = 30, 33
postype = p1
sprpriority = 4
bindtime = -1
facing = -1
scale = 1+ifelse((Palno > 6 || var(17) >= 2),.5,0),1+ifelse((Palno > 6 || var(17) >= 2),.5,0)
id = 307

[State 1321,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 2423
pos = 5, 0
postype = p1
sprpriority = -1
bindtime = -1

[State 1321,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 1305
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1

[State 1321,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 1305
pos = 20, 0
postype = p1
sprpriority = 4
bindtime = -1
facing = -1

[State 1321,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 2423
pos = 5, 0
postype = p1
sprpriority = -1
bindtime = -1
id = 307

[State 1321,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 1115
pos = 12, 3
postype = p1
sprpriority = 4
facing = -1

[State 1321,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 6161
pos = 14, 0
postype = p1
sprpriority = -2

[State 1321,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 2         

[State 1321,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Blow(CounterAttack)
[Statedef 1330]
type    = S
movetype= A
physics = S
juggle  = 6
velset = 0,0
anim = 1330
ctrl = 0
sprpriority = 2

[State 1330,EnvShake]
type = EnvShake
trigger1 = AnimElem = 6
time = 8
ampl = 3
freq = 170

[State 1330,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 0, 0
givepower = 20, 10
guardflag = MA
pausetime = 0,5
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -60
hitsound = s1500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-7
guard.velocity = -5
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 700
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1330,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 6150
pos = 14, 0
postype = p1
sprpriority = 1

[State 1330,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 6155
pos = 14, 0
postype = p1
sprpriority = 5

[State 1330,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Whip
[Statedef 1400]
type    = S
movetype= A
physics = S
poweradd = 100
ctrl = 0
anim = 1400
velset = 0,0
facep2 = 1

[State 1400,Var]
type = Varset
trigger1 = var(22) = 1
trigger1 = time = 0 && prevstateno != 1150
var(50) = 15

[State 1400,Var]
type = VarSet
trigger1 = Time = 0
fvar(17) = 0

[State 1400,Var]
type = VarSet
triggerall = var(59)=0||var(59)<=-2
trigger1 = Time = 0 && (command = "hold_x" || command = "x")
fvar(17) = 1

[State 1400,Var]
type = VarSet
triggerall = var(59)=0||var(59)<=-2
trigger1 = Time = 0 && (command = "hold_y" || command = "y")
fvar(17) = 2

[State 1400,Var]
type = VarSet
trigger1 = Time = 0
var(6) = 0

[State 1400,Var]
type = VarSet
triggerall = var(59)=0||var(59)<=-2
triggerall = var(6) = 0
trigger1 = command = "a" || command = "b"
var(6) = 1

[State 1400,Var]
type = VarSet
Triggerall = var(59)>0 && Alive && !Ishelper
triggerall = var(6) = 0
Trigger1 = Roundstate !=2
Trigger2 = Ceil(fvar(17))=1 && PlayerIDExist(var(58))
trigger2 = P2dist Y+Floor(PlayerID(var(58)),Vel Y*10+fvar(10)*50)<=-20
Trigger3 = Ceil(fvar(17))=2 && PlayerIDExist(var(58))
trigger3 = P2Bodydist X-Floor(PlayerID(var(58)),Vel X*10)>90
Trigger4 = Time>=60-var(59)*5
var(6) = 1

[State 1400,ChangeState]
type = ChangeState
trigger1 = Var(6) = 1 && Animelemtime(2) >= 0
value = 1410
ctrl = 0

[State 1400,ChangeState]
type = ChangeState
trigger1 = fvar(17) = 1
trigger1 = var(59)=0||var(59)<=-2
trigger1 = command != "hold_x" && Animelemtime(2) >= 0
Trigger2 = var(59)>0 && Alive
Trigger2 = var(47)=1
value = 1420
ctrl = 0

[State 1400,ChangeState]
type = ChangeState
trigger1 = fvar(17) = 2
trigger1 = var(59)=0||var(59)<=-2
trigger1 = command != "hold_y" && Animelemtime(2) >= 0
Trigger2 = var(59)>0 && Alive
Trigger2 = var(47)=2
value = 1430
ctrl = 0

[State 1400,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1410
ctrl = 0

;---------------------------------------------------------------------------
;Kung Fu Whip_Cancel
[Statedef 1410]
type    = S
movetype= I
physics = S
poweradd = 20
ctrl = 0
anim = 1410
velset = 0,0

[State 1410,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 194,1

[State 1410,Stopsnd]
type = Stopsnd
trigger1 = 1
channel = 4

[State 1410,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Whip_X
[Statedef 1420]
type    = S
movetype= A
physics = S
poweradd = 10
ctrl = 0
anim = 1420+ifelse((Palno > 6 || var(17) >= 2),1,0)
velset = 0,0

[State 1420,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[state 1420,Stopsound]
type = Stopsnd
trigger1 = 1
channel = 4

[State 1420,Var]
type = VarSet
trigger1 = time = 0
var(19) = 1

[State 1420,Var]
type = Varadd
trigger1 = MoveContact = 1
var(19) = 1

[State 1420,AttackDist]
type = AttackDist
trigger1 = Time<15
value = 220

[State 1420,HitDef]
type = HitDef
trigger1 = AnimElem = 2
trigger1 = p2bodydist X < 40
attr = S, SA
animtype  = Hard
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 20, 10
givepower = 15, 10
priority  = 1
guardflag = MA
pausetime = 20,20
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s600, 3
guardsound = s400, 1
ground.type = H
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 1420,HitDef]
type = HitDef
trigger1 = AnimElem = 2
trigger1 = p2bodydist X >= 40
attr = S, SA
animtype  = Hard
damage    = 70+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 20, 10
givepower = 15, 10
priority  = 1
guardflag = MA
pausetime = 15,15
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s600, 3
guardsound = s400, 1
ground.type = H
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-2.5

[State 1420,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 14210
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1420,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1400,0

[State 1420,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Whip_Y
[Statedef 1430]
type    = S
movetype= A
physics = S
poweradd = 10
ctrl = 0
anim = 1430+ifelse((Palno > 6 || var(17) >= 2),1,0)
velset = 0,0

[State 1430,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 1430,Stopsnd]
type = Stopsnd
trigger1 = 1
channel = 4

[State 1430,HitDef]
type = HitDef
trigger1 = AnimElem = 2
trigger1 = p2bodydist X < 40
attr = S, SA
animtype  = Hard
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 20, 10
givepower = 15, 10
priority  = 1
guardflag = MA
pausetime = 20,20
sparkno = S6070
guard.sparkno = S6020
sparkxy = -10, -85
hitsound = s600, 3
guardsound = s400, 1
ground.type = H
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-5
fall = 1
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 1430,HitDef]
type = HitDef
trigger1 = AnimElem = 2
trigger1 = p2bodydist X >= 40
attr = S, SA
animtype  = Hard
damage    = 70+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 20, 10
givepower = 15, 10
priority  = 1
guardflag = MA
pausetime = 15,15
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -150
hitsound = s600, 3
guardsound = s400, 1
ground.type = H
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-3
fall.animtype = Hard
fall = 1
fall.recover = 0
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 1430,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 14310
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1430,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1400,0

[State 1430,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Whip_Ex
[Statedef 1440]
type    = S
movetype= A
physics = S
poweradd = ifelse((Palno > 6 || var(17) >= 2),-300,-500)
ctrl = 0
anim = 1440+ifelse((Palno > 6 || var(17) >= 2),1,0)
velset = 0,0

;-----------------
[State 1440,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1440,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1440,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1440,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1440,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1400,0

[State 1440,AttackDist]
type = AttackDist
trigger1 = Time<15
value = 220

[State 1440,HitDef]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SA
animtype  = Hard
damage    = 20+ifelse((Palno > 6 || var(17) >= 2),30,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 0, 0
givepower = 15, 10
priority  = 1
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s600, 3
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-2.5

[State 1440,HitDef]
type = HitDef
trigger1 = AnimElemTime(6)>=0&&AnimElemtime(7)<0
attr = S, SA
animtype  = Hard
damage    = 20+ifelse((Palno > 6 || var(17) >= 2),30,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 0, 0
givepower = 15, 10
priority  = 1
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s600, 3
guardsound = s400, 1
ground.type = H
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-2.5

[State 1440,HitDef]
type = HitDef
trigger1 = AnimElemTime(7)>=0 && AnimElemTime(8)<0
attr = S, HA
animtype  = Hard
damage    = 20+ifelse((Palno > 6 || var(17) >= 2),30,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower  = 0
givepower = 15, 10
guardflag = MA
pausetime = 0,0
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s600, 3
guardsound = s400, 1
ground.type = H
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 6,-5.5
air.velocity = -10,-3
fall = 1
fall.animtype = Hard
fall.recover = 0
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 1440,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 4
anim = 14210
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1440,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 7
anim = 14410
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1440,Pause]
type = Pause
trigger1 = movecontact = 1
time = 15
ignorehitpause = 1
pausebg = 0

[State 1440,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Upper_X
[Statedef 1500]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 110
velset = 0,0
anim = 1500+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1500,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = 60+ifelse((Palno > 6 || var(17) >= 2),90,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
hitflag = MAF
guardflag = MA
pausetime = 10,12
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s1500, 0
guardsound = s400, 1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 0,-12
air.velocity = 0,-12
airguard.velocity = -5.5,-2.5
ground.cornerpush.veloff = 0
air.fall = 1
fall = 1
guard.velocity = -12
getpower = 25,25
givepower = 16,16
yaccel = .5
id = 1500
nochainid = 1500,1520

[State 1500,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 15010
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1500,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1125
pos = -10, 0
postype = p1
sprpriority = 5
facing = -1

[State 1500,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 3120
pos = -10, 0
postype = p1
sprpriority = 4
bindtime = -1

[State 1500,PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = 1500, 1
channel = 0

[State 1500,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 300, 2

[State 1500,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Upper_Y
[Statedef 1510]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 120
velset = 0,0
anim = 1510+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1510,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = 70+ifelse((Palno > 6 || var(17) >= 2),100,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
hitflag = MAF
guardflag = MA
pausetime = 10,12
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s1500, 0
guardsound = s400, 1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 0,-12
air.velocity = 0,-12
airguard.velocity = -5.5,-2.5
ground.cornerpush.veloff = 0
air.fall = 1
fall = 1
guard.velocity = -12
getpower = 25,25
givepower = 16,16
yaccel = .5
id = 1500
nochainid = 1500,1520

[State 1510,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 15110
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1510,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1125
pos = -10, 0
postype = p1
sprpriority = 5
facing = -1

[State 1510,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 3120
pos = -10, 0
postype = p1
sprpriority = 4
bindtime = -1

[State 1510,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 300, 2

[State 1510,PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = 1500, 1
channel = 0

[State 1510,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Upper_Ex
[Statedef 1520]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1520+ifelse((Palno > 6 || var(17) >= 2),1,0)
juggle  = 0
ctrl = 0
sprpriority = 2
poweradd= ifelse((Palno > 6 || var(17) >= 2),-300,-500)

;-----------------
[State 1520,NotHitBy]
type = NotHitBy
trigger1 = animelem = 1
value = SCA
time = 8

[State 1520,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1520,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1520,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1520,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1520,HitDef]
type = HitDef
trigger1 = time = 0
trigger1 = !Numtarget(1500) || !Numtarget(1520)
attr = S, SA
animtype  = Hard
damage    = 50+ifelse((Palno > 6 || var(17) >= 2),100,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 0, 0
givepower = 20, 10
guardflag = MA
pausetime = 0,7
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s1500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-8
guard.velocity = -7
air.velocity = 0,-8
airguard.velocity = 0, -4
fall = 1
p2stateno = 1522
envshake.time = 18
envshake.ampl = -5
envshake.freq = 80
envshake.phase = 10
id = 1500
nochainid = 1500

[State 1520,HitDef]
type = HitDef
trigger1 = time = 0
trigger1 = Numtarget(1500) || Numtarget(1520)
attr = S, SA
animtype = hard
damage = 50+ifelse((Palno > 6 || var(17) >= 2),100,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 0, 0
givepower = 20, 10
guardflag = MA
pausetime = 10,12
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s1500, 0
guardsound = s400, 1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 0,-12
air.velocity = 0,-12
airguard.velocity = -5.5,-2.5
ground.cornerpush.veloff = 0
air.fall = 1
fall = 1
guard.velocity = -12
yaccel = .5
id = 1520
nochainid = 1520

[State 1520,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 15210
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1520,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 3120
pos = -10, 0
postype = p1
sprpriority = 4
bindtime = -1

[State 1520,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 3042
pos = 10, 0
postype = p1
sprpriority = 5
scale = .6,.6

[State 1520,PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = 1500, 1
channel = 0

[State 1520,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1800, 1

[State 1520,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Upper_Ex(Enemy_Hit)
[Statedef 1522]
type    = A
movetype= H
physics = N

[State 1522,ChangeAnim2]
type = ChangeAnim2
trigger1 = 1
value = 1522

[State 1522,Angle]
type = Angleadd
trigger1 = 1
value = 30

[State 1522,Angle]
type = AngleDraw
trigger1 = 1

[State 1522,Vel]
type = VelSet
trigger1 = time < 1
y = -15.5

[State 1522,Vel]
type = VelAdd
trigger1 = time < 1
y = 3.5

[State 1522,Pos]
type = PosFreeze
trigger1 = time > 1
x = 1
y = -120

[State 1522,ChangeState]
type = ChangeState
trigger1 = time >= 80
value = 1523

[State 1522,SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Kung Fu Upper_Ex(Enemy_Fall)
[Statedef 1523]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1523,ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 1523

[State 1523,Vel]
type = VelAdd
trigger1 = 1
y = .7

[State 1523,SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;Kung Fu Charge_X
[Statedef 1600]
type    = S
movetype= A
physics = S
poweradd= 110
velset = 0,0
anim = 1600+ifelse((Palno > 6 || var(17) >= 2),1,0)
juggle  = 30-ifelse((Palno > 6 || var(17) >= 2),30,0)
ctrl = 0
sprpriority = 2

[State 1600,Vel]
type = VelSet
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
x = 8

[State 1600,Vel]
type = VelSet
trigger1 = AnimElem = 5
x = 13

[State 1600,Vel]
type = VelSet
trigger1 = AnimElem = 6
x = 5

[State 1600,Vel]
type = VelSet
trigger1 = AnimElem = 7
x = 2

[State 1600,Vel]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 1600,HitDef]
type = HitDef
trigger1 = time = 0
attr     = S, SA
animtype  = Hard
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),80,0), 10+ifelse((Palno > 6 || var(17) >= 2),25,0)
getpower  = 30, 15
givepower = 20, 10
guardflag = MA
pausetime = 0,7
sparkno = S6070
guard.sparkno = S6020
sparkxy = -30, -65
hitsound = s1500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 700
envshake.time = 18
envshake.ampl = -5
envshake.freq = 80
envshake.phase = 10

[State 1600,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 3
anim = 1602
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1600,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1125
pos = 0, 0
postype = p1
sprpriority = 3

[State 1600,PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 1600, 0

[State 1600,PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 300, 1

[State 1600,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Kung Fu Charge_Y
[Statedef 1610]
type    = S
movetype= A
physics = S
poweradd= 120
velset = 0,0
anim = 1610+ifelse((Palno > 6 || var(17) >= 2),1,0)
juggle  = 30-ifelse((Palno > 6 || var(17) >= 2),30,0)
ctrl = 0
sprpriority = 2

[State 1610,Vel]
type = VelSet
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
x = 10

[State 1610,Vel]
type = VelSet
trigger1 = AnimElem = 8
trigger2 = AnimElem = 9
x = 8

[State 1610,Vel]
type = VelSet
trigger1 = AnimElem = 10
x = 3

[State 1610,]
type = VelSet
trigger1 = AnimElem = 11
x = 0

[State 1610,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage    = 100+ifelse((Palno > 6 || var(17) >= 2),80,0), 10+ifelse((Palno > 6 || var(17) >= 2),25,0)
getpower  = 30, 15
givepower = 20, 10
guardflag = MA
pausetime = 0,7
sparkno = S6070
guard.sparkno = S6020
sparkxy = -30, -65
hitsound = s1500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 700
envshake.time = 18
envshake.ampl = -5
envshake.freq = 80
envshake.phase = 10

[State 1610,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 3
anim = 1612
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1610,Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 6130
pos = -20, 0
postype = p1
sprpriority = 3
bindtime = -1

[State 1610,PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1600, 0

[State 1610,PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 2

[State 1610,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Charge_Ex
[Statedef 1620]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1620+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2
poweradd = ifelse((Palno > 6 || var(17) >= 2),-300,-500)
juggle  = 10-ifelse((Palno > 6 || var(17) >= 2),10,0)

;-----------------
[State 1620,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1620,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1620,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1620,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1620,PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = 1600, 0

[State 1620,PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 2

[State 1620,Vel]
type = VelSet
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
trigger5 = AnimElem = 7
x = 15

[State 1620,Vel]
type = VelSet
trigger1 = AnimElem = 8
trigger2 = AnimElem = 9
x = 8

[State 1620,Vel]
type = VelSet
trigger1 = AnimElem = 10
x = 3

[State 1620,Vel]
type = VelSet
trigger1 = AnimElem = 11
x = 0

[State 1620,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 6130
pos = -20, 0
postype = p1
sprpriority = 3
bindtime = -1

[State 1620,AfterImage]
type = AfterImage
trigger1 = Time = 0
length   = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1620,AfterImage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1620,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage    = 130+ifelse((Palno > 6 || var(17) >= 2),90,0), 10+ifelse((Palno > 6 || var(17) >= 2),25,0)
getpower = 0, 0
givepower = 20, 10
guardflag = MA
pausetime = 0,7
sparkno = S6070
guard.sparkno = S6020
sparkxy = -30, -65
hitsound = s1500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-4
guard.velocity = -7
air.velocity = -8,-4
airguard.velocity = -5, -4
fall = 1
fall.recover = 0
envshake.time = 18
envshake.ampl = -5
envshake.freq = 80
envshake.phase = 10

[State 1620,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 3
anim = 1622
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1620,Var]
type = Varset
trigger1 = !time
var(39) = 1

[State 1620,HitBy]
type = HitBy
trigger1 = AnimElem = 12,<0
value = SCA, AT

[State 1620,Var]
type = Varset
trigger1 = AnimElem <= 12
var(39) = 0

[State 1620,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_A1
[Statedef 1700]
type    = C
movetype= A
physics = S
juggle  = 4
poweradd= 40
velset = 0,0
anim = 1700+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1700,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 7

[State 1700,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1700,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1700,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 40+ifelse((Palno > 6 || var(17) >= 2),20,0),3+ifelse((Palno > 6 || var(17) >= 2),20,0)
animtype = M
getpower = 20, 10
givepower = 20, 10
guardflag = L
hitflag = MAF
pausetime = 10, 17
sparkno = S6060
guard.sparkno = S6020
sparkxy = -10, -10
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 5
ground.hittime = 15
ground.velocity = -12
air.velocity = -3.5, -2

[State 1200,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17010
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1700,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1700,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_A2
[Statedef 1701]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 40
velset = 0,0
anim = 1710+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1701,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 7

[State 1701,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1701,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1701,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage = 40+ifelse((Palno > 6 || var(17) >= 2),20,0),3+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 20, 10
givepower = 20, 10
guardflag = MA
pausetime = 12,17
sparkno = S6060
guard.sparkno = S6020
sparkxy = -30, -60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1,-6.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1701,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17110
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1701,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1701,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_A3
[Statedef 1702]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
velset = 10,0
anim = 1720+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1712,Vel]
type = Velset
trigger1 = AnimElem = 2
x = 5

[State 1712,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 18

[State 1712,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 10

[State 1712,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 5

[State 1712,Vel]
type = Velset
trigger1 = AnimElem = 6
x = 2

[State 1712,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage = 50+ifelse((Palno > 6 || var(17) >= 2),20,0),5+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 20, 10
givepower = 20, 10
guardflag = MA
pausetime = 15,22
sparkno = S6070
guard.sparkno = S6020
sparkxy = -10, -90
hitsound = s1500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1712,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17210
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1702,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 2

[State 1712,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_B1
[Statedef 1710]
type    = C
movetype= A
physics = S
juggle  = 4
poweradd= 45
velset = 0,0
anim = 1700+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1710,NotHitBy]
type = NotHitBy
trigger1 = palno > 6
trigger1 = Prevstateno = 2101
trigger1 = animelem = 1
value = SCA, NA,SA,NP,SP
time = 4

[State 1710,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 10

[State 1710,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1710,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1710,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 45+ifelse((Palno > 6 || var(17) >= 2),20,0),4+ifelse((Palno > 6 || var(17) >= 2),20,0)
animtype = M
getpower = 20, 10
givepower = 20, 10
guardflag = L
hitflag = MAF
pausetime = 10, 20
sparkno = S6060
guard.sparkno = S6020
sparkxy = -10, -10
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 5
ground.hittime = 15
ground.velocity = -12
air.velocity = -3.5, -1

[State 1710,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17010
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1710,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1710,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_B2
[Statedef 1711]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 45
velset = 0,0
anim = 1710+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1711,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1711,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 10

[State 1711,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1711,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1711,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage = 45+ifelse((Palno > 6 || var(17) >= 2),20,0),4+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 20, 10
givepower = 20, 10
guardflag = MA
pausetime = 15,20
sparkno = S6060
guard.sparkno = S6020
sparkxy = -30, -60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1,-6.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1711,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17110
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1711,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_B3
[Statedef 1712]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 55
velset = 10,0
anim = 1720+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 1712,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 2

[State 1712,Vel]
type = Velset
trigger1 = AnimElem = 2
x = 7

[State 1712,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 20

[State 1712,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 15

[State 1712,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 5

[State 1712,Vel]
type = Velset
trigger1 = AnimElem = 6
x = 2

[State 1712,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage = 55+ifelse((Palno > 6 || var(17) >= 2),20,0),6+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 20, 10
givepower = 20, 10
guardflag = MA
pausetime = 18,25
sparkno = S6070
guard.sparkno = S6020
sparkxy = -10, -90
hitsound = s1500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1712,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17210
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1712,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_Ex1
[Statedef 1720]
type    = C
movetype= A
physics = S
juggle  = 0
poweradd= ifelse((Palno > 6 || var(17) >= 2),-300,-500)
velset = 0,0
anim = 1700+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

;-----------------
[State 1720,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1720,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1720,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1720,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1720,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1720,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 10

[State 1720,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1720,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1720,HitDef]
type = HitDef
trigger1  = Time = 0
attr      = C, NA
damage    = 30+ifelse((Palno > 6 || var(17) >= 2),20,0),3+ifelse((Palno > 6 || var(17) >= 2),20,0)
animtype  = M
getpower = 0, 0
givepower = 20, 10
guardflag = L
hitflag   = MAF
pausetime = 15,20
sparkno   = S6060
guard.sparkno = S6020
sparkxy = -10, -10
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 5
ground.hittime = 15
ground.velocity = -5
air.velocity = -2,-5

[State 1720,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17010
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1720,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1720
trigger1 = command = "a" && time >= 7
value = 1721


[State 1720,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1720
trigger1 = command = "b" && time >= 7
value = 1722


[State 1720,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_Ex_A2
[Statedef 1721]
type    = C
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1700+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

;-----------------
[State 1721,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1721,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1721,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1721,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1721,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1721,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 10

[State 1721,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1721,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1721,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 30+ifelse((Palno > 6 || var(17) >= 2),20,0),3+ifelse((Palno > 6 || var(17) >= 2),20,0)
animtype = M
getpower = 0, 0
givepower = 20, 10
guardflag = L
hitflag = MAF
pausetime = 15,20
sparkno = S6060
guard.sparkno = S6020
sparkxy = -10, -10
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 5
ground.hittime = 15
ground.velocity = -5
air.velocity = -2,-5

[State 1721,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17010
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1721,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1721
trigger1 = command = "a" && time >= 7
value = 1723


[State 1721,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1721
trigger1 = command = "b" && time >= 7
value = 1724


[State 1721,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_Ex_B2
[Statedef 1722]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1710+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

;-----------------
[State 1722,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1722,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1722,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1722,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1722,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1722,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 10

[State 1722,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1722,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1722,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage = 30+ifelse((Palno > 6 || var(17) >= 2),20,0),3+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 0, 0
givepower = 20, 10
guardflag = HA
pausetime = 15,20
sparkno = S6060
guard.sparkno = S6020
sparkxy = -30, -60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1,-6.5
air.velocity = -2,-5
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1722,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17110
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1722,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1722
trigger1 = command = "a" && time >= 7
value = 1723


[State 1722,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1722
trigger1 = command = "b" && time >= 7
value = 1724


[State 1722,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_Ex_A3
[Statedef 1723]
type    = C
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1700+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

;-----------------
[State 1723,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1723,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1723,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1723,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1723,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1723,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 10

[State 1723,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1723,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1723,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 30+ifelse((Palno > 6 || var(17) >= 2),20,0),3+ifelse((Palno > 6 || var(17) >= 2),20,0)
animtype = M
getpower = 0, 0
givepower = 20, 10
guardflag = L
hitflag = MAF
pausetime = 15,20
sparkno = S6060
guard.sparkno = S6020
sparkxy = -10, -10
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 5
ground.hittime = 15
ground.velocity = -5
air.velocity = -2,-5

[State 1723,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17010
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1723,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1723
trigger1 = command = "a" && time >= 7
value = 1725


[State 1723,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1723
trigger1 = command = "b" && time >= 7
value = 1726


[State 1723,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_Ex_B3
[Statedef 1724]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1710+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

;-----------------
[State 1724,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1724,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1724,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1724,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1724,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1724,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 10

[State 1724,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1724,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1724,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage = 30+ifelse((Palno > 6 || var(17) >= 2),20,0),3+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 0, 0
givepower = 20, 10
guardflag = HA
pausetime = 15,20
sparkno = S6060
guard.sparkno = S6020
sparkxy = -30, -60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1,-6.5
air.velocity = -2,-5
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1724,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17110
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1724,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1724
trigger1 = command = "a" && time >= 7
value = 1725

[State 1724,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1724
trigger1 = command = "b" && time >= 7
value = 1726

[State 1724,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_Ex_A4
[Statedef 1725]
type    = C
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1700+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

;-----------------
[State 1725,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1725,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1725,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1725,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1725,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1725,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 10

[State 1725,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1725,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1725,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 30+ifelse((Palno > 6 || var(17) >= 2),20,0),3+ifelse((Palno > 6 || var(17) >= 2),20,0)
animtype = M
getpower = 0, 0
givepower = 20, 10
guardflag = L
hitflag = MAF
pausetime = 15,20
sparkno = S6060
guard.sparkno = S6020
sparkxy = -10, -10
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 5
ground.hittime = 15
ground.velocity = -5
air.velocity = -2,-5

[State 1725,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17010
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1725,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1725
trigger1 = command = "a" && time >= 7
value = 1727

[State 1725,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1725
trigger1 = command = "b" && time >= 7
value = 1727

[State 1725,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_Ex_B4
[Statedef 1726]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 1710+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

;-----------------
[State 1726,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1726,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1726,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1726,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1726,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 1

[State 1726,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 10

[State 1726,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 5

[State 1726,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 2

[State 1726,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage = 30+ifelse((Palno > 6 || var(17) >= 2),20,0),3+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 0, 0
givepower = 20, 10
guardflag = HA
pausetime = 15,20
sparkno = S6060
guard.sparkno = S6020
sparkxy = -30, -60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1,-6.5
air.velocity = -2,-5
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1726,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17110
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1726,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1726
trigger1 = command = "a" && time >= 7
value = 1727

[State 1726,ChangeState]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
triggerall = stateno = 1726
trigger1 = command = "b" && time >= 7
value = 1727

[State 1726,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu Kick_Ex5
[Statedef 1727]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 10,0
anim = 1720+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

;-----------------
[State 1727,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1727,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1727,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1727,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1727,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 300, 2

[State 1727,Vel]
type = Velset
trigger1 = AnimElem = 2
x = 7

[State 1727,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 20

[State 1727,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 15

[State 1727,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 5

[State 1727,Vel]
type = Velset
trigger1 = AnimElem = 6
x = 2

[State 1727,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage = 50+ifelse((Palno > 6 || var(17) >= 2),20,0),3+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 0, 0
givepower = 20, 10
guardflag = MA
pausetime = 18,25
sparkno = S6070
guard.sparkno = S6020
sparkxy = -10, -90
hitsound = s1500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 10

[State 1727,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 17210
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 1727,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Kung Fu DiveKick_A
[Statedef 1800]
Type = A
Movetype = A
Physics = A
poweradd = 90
juggle = 4
Velset = 0,0
ctrl = 0
anim = 1800+ifelse((Palno > 6 || var(17) >= 2),1,0)
facep2 = 1

[State 1800,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

[State 1800,Pos]
type = PosFreeze
trigger1 = AnimElem = 1

[State 1800,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 2

[State 1800,VelVel]
type = VelAdd
trigger1 = AnimElem = 3
x = 6
y = 5

[state 1800,Hitdef]
type = Hitdef
trigger1 = !time
attr = A, SA
damage = 70+ifelse((Palno > 6 || var(17) >= 2),20,0), 5+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 40,20
givepower = 20,10
guarDFlag = ha
priority = 4, hit
pausetime = 8,16
sparkno = S6070
guard.sparkno = S6020
sparkxy = -10,-25
hitsound   = S600,2
guardsound = S400,1
animtype = heavy
ground.type = high
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -10
air.type = low
air.velocity = -9,7
air.fall = 1
envshake.time = 15
envshake.ampl = 7

[State 1800,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 3
anim = 1802
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307
removetime =-1
removeongethit = 1

[State 1800,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = Vel Y > 0 && Pos Y >= -10
anim = 1803
pos = 0, 0
postype = p1
sprpriority = 4
id = 307

[state 1800,Playsnd]
type = Playsnd
trigger1 = animelem = 3
value = 300, 5

[State 1800,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 2213

;---------------------------------------------------------------------------
;Kung Fu DiveKick_B
[Statedef 1810]
Type = A
Movetype = A
Physics = A
poweradd = 90
juggle = 4
Velset = 0,0
ctrl = 0
anim = 1810+ifelse((Palno > 6 || var(17) >= 2),1,0)
facep2 = 1

[State 1810,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

[State 1810,Pos]
type = PosFreeze
trigger1 = AnimElem = 1

[State 1810,NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 2

[State 1810,Vel]
type = VelAdd
trigger1 = AnimElem = 3
x = 12
y = 5

[State 1810,Hitdef]
type = Hitdef
trigger1 = !time
attr = A, SA
damage = 70+ifelse((Palno > 6 || var(17) >= 2),20,0), 5+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 40,20
givepower = 20,10
guarDFlag = ha
priority = 4, hit
pausetime = 8,16
sparkno = S6070
guard.sparkno = S6020
sparkxy = -10,-55
hitsound   = S600,2
guardsound = S400,1
animtype = heavy
ground.type = high
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -10
air.type = low
air.velocity = -9,7
air.fall = 1
envshake.time = 15
envshake.ampl = 7

[State 1810,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 3
anim = 1812
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307
removetime =-1
removeongethit = 1

[State 1810,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = Vel Y > 0 && Pos Y >= -10
anim = 1813
pos = 0, 0
postype = p1
sprpriority = 4
id = 307

[State 1810,Playsnd]
type = Playsnd
trigger1 = animelem = 3
value = 300, 5

[State 1810,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 2213

;---------------------------------------------------------------------------
;Kung Fu DiveKick_Ex
[Statedef 1820]
Type = A
Movetype = A
Physics = A
juggle = 4
Velset = 0,0
ctrl = 0
anim = 1810+ifelse((Palno > 6 || var(17) >= 2),1,0)
facep2 = 1
poweradd= ifelse((Palno > 6 || var(17) >= 2),-300,-500)

[State 1820,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

;-----------------
[State 1820,NotHitBy]
type = NotHitBy
trigger1 = animelem = 1
value = SCA
time = 2

[State 1820,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1820,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1820,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1820,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 1820,Pos]
type = PosFreeze
trigger1 = AnimElem = 1

[State 1820,Vel]
type = VelAdd
trigger1 = AnimElem = 3
x = 60
y = 5

[State 1820,Hitdef]
type = Hitdef
trigger1 = !time
trigger1 = var(9)<10
attr = A, SA
damage = 70+ifelse((Palno > 6 || var(17) >= 2),20,0), 5+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 0
givepower = 20,10
guarDFlag = ha
priority = 4, hit
pausetime = 8,30
sparkno = S6070
guard.sparkno = S6020
sparkxy = -10,-55
hitsound   = S600,2
guardsound = S400,1
animtype = heavy
ground.type = high
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -30
air.type = low
air.hittime  = 20
air.velocity = -8,-2
air.fall = 1
envshake.time = 15
envshake.ampl = 7
id = 1820

[State 1820,Hitdef]
type = Hitdef
trigger1 = !time
trigger1 = var(9)>=10
attr = A, SA
damage = 70+ifelse((Palno > 6 || var(17) >= 2),20,0), 5+ifelse((Palno > 6 || var(17) >= 2),20,0)
getpower = 0
givepower = 20,10
guarDFlag = ha
priority = 4, hit
pausetime = 8,8
sparkno = S6070
guard.sparkno = S6020
sparkxy = -10,-55
hitsound   = S600,2
guardsound = S400,1
animtype = heavy
fall = 1
ground.type = high
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -30
air.type = low
air.hittime  = 20
air.velocity = -20,10
air.fall = 1
fall.recover = 0
envshake.time = 15
envshake.ampl = 7

[State 1820,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 3
anim = 1812
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307
removetime =-1
removeongethit = 1

[State 1820,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = Vel Y > 0 && Pos Y >= -10
anim = 1813
pos = 0, 0
postype = p1
sprpriority = 4
id = 307

[State 1820,Playsnd]
type = Playsnd
trigger1 = animelem = 3
value = 300, 5

[State 1820,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 2213

;---------------------------------------------------------------------------
;Attack Avoidance_P(Start)
[Statedef 2000]
type     = S
movetype = I
physics  = S
poweradd = 100
anim     = 2000
velset   = 0, 0
juggle   = 0
ctrl     = 0
sprpriority = 2

[State 2000,AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 20
trans = add1
timegap = 2
framegap = 4
length = 8
palbright = 12,12,12
palcontrast = 100,100,100
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State 2000,NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 1
value = A, NA,SA,NP,SP,NT
time = 20

[state 2000,Playsnd]
type = Playsnd
trigger1 = animelem = 1
value = 2000, 0 + random%4

[State 2000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2001

;---------------------------------------------------------------------------
;Attack Avoidance_P(Progress)
[Statedef 2001]
type    = S
movetype= I
physics = S
juggle  = 0
velset  = 0,0
anim    = 2001
ctrl    = 0
sprpriority = 2

[State 2001,NotHitBy]
type = NotHitBy
trigger1 = time >= 1 && time <= 40
value = A, NA,SA,NP,SP
time = 1

[State 2001,ChangeState End]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = command = "a"
value = 2010

[State 2001,ChangeState Kung Fu Upper]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = command = "x"
value = 2020

[State 2001,ChangeState Kung Fu Charge]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = command = "y"
value = 2040

[State 2001,ChangeState Kung Fu Knee]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = command = "b"
value = 1210

[State 2001,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Attack Avoidance_P(End)
[Statedef 2010]
type    = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
anim = 2010
ctrl = 0
sprpriority = 2

[State 2010,NotHitBy]
type = NotHitBy
trigger1 = palno > 6
trigger1 = time >= 1 && time <= 4
value = A, NA,SA,NP,SP,NT
time = 10

[State 2010,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Attack Avoidance_P(Kung Fu Upper)
[Statedef 2020]
type    = S
movetype= A
physics = S
juggle  = 30
poweradd = 20
velset = 0,0
anim = 2020+ifelse((Palno > 6 || var(17) >= 2),3,0)
ctrl = 0
sprpriority = 2

[State 2020,NotHitBy]
type = NotHitBy
trigger1 = palno > 6
trigger1 = animelem = 1
value = SCA, NA,SA,NP,SP
time = 4

[State 2020,AfterImage] 
type = AfterImage
trigger1 = animelem = 1
time = 20
trans = add1
timegap = 2
framegap = 4
length = 8
palbright = 12,12,12
palcontrast = 100,100,100
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State 2020,HitDef] 
type = HitDef
trigger1 = time = 0
trigger1 = !Numtarget(1500) || !Numtarget(1520)
attr = S, SA
animtype  = Hard
damage    = 60+ifelse((Palno > 6 || var(17) >= 2),100,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 40, 20
givepower = 20, 10
guardflag = MA
pausetime = 0,7
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s1500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,-8
guard.velocity = -7
air.velocity = 0,-8
airguard.velocity = 0, -4
fall = 1
p2stateno = 1522
envshake.time = 18
envshake.ampl = -5
envshake.freq = 80
envshake.phase = 10
id = 1500
nochainid = 1500

[State 2020,HitDef]
type = HitDef
trigger1 = time = 0
trigger1 = Numtarget(1500) || Numtarget(1520)
attr = S, SA
animtype = hard
damage = 60+ifelse((Palno > 6 || var(17) >= 2),100,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 40, 20
givepower = 20, 10
guardflag = MA
pausetime = 10,12
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s1500, 0
guardsound = s400, 1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 0,-12
air.velocity = 0,-12
airguard.velocity = -5.5,-2.5
ground.cornerpush.veloff = 0
air.fall = 1
fall = 1
guard.velocity = -12
yaccel = .5
id = 1520
nochainid = 1520

[State 2020,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 15110
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 2020,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1125
pos = -10, 0
postype = p1
sprpriority = 5
facing = -1

[State 2020,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 3120
pos = -10, 0
postype = p1
sprpriority = 4
bindtime = -1

[State 2020,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 300, 2

[State 2020,PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = 1500, 1
channel = 0

[State 2020,ChangeState] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Attack Avoidance_P(Kung Fu Charge)
[Statedef 2040]
type    = S
movetype= A
physics = S
juggle  = 20
velset = 0,0
anim = 2040+ifelse((Palno > 6 || var(17) >= 2),1,0)
poweradd = 20
ctrl = 0
sprpriority = 2

[State 2040,Vel]
type = VelSet
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
x = 10

[State 2040,Vel]
type = VelSet
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
x = 6

[State 2040,Vel]
type = VelSet
trigger1 = AnimElem = 7
x = 3

[State 2040,Vel]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 2040,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 2040,AfterImage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 2040,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage    = 90+ifelse((Palno > 6 || var(17) >= 2),80,0), 10+ifelse((Palno > 6 || var(17) >= 2),25,0)
getpower = 30, 15
givepower = 20, 10
guardflag = MA
pausetime = 0,7
sparkno = S6070
guard.sparkno = S6020
sparkxy = -30, -65
hitsound = s1500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 700
envshake.time = 18
envshake.ampl = -5
envshake.freq = 80
envshake.phase = 10

[State 2040,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 2
anim = 1612
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 2040,Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 6130
pos = -20, 0
postype = p1
sprpriority = 3
bindtime = -1

[State 2040,PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 1600, 0

[State 2040,PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 2

[State 2040,Var]
type = Varset
trigger1 = Palno > 6 || var(17) >= 2
trigger1 = !time
var(39) = 1

[State 2040,HitBy]
type = HitBy
trigger1 = Palno > 6 || var(17) >= 2
trigger1 = time <= 5
value = SCA, AT

[State 2040,Var]
type = Varset
trigger1 = Palno > 6 || var(17) >= 2
trigger1 = time >= 6
var(39) = 0

[State 2040,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Attack Avoidance_K(Start)
[Statedef 2100]
type     = S
movetype = I
physics  = S
poweradd = 100
anim     = 2100
velset   = 0, 0
juggle   = 0
ctrl     = 0
sprpriority = -1

[State 2100,AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 20
trans = add1
timegap = 2
framegap = 4
length = 8
palbright = 12,12,12
palcontrast = 100,100,100
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

[State 2100,NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 1
value = A, NA,SA,NT,NP,SP
time = 20

[state 2100,Playsnd]
type = Playsnd
trigger1 = animelem = 1
value = 2000, 0 + random%4

[State 2100,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2101

;---------------------------------------------------------------------------
;Attack Avoidance_K(Progress)
[Statedef 2101]
type    = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
anim = 2101
ctrl = 0
sprpriority = -1

[State 2001,NotHitBy]
type = NotHitBy
trigger1 = time >= 1 && time <= 40
value = A, NA,SA,NP,SP
time = 1

[State 2101,ChangeState End]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = command = "a"
value = 2110

[State 2101,ChangeState Kung Fu Blow]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = command = "x"
value = 2130

[State 2101,ChangeState Kung Fu Whip]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = command = "y"
value = 2120

[State 2101,ChangeState Kung Fu Kick]
type = ChangeState
triggerall = var(59)=0||var(59)<=-2
trigger1 = command = "b"
value = 1710

[State 2101,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Attack Avoidance_K(End)
[Statedef 2110]
type    = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
anim = 2110
ctrl = 0
sprpriority = -1

[State 2110,NotHitBy]
type = NotHitBy
trigger1 = palno > 6
trigger1 = time >= 1 && time <= 4
value = A, NA,SA,NT,NP,SP
time = 10

[State 2110,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Attack Avoidance_K(Kung Fu Whip)
[Statedef 2120]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 20
velset = 0,0
anim = 2120+ifelse((Palno > 6 || var(17) >= 2),1,0)
ctrl = 0
sprpriority = 2

[State 2120,HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage    = 80+ifelse((Palno > 6 || var(17) >= 2),80,0), 5+ifelse((Palno > 6 || var(17) >= 2),15,0)
getpower = 30, 15
givepower = 20, 10
priority  = 5
guardflag = MA
pausetime = 15,15
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -65
hitsound = s600, 3
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-7
fall.animtype = Hard
fall = 1
fall.recover = 0
envshake.time = 20
envshake.ampl = -14
envshake.freq = 180
envshake.phase = 10

[State 2120,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 14310
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 2120,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1400,0

[State 2120,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Attack Avoidance_K(Kung Fu Blow)
[Statedef 2130]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 20
velset = 0,0
anim = 2130
ctrl = 0
sprpriority = 2

[State 2130,NotHitBy]
type = NotHitBy
trigger1 = palno > 6
trigger1 = animelem = 1
value = SCA, NA,SA,NP,SP
time = 4

[State 2130,EnvShake]
type = EnvShake
trigger1 = AnimElem = 2
time = 8
ampl = 2
freq = 170   ;A frequency of less than 180 causes a dampening effect

[State 2130,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30, 30
PalContrast =  70, 70, 70
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.85
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 2130,]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 2130,Vel]
type = Velset
trigger1 = AnimElem = 2
x = 3

[State 2130,Vel]
type = Velset
trigger1 = AnimElem = 3
x = 20

[State 2130,Vel]
type = Velset
trigger1 = AnimElem = 4
x = 8

[State 2130,Vel]
type = Velset
trigger1 = AnimElem = 5
x = 4

[State 2130,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 80, 8
getpower = 30, 15
givepower = 20, 10
guardflag = MA
pausetime = 5,5
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -60
hitsound = s600, 2
guardsound = s400, 1
ground.type = Low
ground.slidetime = 50
ground.hittime  = 50
ground.velocity = -13,0
guard.velocity = -14
air.velocity = -6,-3
envshake.time = 15
envshake.ampl = -7
envshake.freq = 120
envshake.phase = 9
air.fall = 1
fall.recover = 0

[State 2130,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1125
pos = 40, 0
postype = p1
sprpriority = 2

[State 2130,PlaySnd]
type = PlaySnd
trigger1 = Time = 2
value = 300, 2

[State 2130,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Jump Kung Fu Ghost Attack_A
[Statedef 2200]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 2200
velset   = 0,0
poweradd = 120
facep2 = 1

[State 2200,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

[State 2200,Helper]
type = Helper
trigger1 = animelem = 1
stateno = 1031
id = 1031
pos = 0,0
postype = p1
ownpal = 1

[State 2200,Helper]
type = Helper
triggerall = Palno > 6 || var(17) >= 2
trigger1 = animelem = 9
stateno = 1031
id = 1031
pos = 0,0
postype = p1
ownpal = 1

[State 2200,Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 1091
pos = 20, 0
postype = p1
sprpriority = 3
bindtime = 10
ownpal = 1

[State 2200,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1095
pos = 0, 0
postype = p1
sprpriority = 3
bindtime = 10
ownpal = 1

[State 2200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1000, 10

[State 2200,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1000, 1

[State 2200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 4

[State 2200,Vel]
type = Velset
trigger1 = Animelem = 6
x = -3.4
y = -6.2

[State 2200,Vel]
type = Veladd
trigger1 = Animelem = 6,>=0
y = .58

[State 2200,Statetypeset]
type = Statetypeset
triggerall = movetype = A
trigger1 = animelemtime(6) > 0
movetype = I

[State 2200,CtrlSet]
type = CtrlSet
trigger1 = AnimElem >= 10
value = 1

[State 2200,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2212

;---------------------------------------------------------------------------
;Jump Kung Fu Ghost Attack_B
[Statedef 2210]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 2210
velset   = 0,0
poweradd = 120
facep2 = 1

[State 2210,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

[State 2210,Helper]
type = Helper
trigger1 = animelem = 1
stateno = 2211
id = 2211
pos = 0,0
postype = p1
ownpal = 1

[State 2210,Helper]
type = Helper
triggerall = Palno > 6 || var(17) >= 2
trigger1 = animelem = 9
stateno = 2211
id = 2211
pos = 0,0
postype = p1
ownpal = 1

[State 2210,Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 1091
pos = 20, 0
sprpriority = 3
ownpal = 1

[State 2210,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1095
pos = 0, 0
postype = p1
sprpriority = 3
bindtime = 10
ownpal = 1

[State 2210,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1000, 10

[State 2210,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1000, 1

[State 2210,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 4

[State 2210,Vel]
type = Velset
trigger1 = Animelem = 6
x = -3.4
y = -6.2

[State 2210,Vel]
type = Veladd
trigger1 = Animelem = 6,>=0
y = .58

[State 2210,Statetypeset]
type = Statetypeset
triggerall = movetype = A
trigger1 = animelemtime(6) > 0
movetype = I

[State 2210,CtrlSet]
type = CtrlSet
trigger1 = AnimElem >= 10
value = 1

[State 2210,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2212

;---------------------------------------------------------------------------
;Jump Kung Fu Ghost Attack_B(Helper)
[Statedef 2211]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 2201
ctrl = 0
sprpriority = 3

[State 2211,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 2202
id = 2202
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4
removetime = -1

[State 2211,Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 1009
id = 1009
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 2
removetime = -1

[State 2211,HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP, NP , SP , HP
ignorehitpause = 1

[State 2211,ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1058
ignorehitpause = 1

[State 2211,HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, AP, NP , SP , HP
stateno = 1059
ignorehitpause = 1
time = -1

[State 2211,Vel]
type = Velset
trigger1 = 1
x = 2.7

[State 2211,Vel]
type = VelSet
trigger1 = Animelem = 7
trigger1 = Animelem = 8
trigger2 = Animelem = 9
trigger3 = Animelem = 10
y = 2

[State 2211,HitDef]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = Hard
damage    = 70, 10
getpower = 50, 20
givepower = 40, 20
guardflag = MA
pausetime = 10,10
sparkno = S6070
guard.sparkno = S6020
sparkxy = 10, -40
hitsound = s600, 3
guardsound = s400, 1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -4
air.velocity = -4,-3

[State 2211,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 7

[State 2211,ChangeState]
type = ChangeState
trigger1 = MoveContact
trigger2 = Time >= 200
trigger3 = frontedgebodydist < -50
value = 1058

;-------------------------------------------------------------------------------
;Jump Kung Fu Ghost Attack(Land1)
[Statedef 2212]
type    = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 2212

[State 2212,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

[State 2212,CtrlSet]
type = CtrlSet
trigger1 = AnimElem >= 1
value = 1

[State 2212,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 47,0

[State 2212,Pos]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2212,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Jump Kung Fu Ghost Attack(Land2)
[Statedef 2213]
type    = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 2212

[State 2213,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

[State 2213,CtrlSet]
type = CtrlSet
trigger1 = AnimElem >= 1
value = 1

[State 2213,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 47,0

[State 2213,Pos]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2213,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6160
pos = 0, 0
postype = p1
sprpriority = -2

[State 2213,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Jump Kung Fu Ghost Attack_Ex
[Statedef 2220]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 2220
velset   = 0,0
poweradd= ifelse((Palno > 6 || var(17) >= 2),-300,-500)
facep2 = 1

[State 2220,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

;-----------------
[State 2220,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 2220,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 2220,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 2220,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 2220,Helper]
type = Helper
trigger1 = animelem = 1
stateno = 2221
id = 2221
pos = 0,0
postype = p1
ownpal = 1

[State 2220,Helper]
type = Helper
triggerall = Palno > 6 || var(17) >= 2
trigger1 = animelem = 9
stateno = 2221
id = 2221
pos = 20,-20
postype = p1
ownpal = 1

[State 2220,Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 1091
pos = 20, 0
sprpriority = 3
ownpal = 1

[State 2220,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1095
pos = 0, 0
postype = p1
sprpriority = 3
bindtime = 10
ownpal = 1

[State 2220,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1000, 10

[State 2220,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1000, 1

[State 2220,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 4

[State 2220,Vel]
type = Velset
trigger1 = Animelem = 6
x = -3.4
y = -6.2

[State 2220,Vel]
type = Veladd
trigger1 = Animelem = 6,>=0
y = .58

[State 2220,Statetypeset]
type = Statetypeset
triggerall = movetype = A
trigger1 = animelemtime(6) > 0
movetype = I

[State 2220,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2212

;---------------------------------------------------------------------------
;Jump Kung Fu Ghost Attack_Ex(Helper)
[Statedef 2221]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 2221
ctrl = 0
sprpriority = 3

[State 2221,HitBy]
type = HitBy
trigger1 = 1
value = SCA, AP, NP , SP , HP
ignorehitpause = 1

[State 2221,HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, AP, NP , SP , HP
stateno = 1059
ignorehitpause = 1
time = -1

[State 2221,HitDef]
type = HitDef
trigger1 = Animelem = 4
trigger2 = Animelem = 5
trigger3 = Animelem = 6
trigger4 = Animelem = 7
trigger5 = Animelem = 8
trigger6 = Animelem = 9
trigger7 = Animelem = 10
trigger8 = Animelem = 11
trigger9 = Animelem = 12
trigger10 = Animelem = 13
trigger11 = Animelem = 14
attr = A, SP
animtype  = Hard
damage    = 5, 2
getpower = 0, 0
givepower = 2, 0
guardflag = MA
sparkno = S6040
guard.sparkno = S6020
sparkxy = 10, -40
hitsound = s500, 0
guardsound = s400, 1
ground.type = Low
ground.slidetime = 2
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0, 0

[State 2221,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 2222
id = 2222
pos = 0, 0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 4
removetime = -1

[State 2221,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1000, 7

[State 2221,RemoveExplod]
type = RemoveExplod
trigger1 = Time >= 130
trigger2 = frontedgebodydist < -50
id = 2222

[State 2221,ChangeState]
type = ChangeState
trigger1 = Time >= 130
trigger2 = frontedgebodydist < -50
value = 1058

;---------------------------------------------------------------------------
;Enter The Dragon_X
[Statedef 2400]
type    = A
movetype= A
physics = A
poweradd = 60
ctrl = 0
anim = 2400
velset = 0,0
facep2 = 1

[State 2400,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

[State 2400,HitDef]
type = HitDef
Trigger1 = Time = 0
attr = A, NT
priority = 1, Miss 
sparkno = -1
sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 2401
p2stateno = 2405
fall = 1
nochainID = 600,9999

[State 2400,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2400, 0 + random%2

;---------------------------------------------------------------------------
;Enter The Dragon_X1
[Statedef 2401]
type    = A
movetype= A
physics = N
anim = 2401
juggle  = 8
ctrl = 0
velset = 0,0
poweradd = 65
sprpriority = 2

[State 2401,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2401,Hitadd]
type = Hitadd
trigger1 = animelem = 4
value = 1

[State 2401,Target]
type = TargetLifeAdd
trigger1 = animelem = 4
value = -ceil((30+ifelse((Palno > 6 || var(17) >= 2),20,0))*const(data.attack)*0.01)
kill = 0
absolute = 1

[State 2401,Target]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 25,-85

[State 2401,Target]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && animelemtime(3) < 0
pos = 23,-78

[State 2401,Target]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && animelemtime(4) < 0
pos = 20,-62

[State 2401,Target]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
pos = 14,-55

[State 2401,Target]
type = TargetState
trigger1 = AnimElemtime(4) = 0
value = 2406

[State 2401,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 4
anim = 2403
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 2401,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 6050
pos = 20, -60
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = 5
ownpal = 1

[State 2401,PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 600,0

[State 2401,PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 2900,0

[State 2401,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 600, 2

[State 2401,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 300, 2

[State 2401,Width]
type = Width
trigger1 = AnimElemTime(7) < 0;4
edge = 30,0

[State 2401,Vel]
type = Veladd
trigger1 = animelemtime(7) >= 0
y = ifelse(animelemtime(8) >= 0, .5, .01)
x = .01

[State 2401,PlayerPush]
type = PlayerPush
trigger1 = animelemtime(4) >= 0
value = 0

[State 2401,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2402
ctrl = 0

;---------------------------------------------------------------------------
;Enter The Dragon_X2
[Statedef 2402]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 2402

[State 2402,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2402,Envshake]
type = Envshake
trigger1 = time = 0
time = 8
freq = 120
ampl = -15

[State 2402,PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1500,0

[State 2402,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 2404
pos = 0, 0
postype = p1
sprpriority = 5
bindtime = -1
id = 307

[State 2402,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6150
pos = 14, 0
postype = p1
sprpriority = 1

[State 2402,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6155
pos = 14, 0
postype = p1
sprpriority = 5

[State 2402,Hitadd]
type = Hitadd
trigger1 = animelem = 1
value = 1

[State 2402,Target]
type = TargetLifeAdd
trigger1 = animelem = 1
value = -ceil((70+ifelse((Palno > 6 || var(17) >= 2),50,0))*const(data.attack)*0.01)
absolute = 1

[State 2402,Target]
type = TargetState
trigger1 = AnimElemtime(1) = 0
value = 2408

[State 2402,Target]
type = TargetState
trigger1 = AnimElemtime(9) = 0
value = 2409

[State 2402,Width]
type = Width
trigger1 = AnimElemTime(4) < 0
edge = 30,0

[State 2402,Pos]
type = Posset
trigger1 = time = 0
y = 0

[State 2402,PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 105, 0

[state 2402,Statetypeset]
type = Statetypeset
trigger1 = animelem = 6
value = A

[State 2402,Vel]
type = VelSet
trigger1 = animelem = 6
x = -15
y = -6

[state 2402,Vel]
type = Veladd
trigger1 = animelem = 6,>0
y = 0.9

[state 2402,Vel]
type = Velmul
trigger1 = 1
x = 0.98

[State 2402,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Enter The Dragon_ENEMY1
[Statedef 2405]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2405,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2405,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2405

;---------------------------------------------------------------------------
;Enter The Dragon_ENEMY2
[Statedef 2406]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2406,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2406,Vel]
type = VelAdd
Trigger1 = 1
y = 5.5
x = 0.02

[State 2406,Changestate]
type = Changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -15
value = 2407
ctrl = 0

[State 2406,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 300, 2

;-----------------------------------------------
;Enter The Dragon_ENEMY3
[Statedef 2407]
type    = L
movetype= H
physics = C
velset = 0,0

[State 2407,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2407,Pos]
type = Posset
Trigger1 = time = 0
y = 0

[State 2407,Explod]
type = Explod
trigger1 = time = 0
anim = 6161
pos = 0, 0
postype = p1
sprpriority = -2

[State 2407,Envshake]
type = Envshake
trigger1 = time = 0
time = 8
freq = 120
ampl = -8

[State 2407,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 600, 3

[State 2407,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2406

;---------------------------------------------
;Enter The Dragon_ENEMY4
[Statedef 2408]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2408,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2408,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2407

;---------------------------------------------
;Enter The Dragon_ENEMY5
[Statedef 2409]
type    = L
movetype= H
physics = C
velset = 0,0

[State 2409,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2409,Selfstate]
type = Selfstate
Trigger1 = time = 0
value = ifelse(Alive, 5120, 5150)

;---------------------------------------------------------------------------
;Enter The Dragon_Y
[Statedef 2410]
type    = A
movetype= A
physics = A
poweradd = 60
ctrl = 0
anim = 2410
velset = 0,0
facep2 = 1

[State 2410,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

[State 2410,HitDef]
type = HitDef
Trigger1 = Time = 0
attr = A, NT
priority = 1, Miss 
sparkno = -1
sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 2411
p2stateno = 2415
fall = 1
nochainID = 600,9999

[State 2410,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2400, 0 + random%2

;---------------------------------------------------------------------------
;Enter The Dragon_Y1
[Statedef 2411]
type    = A
movetype= A
physics = N
anim = 2411
juggle  = 8
ctrl = 0
velset = 0,0
poweradd = 65
sprpriority = 2

[State 2411,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2411,Hitadd]
type = Hitadd
trigger1 = animelem = 4
value = 1

[State 2411,Target]
type = TargetLifeAdd
trigger1 = animelem = 4
value = -ceil((40+ifelse((Palno > 6 || var(17) >= 2),30,0))*const(data.attack)*0.01)
kill = 0
absolute = 1

[State 2411,Target]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 25,-85

[State 2411,Target]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && animelemtime(3) < 0
pos = 23,-78

[State 2411,Target]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && animelemtime(4) < 0
pos = 20,-62

[State 2411,Target]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
pos = 14,-55

[State 2411,Target]
type = TargetState
trigger1 = AnimElemtime(4) = 0
value = 2416

[State 2411,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 4
anim = 2403
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 2411,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 6050
pos = 20, -60
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = 5
ownpal = 1

[State 2411,PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 600,0

[State 2411,PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 2900,0

[State 2411,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 600, 2

[State 2411,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 300, 2

[State 2411,Width]
type = Width
trigger1 = AnimElemTime(7) < 0
edge = 30,0

[State 2411,Vel]
type = Veladd
trigger1 = animelemtime(7) >= 0
y = ifelse(animelemtime(8) >= 0, .5, .01)
x = .01

[State 2411,PlayerPush]
type = PlayerPush
trigger1 = animelemtime(4) >= 0
value = 0

[State 2411,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2412
ctrl = 0

;---------------------------------------------------------------------------
;Enter The Dragon_Y2
[Statedef 2412]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 2412

[State 2412,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2412,Envshake]
type = Envshake
trigger1 = time = 0
time = 12
freq = 120
ampl = -15

[State 2412,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 2404
pos = 0, 0
postype = p1
sprpriority = 5
bindtime = -1
id = 307

[State 2412,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6150
pos = 14, 0
postype = p1
sprpriority = 1

[State 2412,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6155
pos = 14, 0
postype = p1
sprpriority = 5

[State 2412,Hitadd]
type = Hitadd
trigger1 = animelem = 1
value = 1

[State 2412,Target]
type = TargetLifeAdd
trigger1 = animelem = 1
value = -ceil((80+ifelse((Palno > 6 || var(17) >= 2),60,0))*const(data.attack)*0.01)
absolute = 1

[State 2412,Target]
type = TargetState
trigger1 = AnimElemtime(1) = 0
value = 2418

[State 2412,Target]
type = TargetState
trigger1 = AnimElemtime(9) = 0
value = 2409

[State 2412,Width]
type = Width
trigger1 = AnimElemTime(4) < 0
edge = 30,0

[State 2412,Pos]
type = Posset
trigger1 = time = 0
y = 0

[State 2412,PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1500,0

[State 2412,PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 105, 0

[State 2412,Statetypeset]
type = Statetypeset
trigger1 = animelem = 6
value = A

[State 2412,Vel]
type = VelSet
trigger1 = animelem = 6
x = -15
y = -6

[State 2412,Vel]
type = Veladd
trigger1 = animelem = 6,>0
y = 0.9

[State 2412,Vel]
type = Velmul
trigger1 = 1
x = 0.98

[State 2412,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Enter The Dragon_Y_ENEMY1
[Statedef 2415]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2415,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2415,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2415

;---------------------------------------------------------------------------
;Enter The Dragon_Y_ENEMY2
[Statedef 2416]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2416,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2416,Vel]
type = VelAdd
Trigger1 = 1
y = .8
x = 0.02

[State 2416,Changestate]
type = Changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -15
value = 2417
ctrl = 0

[State 2416,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 300, 2

;-----------------------------------------------
;Enter The Dragon_Y_ENEMY3
[Statedef 2417]
type    = L
movetype= H
physics = C
velset = 0,0

[State 2417,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2417,Pos]
type = Posset
Trigger1 = time = 0
y = 0

[State 2417,Explod]
type = Explod
trigger1 = time = 0
anim = 6161
pos = 0, 0
postype = p1
sprpriority = -2

[State 2417,Envshake]
type = Envshake
trigger1 = time = 0
time = 8
freq = 120
ampl = -8

[State 2417,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 600, 3

[State 2417,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2406

;---------------------------------------------
;Enter The Dragon_Y_ENEMY4
[Statedef 2418]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2418,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2418,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2417

;---------------------------------------------------------------------------
;Enter The Dragon_Ex
[Statedef 2420]
type    = A
movetype= A
physics = A
poweradd= ifelse((Palno > 6 || var(17) >= 2),-300,-500)
ctrl = 0
anim = 2420
velset = 0,0
facep2 = 1

[State 2420,Removeexplod]
type = Removeexplod
trigger1 = Time = 0
id = 307

;-----------------
[State 2420,NotHitBy]
type = NotHitBy
trigger1 = animelem = 1
value = SCA
time = 10

[State 2420,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 2420,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 2420,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 2420,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 2420,HitDef]
type = HitDef
Trigger1 = Time = 0
attr = A, NT
priority = 1, Miss 
getpower = 0, 0
sparkno = -1
sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 2421
p2stateno = 2425
fall = 1
nochainID = 600,9999

[State 2420,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2400, 0 + random%2

;---------------------------------------------------------------------------
;Enter The Dragon_Ex1
[Statedef 2421]
type    = A
movetype= A
physics = N
anim = 2421
juggle  = 8
ctrl = 0
velset = 0,0
sprpriority = 2

;-----------------
[State 2421,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 20

[State 2421,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 2421,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 2421,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 2421,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 2421,Hitadd]
type = Hitadd
trigger1 = animelem = 4
value = 1

[State 2402,Target]
type = TargetLifeAdd
trigger1 = animelem = 4
value = -ceil((30+ifelse((Palno > 6 || var(17) >= 2),20,0))*const(data.attack)*0.01)
kill = 0
absolute = 1

[State 2421,Target]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 25,-85

[State 2421,Target]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && animelemtime(3) < 0
pos = 23,-78

[State 2421,Target]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && animelemtime(4) < 0
pos = 20,-62

[State 2421,Target]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
pos = 14,-55

[State 2421,Target]
type = TargetState
trigger1 = AnimElemtime(4) = 0
value = 2406

[State 2421,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 4
anim = 2403
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 2421,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 6050
pos = 20, -60
postype = p1
bindtime = 1
vel = 0,0
accel = 0,0
sprpriority = 5
ownpal = 1

[State 2421,PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 600,0

[State 2421,PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 2900,0

[State 2421,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 600, 2

[State 2421,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 300, 2

[State 2421,Width]
type = Width
trigger1 = AnimElemTime(7) < 0
edge = 30,0

[State 2421,Vel]
type = Veladd
trigger1 = animelemtime(7) >= 0
y = ifelse(animelemtime(8) >= 0, .5, .01)
x = .01

[State 2421,PlayerPush]
type = PlayerPush
trigger1 = animelemtime(4) >= 0
value = 0

[State 2421,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 2422
ctrl = 0

;---------------------------------------------------------------------------
;Enter The Dragon_Ex2
[Statedef 2422]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 2422

[State 2422,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 20

[State 2422,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 2422,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 2422,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 2422,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0

[State 2422,Envshake]
type = Envshake
trigger1 = time = 0
time = 18
freq = 120
ampl = -15

[State 2422,PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1500,0

[State 2422,PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 2420,0

[State 2422,PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = 2420,1

[State 2422,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 1
anim = 2404
pos = 0, 0
postype = p1
sprpriority = 5
bindtime = -1
id = 307

[State 2422,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 5
anim = 2903
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
facing = -1
id = 307

[State 2422,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 9
anim = 2423
pos = 0, 0
postype = p1
sprpriority = -1
bindtime = -1
id = 307

[State 2422,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 9
anim = 2424
pos = 0, 0
postype = p1
sprpriority = 5
bindtime = -1
id = 307

[State 2422,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6150
pos = 14, 0
postype = p1
sprpriority = 1

[State 2422,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6155
pos = 14, 0
postype = p1
sprpriority = 5

[State 2422,Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 6060
pos = 14, 0
postype = p1
sprpriority = 5

[State 2422,Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 6070
pos = 14, 0
postype = p1
sprpriority = 5

[State 2422,Hitadd
type = Hitadd
trigger1 = animelem = 1
trigger2 = animelem = 5
trigger3 = animelem = 9
value = 1

[State 2422,Target]
type = TargetLifeAdd
trigger1 = animelem = 1
value = -ceil((30+ifelse((Palno > 6 || var(17) >= 2),20,0))*const(data.attack)*0.01)
absolute = 1

[State 2422,Target]
type = TargetLifeAdd
trigger1 = animelem = 5
value = -ceil((20+ifelse((Palno > 6 || var(17) >= 2),20,0))*const(data.attack)*0.01)
absolute = 1

[State 2422,Target]
type = TargetLifeAdd
trigger1 = animelem = 9
value = -ceil((70+ifelse((Palno > 6 || var(17) >= 2),30,0))*const(data.attack)*0.01)
absolute = 1

[State 2422,Target]
type = TargetState
trigger1 = AnimElemtime(1) = 0
value = 2428

[State 2422,Target]
type = TargetState
trigger1 = AnimElemtime(20) = 0
value = 2409

[State 2422,Width]
type = Width
trigger1 = AnimElemTime(4) < 0
edge = 30,0

[State 2422,Pos]
type = Posset
trigger1 = time = 0
y = 0

[State 2422,Statetypeset]
type = Statetypeset
trigger1 = animelem = 17
value = A

[State 2422,Vel]
type = VelSet
trigger1 = animelem = 17
x = -15
y = -6

[State 2422,Vel]
type = Veladd
trigger1 = animelem = 17,>0
y = 0.9

[State 2422,Vel]
type = Velmul
trigger1 = 1
x = 0.98

[State 2422,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Enter The Dragon_Ex_ENEMY1
[Statedef 2425]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2425,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2425,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2425

;---------------------------------------------------------------------------
;Enter The Dragon_Ex_ENEMY2
[Statedef 2426]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2426,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2426,Vel]
type = VelAdd
Trigger1 = 1
y = .8
x = 0.02

[State 2426,Changestate]
type = Changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -15
value = 2427
ctrl = 0

[State 2426,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 300, 2

;-----------------------------------------------
;Enter The Dragon_Ex_ENEMY3
[Statedef 2427]
type    = L
movetype= H
physics = C
velset = 0,0

[State 2427,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2427,Pos]
type = Posset
Trigger1 = time = 0
y = 0

[State 2427,Explod]
type = Explod
trigger1 = time = 0
anim = 6161
pos = 0, 0
postype = p1
sprpriority = -2

[State 2427,Envshake]
type = Envshake
trigger1 = time = 0
time = 8
freq = 120
ampl = -8

[State 2427,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 600, 3

[State 2427,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2426

;---------------------------------------------
;Enter The Dragon_Ex_ENEMY4
[Statedef 2428]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2428,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2428,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2427

;---------------------------------------------
;Enter The Dragon_Ex_ENEMY5
[Statedef 2429]
type    = L
movetype= H
physics = C
velset = 0,0

[State 2429,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2429,Selfstate]
type = Selfstate
Trigger1 = time = 0
value = ifelse(Alive, 5120, 5150)

;---------------------------------------------------------------------------
;Neck Tightening_A1
[Statedef 2900]
type    = S
movetype= I
physics = S
poweradd = 60
ctrl = 0
anim = 2900
velset = 0,0
facep2 = 1

[State 2900,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 1,=0
movetype = A

[State 2900,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 1,=1
movetype = I

[State 2900,HitDef]
type = HitDef
triggerall = var(5)<=0
trigger1= P2Dist x <= 70 && AnimElem = 1
trigger1= AnimElem = 1,<=0
trigger1 = P2StateNo != [150,155]
trigger1 = P2StateNo != [40,49]
trigger1 = P2StateNo != 50 && 52
trigger1 = p2statetype != A
numhits = 0
attr = S, ST
getpower = 16,16
guard.dist = 0
priority = 4, Miss
hitsound = s600, 1
sparkno = S6000
sparkxy = -20, -68
p2facing = 1
p1stateno = 2901
p2stateno = 2905
p2getp1state = 1
Palfx.time = 1
ID = 2900

[State 2900,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2400, 0 + random%2

[State 2900,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Neck Tightening_A2
[Statedef 2901]
type = S
movetype = A
physics = N
anim = 2901
velset = 0
poweradd = 90

[State 2901,Pos]
type = PosSet
trigger1 = Time = 0
trigger1 = NumTarget(2900)
x = Target(2900), Pos X + 36 * Target(2900), facing
y = 0

[State 2901,Target]
type = BindtoTarget
trigger1 = animelem= 2, >= 0
trigger1 = animelem= 55, <= 0
pos = -3,8,Head

[State 2901,Target]
type = TargetBind
Trigger1 = Animtime = 0
pos = 12, 0
time = 1

[State 2901,Target]
type = TargetLifeAdd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
value = -ceil((20+ifelse((Palno > 6 || var(17) >= 2),15,0))*const(data.attack)*0.01)

[State 2901,Hitadd]
type = Hitadd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
value = 1

[State 2901,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
anim = 2903
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 2901,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2900, 0 + random%2

[State 2901,PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 300,2

[State 2901,PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 100,1

[State 2901,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
value = 2901, 0

[State 2901,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2902

[State 2901,ChangeState]
type = ChangeState
Triggerall = var(59) = 0
Triggerall = stateno = 2901 && animelem = 29, >= 31
TriggerAll = command = "Spinning Lotus_3"
TriggerAll = power >= 3000
trigger1 = movetype = A
value = 3323

[State 2901,ChangeState]
type = ChangeState
Triggerall = var(59) = 0
Triggerall = stateno = 2901 && animelem = 29, >= 31
TriggerAll = command = "Spinning Lotus_2"
TriggerAll = power >= 2000
trigger1 = movetype = A
value = 3313

[State 2901,ChangeState]
type = ChangeState
Triggerall = var(59) = 0
Triggerall = stateno = 2901 && animelem = 29, >= 31
TriggerAll = command = "Spinning Lotus_1"  || command = "Spinning Lotus_2"
TriggerAll = power >= 1000
trigger1 = movetype = A
value = 3303

;---------------------------------------------------------------------------
;Neck Tightening(End)
[Statedef 2902]
type    = A
physics = N
ctrl = 0
anim = 2902
velset = 0, 0

[State 2902,Pos]
type = Posset
trigger1 = Time = 0
y = -10

[State 2902,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 184, 0 + random%2

[State 2902,Vel]
type = Velset
trigger1 = Animelem = 1
x = -3.4
y = -6.2

[State 2902,Vel]
type = Veladd
trigger1 = Animelem = 1,>=0
y = .58

[State 2902,Statetypeset]
type = Statetypeset
triggerall = movetype = A
trigger1 = animelemtime(1) > 0
movetype = I

[State 2902,CtrlSet]
type = CtrlSet
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem >= 2
value = 1

[State 2902,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2212

;---------------------------------------------------------------------------
;Neck Tightening_A(ENEmy)1
[Statedef 2905]
type = S
movetype = H
physics = S
velset = 0,0

[State 2905,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2905,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2905

[State 2905,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 2905,Pos]
type = Posadd
trigger1 = Animelem = 2 , = 0
trigger1 = BackEdgeDist <= 10
x = 20

[State 2905,Pos]
type = Posset
trigger1 = Time = 0
y = 0

[State 2905,Pos]
type = Posadd
trigger1 = AnimTime = 0
x = 5

[State 2905,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2906

;---------------------------------------------------------------------------
;Neck Tightening_A(ENEmy)2
[Statedef 2906]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 1

[State 2906,Vel]
type = Velset
trigger1 = Time = 0
x = -1.95
y = -6.75

[State 2906,Vel]
type = Veladd
trigger1 = Time >= 0
y = 0.34

[State 2906,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 2906,SelfState]
type = SelfState
trigger1 = Pos Y >= -6 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;Neck Tightening_B1
[Statedef 2910]
type    = S
movetype= I
physics = S
poweradd = 60
ctrl = 0
anim = 2910
velset = 0,0
facep2 = 1

[State 2910,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 1,=0
movetype = A

[State 2910,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 1,=1
movetype = I

[State 2910,HitDef]
type = HitDef
triggerall = var(5)<=0
trigger1= P2Dist x <= 70 && AnimElem = 1
trigger1= AnimElem = 1,<=0
trigger1 = P2StateNo != [150,155]
trigger1 = P2StateNo != [40,49]
trigger1 = P2StateNo != 50 && 52
trigger1 = p2statetype != A
numhits = 0
attr = S, ST
getpower = 16,16
guard.dist = 0
priority = 4, Miss
hitsound = s600, 1
sparkno = S6000
sparkxy = -20, -68
p2facing = 1
p1stateno = 2911
p2stateno = 2915
p2getp1state = 1
Palfx.time = 1
ID = 2910

[State 2910,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2400, 2 + random%3

[State 2910,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Neck Tightening_B2
[Statedef 2911]
type = S
movetype = A
physics = N
anim = 2911
velset = 0
poweradd = 90

[State 2911,Pos]
type = PosSet
trigger1 = Time = 0
trigger1 = NumTarget(2900)
x = Target(2910), Pos X + 36 * Target(2910), facing
y = 0

[State 2911,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2900, 0 + random%2

[State 2911,PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 300,2

[State 2911,PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 100,1

[State 2911,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
trigger6 = AnimElem = 54
trigger7 = AnimElem = 63
value = 2901, 0

[State 2911,Target]
type = BindtoTarget
trigger1 = animelem= 2, >= 0
trigger1 = animelem= 73, <= 0
pos = -3,8,Head

[State 2911,Target]
type = TargetBind
Trigger1 = Animtime = 0
pos = 12, 0
time = 1

[State 2911,Target]
type = TargetLifeAdd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
trigger6 = AnimElem = 54
trigger7 = AnimElem = 63
value = -ceil((17+ifelse((Palno > 6 || var(17) >= 2),13,0))*const(data.attack)*0.01)

[State 2911,Hitadd]
type = Hitadd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
trigger6 = AnimElem = 54
trigger7 = AnimElem = 63
value = 1

[State 2911,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
trigger6 = AnimElem = 54
trigger7 = AnimElem = 63
anim = 2903
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 2911,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2902

[State 2911,ChangeState]
type = ChangeState
Triggerall = var(59) = 0
Triggerall = stateno = 2911 && animelem = 39, >= 41
TriggerAll = command = "Spinning Lotus_3"
TriggerAll = power >= 3000
trigger1 = movetype = A
value = 3323

[State 2911,ChangeState]
type = ChangeState
Triggerall = var(59) = 0
Triggerall = stateno = 2911 && animelem = 39, >= 41
TriggerAll = command = "Spinning Lotus_2"
TriggerAll = power >= 2000
trigger1 = movetype = A
value = 3313

[State 2911,ChangeState]
type = ChangeState
Triggerall = var(59) = 0
Triggerall = stateno = 2911 && animelem = 39, >= 41
TriggerAll = command = "Spinning Lotus_1"  || command = "Spinning Lotus_2"
TriggerAll = power >= 1000
trigger1 = movetype = A
value = 3303

;---------------------------------------------------------------------------
;Neck Tightening_B(ENEmy)1
[Statedef 2915]
type = S
movetype = H
physics = S
velset = 0,0

[State 2915,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2915,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2915

[State 2915,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 2915,Pos]
type = Posadd
trigger1 = Animelem = 2 , = 0
trigger1 = BackEdgeDist <= 10
x = 20

[State 2915,Pos]
type = Posset
trigger1 = Time = 0
y = 0

[State 2915,Pos]
type = Posadd
trigger1 = AnimTime = 0
x = 5

[State 2915,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2916

;---------------------------------------------------------------------------
;Neck Tightening_B(ENEmy)2
[Statedef 2916]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 1

[State 2916,Vel]
type = Velset
trigger1 = Time = 0
x = -1.95
y = -6.75

[State 2916,Vel]
type = Veladd
trigger1 = Time >= 0
y = 0.34

[State 2916,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 2916,SelfState]
type = SelfState
trigger1 = Pos Y >= -6 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;Neck Tightening_Ex1
[Statedef 2920]
type    = S
movetype= I
physics = S
poweradd= ifelse((Palno > 6 || var(17) >= 2),-300,-500)
ctrl = 0
anim = 2920
velset = 0,0
facep2 = 1

;-----------------
[State 2920,NotHitBy]
type = NotHitBy
trigger1 = animelem = 1
value = SCA
time = 5

[State 2920,AfterImage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 2920,AfterImage]
type = AfterImageTime
trigger1 = 1
time = 2

[State 2920,PalFX]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 2920,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 6001, 0
;-----------------

[State 2920,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 1,=0
movetype = A

[State 2920,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 1,=1
movetype = I

[State 2920,HitDef]
type = HitDef
triggerall = var(5)<=0
trigger1= P2Dist x <= 70 && AnimElem = 1
trigger1= AnimElem = 1,<=0
trigger1 = P2StateNo != [150,155]
trigger1 = P2StateNo != [40,49]
trigger1 = P2StateNo != 50 && 52
trigger1 = p2statetype != A
numhits = 0
attr = S, ST
getpower = 0, 0
guard.dist = 0
priority = 4, Miss
hitsound = s600, 1
sparkno = S6000
sparkxy = -20, -68
p2facing = 1
p1stateno = 2921
p2stateno = 2925
p2getp1state = 1
Palfx.time = 1
ID = 2920

[State 2920,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2400, 0 + random%2

[State 2920,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Neck Tightening_Ex2
[Statedef 2921]
type = S
movetype = A
physics = N
anim = 2921
velset = 0
poweradd = 90

[State 2921,PalFX]
type = PalFX
trigger1 = Time%2=0
time = 1
add = 120,100,40
ignorehitpause = 1

[State 2921,Pos]
type = PosSet
trigger1 = Time = 0
trigger1 = NumTarget(2920)
x = Target(2920), Pos X + 36 * Target(2920), facing
y = 0

[State 2921,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
trigger6 = AnimElem = 54
trigger7 = AnimElem = 63
trigger8 = AnimElem = 72
trigger9 = AnimElem = 81
trigger10 = AnimElem = 90
value = 2901, 0

[State 2921,Target]
type = BindtoTarget
trigger1 = animelem= 2, >= 0
trigger1 = animelem= 55, <= 0
pos = -3,8,Head

[State 2921,Target]
type = TargetBind
Trigger1 = Animtime = 0
pos = 12, 0
time = 1

[State 2921,Target]
type = TargetLifeAdd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
trigger6 = AnimElem = 54
trigger7 = AnimElem = 63
trigger8 = AnimElem = 72
trigger9 = AnimElem = 81
trigger10 = AnimElem = 90
value = -ceil((15+ifelse((Palno > 6 || var(17) >= 2),9,0))*const(data.attack)*0.01)

[State 2921,Hitadd]
type = Hitadd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
trigger6 = AnimElem = 54
trigger7 = AnimElem = 63
trigger8 = AnimElem = 72
trigger9 = AnimElem = 81
trigger10 = AnimElem = 90
value = 1

[State 2921,Explod]
type = Explod
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem = 9
trigger2 = AnimElem = 18
trigger3 = AnimElem = 27
trigger4 = AnimElem = 36
trigger5 = AnimElem = 45
trigger6 = AnimElem = 54
trigger7 = AnimElem = 63
trigger8 = AnimElem = 72
trigger9 = AnimElem = 81
trigger10 = AnimElem = 90
anim = 2903
pos = 0, 0
postype = p1
sprpriority = 4
bindtime = -1
id = 307

[State 2921,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2900, 0 + random%2

[State 2921,PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 300,2

[State 2921,PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 100,1

[State 2921,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2922

[State 2921,ChangeState]
type = ChangeState
Triggerall = var(59) = 0
Triggerall = stateno = 2921 && animelem = 59, >= 61
TriggerAll = command = "Spinning Lotus_3"
TriggerAll = power >= 3000
trigger1 = movetype = A
value = 3323

[State 2921,ChangeState]
type = ChangeState
Triggerall = var(59) = 0
Triggerall = stateno = 2921 && animelem = 59, >= 61
TriggerAll = command = "Spinning Lotus_2"
TriggerAll = power >= 2000
trigger1 = movetype = A
value = 3313

[State 2921,ChangeState]
type = ChangeState
Triggerall = var(59) = 0
Triggerall = stateno = 2921 && animelem = 59, >= 61
TriggerAll = command = "Spinning Lotus_1"  || command = "Spinning Lotus_2"
TriggerAll = power >= 1000
trigger1 = movetype = A
value = 3303

;---------------------------------------------------------------------------
;Neck Tightening_Ex(End)
[Statedef 2922]
type    = A
physics = N
ctrl = 0
anim = 2902
velset = 0, 0

[State 2922,PalFX]
type = PalFX
trigger1 = Time%2=0
time = 1
add = 120,100,40
ignorehitpause = 1

[State 2922,Pos]
type = Posset
trigger1 = Time = 0
y = -10

[State 2922,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 184, 0 + random%3

[State 2922,Vel]
type = Velset
trigger1 = Animelem = 1
x = -3.4
y = -6.2

[State 2922,Vel]
type = Veladd
trigger1 = Animelem = 1,>=0
y = .58

[State 2922,Statetypeset]
type = Statetypeset
triggerall = movetype = A
trigger1 = animelemtime(1) > 0
movetype = I

[State 2922,CtrlSet]
type = CtrlSet
triggerall = Palno > 6 || var(17) >= 2
trigger1 = AnimElem >= 2
value = 1

[State 2922,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2212

;---------------------------------------------------------------------------
;Neck Tightening_Ex(ENEmy)1
[Statedef 2925]
type = S
movetype = H
physics = S
velset = 0,0

[State 2925,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2925,ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2925

[State 2925,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 2925,Pos]
type = Posadd
trigger1 = Animelem = 2 , = 0
trigger1 = BackEdgeDist <= 10
x = 20

[State 2925,Pos]
type = Posset
trigger1 = Time = 0
y = 0

[State 2925,Pos]
type = Posadd
trigger1 = AnimTime = 0
x = 5

[State 2925,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 2926

;---------------------------------------------------------------------------
;Neck Tightening_Ex(ENEmy)2
[Statedef 2926]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 1

[State 2926,Vel]
type = Velset
trigger1 = Time = 0
x = -1.95
y = -6.75

[State 2926,Vel]
type = Veladd
trigger1 = Time >= 0
y = 0.34

[State 2926,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 2926,SelfState]
type = SelfState
trigger1 = Pos Y >= -6 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;Super Armour1
[Statedef 7000]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 6904

[State 7000,BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 7000,NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT

[State 7000,HitOverride]
type = HitOverride
trigger1 = IsHelper(7000)
attr = SCA,AA,AP
stateno = 7001
time = -1

[State 7000,Destroyself]
type = Destroyself
trigger1 = root,stateno = 0
trigger2 = root,movetype != A
trigger3 = root,var(39) = 0

;---------------------------------------------------------------------------
;Super Armour2
[Statedef 7001]
type    = S
movetype= I
physics = S
ctrl = 0
velset = 0,0
anim = 6900

[State 7001,Helper]
type = Helper
trigger1 = !time
trigger1 = numhelper(7011) = 0
helpertype = normal
name = "SAeffact"
id = 7011
postype = back
pos = 40,-80
stateno = 7003
keyctrl = 0
ownpal = 1
size.xscale = 1.05
size.yscale = 1.05

[State 7001,ChangeState]
type = ChangeState
trigger1 = Time = 1
value = 7000

;---------------------------------------------------------------------------
;Super Armour(Helper)1
[Statedef 7002]
type    = S
movetype= H
physics = N
poweradd = 0
ctrl = 0
velset = 0, 0
anim = 6900

[state 7002,Destroyself]
type = Destroyself
trigger1 = Time = 1

;---------------------------------------------------------------------------
;Super Armour(Helper)2
[Statedef 7003]
type    = S
movetype= H
physics = N
poweradd = 0
ctrl = 0
velset = 0, 0
anim = 6900
sprpriority = -7

[State 7003,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 7003,BindToRoot]
type = BindToRoot
trigger1 = 1
facing = 1
pos = (ifelse(Parent,var(53) = 1,-1,0)+ifelse(Parent,var(53) = 2,-2,0))*ifelse(Facing = -1,-1,1),2

[State 7003,PalFX]
type = PalFX
trigger1 = !time
trigger2 = TimeMod = 2,1
time = 2
add = 255,0,0
ignorehitpause = 1

[State 7003,PalFX]
type = PalFX
trigger1 = TimeMod = 4,1
time = 2
add = 255,255,0
ignorehitpause = 1

[State 7003,ChangeAnim]
type = ChangeAnim
trigger1 = time >= 1
value = root,anim
elem = root,animelemno(0)
ignorehitpause = 1
persistent = 1

[State 7003,Destroyself]
type = Destroyself
trigger1 = Time = 21
trigger2 = root,movetype = H

