;---------------------------------------------------------------------------
;必⒓
;---------------------------------------------------------------------------
; 百式鬼き（轻）
[Statedef 1000]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,8)
poweradd = 100
velset = 0,0
anim = 1000
sprpriority = 1
ctrl = 0
facep2 = 1

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 2,<= 0
value = SCA

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1000,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s1000,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3,>= 0
trigger1 = AnimElem = 4,<= 0
trigger1 = MoveHit
value = s24,0
persistent = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4,>= 0
trigger1 = MoveHit
value = s24,0
persistent = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
id = var(7) := 1010
stateno = 6000
pos = 0,0
postype = p1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElemTime(9) = 1
id = var(7) := 1011
stateno = 6000
pos = 0,0
postype = p1
ownpal = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 8

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
value = A

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = 4
y = -6

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 4,>= 0
trigger1 = Vel X >= 0
x = -0.2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 3
y = -6

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 4,>= 0
y = 0.4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,SA
animtype = Hard
priority = 6,Hit
damage = 60,6
guardflag = M
pausetime = 15,16
sparkno = s30002
guard.sparkno = s30040
sparkxy = -10,-67
hitsound = s25,2
guardsound = s26,1
ground.type = Low
ground.slidetime = 15
ground.hittime = 18
ground.velocity = -3.2,-9.5
air.velocity = -3.2,-9.5
yaccel = .45
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
palfx.time = 58
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
id = 1000
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A,SA
animtype = Hard
priority = 6,Hit
damage = 60,6
guardflag = M
pausetime = 12,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-62
hitsound = s25,2
guardsound = s26,1
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -2,-12
air.cornerpush.veloff = 0
air.velocity = -2,-12
yaccel = .6
fall = 1
fall.recover = 0
fall.animtype = up
palfx.time = 58
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
id = 1000
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1005
;---------------------------------------------------------------------------
; 百式鬼き（重） 
[Statedef 1001]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,8)
poweradd = 100
velset = 0,0
anim = 1001
sprpriority = 1
ctrl = 0
facep2 = 1

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1
;-----------------------------------------------------------------------
[State 0, Helper]
type = Helper
trigger1 = numhelper(77777)=0
trigger1 = var(20)>0 && var(12)=1
trigger1 = time = 0
helpertype = normal
ID = 77777
stateno = 77777
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
;------------------------------------------------------------------
[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 3,<= 0
value = SCA

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 1001

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1000,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s1000,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3,>= 0
trigger1 = AnimElem = 4,<= 0
trigger1 = MoveHit
value = s24,0
persistent = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4,>= 0
trigger1 = MoveHit
value = s24,0
persistent = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
id = var(7) := 1010
stateno = 6000
pos = 0,0
postype = p1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElemTime(9) = 1
id = var(7) := 1011
stateno = 6000
pos = 0,0
postype = p1
ownpal = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 12

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
value = A

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = 4
y = -8

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 4,>= 0
trigger1 = Vel X >= 0
x = -0.12

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 8,>= 0
x = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 3
y = -8

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 4,>= 0
y = 0.4

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,SA
animtype = Hard
priority = 6,Hit
damage = 60,6
guardflag = M
pausetime = 15,16
sparkno = s30002
guard.sparkno = s30040
sparkxy = -10,-67
hitsound = s25,2
guardsound = s26,1
ground.type = Low
ground.slidetime = 15
ground.hittime = 18
ground.velocity = -1
air.velocity = -3,-5
yaccel = .35
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
palfx.time = 58
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
id = 1001
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A,SA
animtype = Hard
priority = 6,Hit
damage = 60,6
guardflag = M
pausetime = 12,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-62
hitsound = s25,2
guardsound = s26,1
ground.type = Low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -3.2,-10
air.velocity = -3.2,-10
yaccel = .45
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
fall.animtype = up
palfx.time = 58
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
id = 1001
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1005
;---------------------------------------------------------------------------
; 百式鬼き着地
[Statedef 1005]
type = S
movetype = I
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1005
ctrl = ifelse(var(15)=1,1,0)

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = s27,3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = PrevStateNo = 1001
value = 1006

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;427式・轹铁轻
[Statedef 1050]
type     = S
movetype = A
physics  = S
juggle   = IfElse(var(14)=3 && var(20)>0,0,4)
poweradd = 100
velset   = 0,0
anim     = 1050
ctrl     = 0
sprpriority = 3
facep2 = 1

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1


[State 1050, Width]
type = Width
trigger1 = 1
edge = 18,18

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1950,2

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1600,0
channel = 0

[State 1400, Posadd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
trigger5 = AnimElem = 6
trigger6 = AnimElem = 7
x = 9

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 8
attr = S, SA
damage    = 60,6
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 30,30
sparkno = s30002
guard.sparkno = s30040
sparkxy = -10, -80
hitsound = s25,7
guardsound = s26,2
ground.type = High
ground.slidetime = 18
ground.hittime   = 18
ground.velocity  = -1
air.velocity     = -4,-6
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 30
envshake.freq = 90
envshake.ampl = -3
envshake.phase = -2
palfx.time = 1
palfx.add = 0,0,0
id = 1050
envshake.time = 12
envshake.ampl = 6; or 7

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 15
attr = S, SA
damage    = 60,6
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 30,30
sparkno = s30002
guard.sparkno = s30040
sparkxy = -10, -85
hitsound = s25,7
guardsound = s26,2
ground.type = Low
ground.slidetime = 18
ground.hittime   = 18
ground.velocity  = -4,-6
air.velocity     = -4,-6
yaccel = .5
fall = 1
fall.recover = 0
envshake.time = 30
envshake.freq = 90
envshake.ampl = -3
envshake.phase = -2
palfx.time = 1
palfx.add = 0,0,0
id = 1050
envshake.time = 12
envshake.ampl = 6; or 7

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;427式・轹铁(启动)重
[Statedef 1051]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 100
velset   = 0,0
anim     = 1051
ctrl     = 0
sprpriority = 3
facep2 = 1

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 4555, Width]
type = width
trigger1 = 1
player = 20,0
edge = 40,0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1600,0
channel = 0
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = s1950,2

[State 1000, Velset]
type = Velset
trigger1 = AnimElem = 8
y = -4.8

[State 1000, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(8)>=0
y = 0.5

[State 1000, Velset]
type = Velset
trigger1 = AnimElem = 8
x = 5.5

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
statetype = A
physics  = N

[State 1000, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1052
;---------------------------------------------------------------------------
;427式・轹铁(攻击)重
[Statedef 1052]
type     = S
movetype = A
physics  = S
juggle   = IfElse(var(14)=3 && var(20)>0,0,4)
poweradd = 0
velset   = 0,0
anim     = 1052
ctrl     = 0
sprpriority = 3


[State 1052, Width]
type = Width
trigger1 = 1
edge = 15,0

[State 1052, Posset]
type = Posset
trigger1 = time = 0
y = 0

[State 1052, Velset]
type = Velset
trigger1 = AnimElemTime(18)<0
x = 2
[State 1052, Velset]
type = Velset
trigger1 = AnimElemTime(18)=0
x = 0

[State 1052, Posadd]
type = Posadd
trigger1 = AnimElem = 4
trigger1 = AnimElem = 19
x = 10

[State 1052, Posadd]
type = Posadd
trigger1 = AnimElem = 16
x = -10

[State 1052, Posadd]
type = Posadd
trigger1 = AnimElem = 5
trigger1 = AnimElem = 6 
trigger1 = AnimElem = 10 
trigger1 = AnimElem = 11
x = 3

[State 1052, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 21
value = s20,4

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 21
value = s1600,1
channel = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 22
id = var(7) := 1112
stateno = 6000
pos = 40*floor(Const(size.xscale)),-65*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 10
attr = S, SA
damage    = 60,6
animtype = Hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 10,10
sparkno = s30002
guard.sparkno = s30040
sparkxy = -10, -80
hitsound = s25,7
guardsound = s26,1
ground.type = High
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -1,-11.3
air.velocity = -1,-11.3
airguard.velocity = -3.5,-4
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
envshake.time = 4
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
id = 1051
envshake.time = 12
envshake.ampl = 6; or 7

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 22
attr = S, SA
damage    = 60,6
animtype = Hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 30,30
sparkno = s30002
guard.sparkno = s30040
sparkxy = -10, -85
hitsound = s25,7
guardsound = s26,2
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -2,-12
air.velocity = -2,-12
airguard.velocity = -3.5,-4
yaccel = .5
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
palfx.time = 120
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 20
envshake.ampl = -8
envshake.freq = 130
envshake.phase = 92
id = 1052

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
trigger1 = numtarget(1052)
trigger1 = target(1052),movetype=H
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1052)
trigger1 = movehit = 1
trigger1 = target(1052),statetype!=L
value =  5640
ID = 1052
ignorehitpause = 1

[State 0, AllPalFX]
type = AllPalFX
trigger1 = movehit = 1
trigger1 = numtarget(1052)
time = 3
add = 80,80,80
mul = 256,256,256
sinadd = -80,-80,-80,15
ignorehitpause = 1
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 百拾四式?荒咬み
[Statedef 1100]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,4)
poweradd = 100
velset = 0,0
anim = 1100
ctrl = 0
facep2 = 1

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(10) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "x"
trigger2 = var(59) > 0
trigger2 = MoveGuarded
Trigger2 = P2BodyDist X < 55
trigger3 = var(59) > 0
trigger3 = numtarget
trigger3 = target,statetype != A
trigger3 = target,statetype != L
Trigger3 = P2BodyDist X < 50
trigger4 = var(59) > 0
trigger4 = movehit
trigger4 = numtarget
trigger4 = var(56)=[0,80]
trigger4 = target,statetype = A
Trigger4 = P2BodyDist X < 50
v = 8
value = 1

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(10) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "八"
trigger2 = var(59) > 0
trigger2 = movehit
trigger2 = var(56)=[80,100]
trigger2 = numtarget
trigger2 = target,statetype = A
Trigger2 = P2BodyDist X < 50
Trigger2 = P2BodyDist y = [-70,-30]
v = 8
value = 2

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(10) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "a"||command="b"
v = 8
value = 3

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 45,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1100,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
trigger1 = numtarget
trigger1 = target,movetype=H
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
id = var(7) := 1102
stateno = 6000
pos = 96*floor(Const(size.xscale)),-68*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 8

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 10
attr = S,SA
animtype = Hard
priority = 5,Hit
damage = 40,4
guardflag = M
pausetime = 12-var(14),12-var(14)
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-69
hitsound = s25,8
guardsound = s26,1
ground.type = Low
ground.slidetime = 23
ground.hittime = 23
ground.velocity = -9
guard.velocity = -9
air.type = Low
air.velocity = -4.2,-6
yaccel = .38
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = -12
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -12
palfx.time = 35
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
id = 1100
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 13,>= 1
triggerall = var(8) = 1
trigger1 = var(59)<=0
trigger2 = var(59)>0
trigger2 = numtarget
trigger2 = target,statetype!=A && target,statetype!=L
trigger3 = var(59)>0
trigger3 = numtarget
trigger3 = var(56)=[0,40]
trigger3 = var(14)=3 && var(20)>0
trigger3 = target,statetype=A
trigger3 = AnimElem = 14,>= 1
trigger4 = var(59)>0
trigger4 = numtarget
trigger4 = p2bodydist y = [-30,9999]
trigger4 = var(14)=3 && var(20)>0
trigger4 = target,statetype=A
trigger4 = AnimElem = 14,>= 1
trigger5 = var(59)>0
trigger5 = numtarget
trigger5 = var(14)!=3||var(20)=0
trigger5 = target,statetype=A
trigger5 = AnimElem = 14,>= 1
value = 1110

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 14,>= 0
trigger1 = var(8) = 2
value = 1120

;[State 0, ChangeState]
;type = ChangeState
;triggerall = AnimElem = 12,>= 1
;trigger1 = var(8) = 3
;value = 1310

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1101
;---------------------------------------------------------------------------
; 荒咬みK了
[Statedef 1101]
type = S
movetype = I
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1101
ctrl = ifelse(var(15)=1,1,0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s1100,1
channel = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 百r拾八式?九
[Statedef 1110]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 30*floor(fvar(3))
velset = 0,0
anim = 1110
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0


[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(6) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "x" || Command = "y"
trigger2 = var(59) > 0
trigger2 = MoveGuarded
trigger2 = EnemyNear(floor(fvar(4))),statetype=C
trigger3 = var(59) > 0
trigger3 = movehit && var(14)=3 && var(20)>0
trigger3 = EnemyNear(floor(fvar(4))),statetype=A
trigger3 = EnemyNear(floor(fvar(4))),BackEdgeBodyDist>2 && EnemyNear(floor(fvar(4))),FrontEdgeBodyDist>2
v = 8
value = 1

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 45,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = s1110,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
id = var(7) := 1112
stateno = 6000
pos = 72*floor(Const(size.xscale)),-80*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
trigger5 = AnimElem = 6
trigger6 = AnimElem = 7
trigger7 = AnimElem = 8
x = 8

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S,SA
animtype = Hard
priority = 5,Hit
damage = 40,4
guardflag = M
pausetime = 12-var(14),12-var(14)
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,8
guardsound = s26,1
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3.5,-7
airguard.velocity = -4,-1
air.velocity = -4,-8
air.hittime = 12
guard.velocity = -10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -12
fall = 1
fall.recover = 0
yaccel = .5
palfx.time = 40
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
id = 1110
envshake.time = 12
envshake.ampl = 6; or 7


[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 8,>= 0
triggerall = var(8) = 1
trigger1 = var(59)<=0
trigger2 = var(59)>0
value = 1123

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1111
;---------------------------------------------------------------------------
; 九K了
[Statedef 1111]
type = S
movetype = I
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1111
ctrl = ifelse(var(15)=1,1,0)

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
trigger4 = AnimElem = 6
x = 8

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 百r拾七式?八
[Statedef 1120]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 30*floor(fvar(3))
velset = 0,0
anim = 1120
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, VarSet]
type = VarSet
triggerall = var(59) <= 0
trigger1 = Command = "x" || Command = "y"
trigger1 = AnimElemTime(7) >= 0
v = 8
value = 1

[State 0, VarSet]
type = VarSet
triggerall = var(59) <= 0
trigger1 = Command = "a"
trigger1 = AnimElemTime(7) >= 0
v = 8
value = 2

[State 0, VarSet]
type = VarSet
triggerall = var(59) <= 0
trigger1 = Command = "八拾八式"
trigger1 = AnimElemTime(7) >= 0
v = 8
value = 3

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(7) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "63214A"
trigger2 = var(59) > 0
trigger2 = movehit
v = 8
value = 4

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 45,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = s1120,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 10
id = var(7) := 1122
stateno = 6000
pos = 72*floor(Const(size.xscale)),-64*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
trigger5 = AnimElem = 6
trigger6 = AnimElem = 7
trigger7 = AnimElem = 8
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 9
x = 2

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 10
attr = S,SA
animtype = up
priority = 5,Hit
damage = 40,4
guardflag = H
pausetime = 7,12
guard.pausetime = 7,7
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,8
guardsound = s26,1
ground.type = Low
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -4,15
air.velocity = -2,15
guard.hittime = 17
guard.velocity = -10
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = .6
palfx.time = 29
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
id=1120

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1120)
trigger1 = movehit = 1
trigger1 = target(1120),statetype!=L
trigger1 = target(1120),stateno = [5000,5999]
value = 1124
ID = 1120
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = var(8) = 1
trigger1 = AnimElem = 11,>= 0
value = 1130

[State 0, ChangeState]
type = ChangeState
trigger1 = var(8) = 2
trigger1 = AnimElem = 11,>= 0
value = 1140

[State 0, ChangeState]
type = ChangeState
trigger1 = var(8) = 3
trigger1 = AnimElem = 11,>= 0
value = 450

[State 0, ChangeState]
type = ChangeState
trigger1 = var(8) = 4
trigger1 = AnimElem = 11,>= 0
value = 1606

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1121
;---------------------------------------------------------------------------
; 八K了
[Statedef 1121]
type = S
movetype = I
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1121
ctrl = ifelse(var(15)=1,1,0)

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 百r拾七式?八(フィニッシュ版)
[Statedef 1123]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 30*floor(fvar(3))
velset = 0,0
anim = 1123
ctrl = 0

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 45,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 7
id = var(7) := 1122
stateno = 6000
pos = 72*floor(Const(size.xscale)),-64*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 6
x = 2

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S,SA
animtype = up
priority = 5,Hit
damage = 40,4
guardflag = H
pausetime = 7,12
guard.pausetime = 7,7
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,8
guardsound = s26,1
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4,15
yaccel = .35
air.type = High
air.velocity = -4,15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -12
fall = 1
fall.recover = 0
palfx.time = 29
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
id=1123

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1123)
trigger1 = movehit = 1
trigger1 = var(15)=1
trigger1 = target(1123),statetype!=L
trigger1 = target(1123),stateno = [5000,5999]
value = 1124
ID = 1123
ignorehitpause = 1
persistent = 0

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1123)
trigger1 = movehit = 1
trigger1 = var(15)!=1
trigger1 = target(1123),statetype!=L
trigger1 = target(1123),stateno = [5000,5999]
value = ifelse(p2statetype = A,5635,5633)
ID = 1123
ignorehitpause = 1
persistent = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(7) >= 0
triggerall = var(15)=1
trigger1 = var(59) <= 0
trigger1 = Command = "x"
trigger2 = var(59) > 0
trigger2 = movehit
v = 8
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimElem = 8,>= 1
trigger1 = var(8)=1
value = 1130

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 八击中
[Statedef 1124]
type     = A
movetype = H
physics  = N
VelSet = 0,0
ctrl = 0
anim = 5030

[State HitVelSet]
type = HitVelSet
trigger1 = HitShakeOver
x = 1
y = 1
Persistent = 0

[State VelAdd]
type = VelAdd
Trigger1 = HitShakeOver
y = 0.54

[State ChangeAnim]
type = ChangeAnim
Trigger1 = HitShakeOver
trigger1 = Anim != 5050
trigger1 = Vel Y > -1
value = 5050

[State SelfState]
type = SelfState
trigger1 = !Alive
trigger1 = ((Pos Y >= 0) && (Vel Y > 0))
value = 5100

[State ChangeState]
type = ChangeState
trigger1 = ((Pos Y >= 0) && (Vel Y > 0))
value = 1125
;---------------------------------------------------------------------------
; 八击中倒地 
[Statedef 1125]
type     = L
movetype = H
physics  = N
ctrl = 0
anim = 5080

[State 1163, 1]
type = NotHitBy
trigger1 = Time >= 28
value = SCA

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State VelSet]
type = VelSet
Trigger1 = Time = 0
y = 0

[State PosSet]
type = PosSet
Trigger1 = Time = 0
y = 0

[State VelMul]
type = VelMul
Trigger1 = 1
x = 0.90

[State ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 5110
trigger1 = Time >= 5
value = 5110

[State SelfState]
type = SelfState
trigger1 = !Alive
value = 5110

[State SelfState]
type = SelfState
trigger1 = time = 65
value = 5120
;---------------------------------------------------------------------------
; 外式砌穿ち
[Statedef 1130]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 20*floor(fvar(3))
velset = 0,0
anim = 1130
ctrl = 0

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 45,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s27,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
id = var(7) := 1122
stateno = 6000
pos = 88*floor(Const(size.xscale)),-24*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S,SA
animtype = up
priority = 5,Hit
damage = 40,4
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-17
hitsound = s25,8
guardsound = s26,1
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = 0,12
down.velocity = 0,0
air.type = Low
air.velocity = -2,12
guard.hittime = 17
guard.velocity = -10
air.cornerpush.veloff = 0
down.velocity = 0,0
yaccel = .6
fall = 1
fall.recover = 0
palfx.time = 35
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 12
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92
id=1130

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 12
ctrl = 1
;---------------------------------------------------------------------------
;百r拾五式七1
[Statedef 1140]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,8)
poweradd = 30*floor(fvar(3))
velset = 0,0
anim = 1140
ctrl = 0

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 45,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = s20,3

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
x = 10

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S,SA
animtype = DiagUp
priority = 6,Hit
damage = 40,4
guardflag = M
pausetime = 12,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-84
hitsound = s25,7
guardsound = s26,1
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -7,-10.5
air.velocity = -7,-10.5
guard.velocity = -10
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = .6
palfx.time = 1
palfx.add = 0,0,0
envshake.time = 4
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92
id = 1140

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 百拾五式?毒咬み
[Statedef 1200]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,4)
poweradd = 100
velset = 0,0
anim = 1200
ctrl = 0
facep2 = 1

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, 四百沂?罪み]
type = VarSet
triggerall = AnimElemTime(8) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "y"
trigger2 = numtarget
trigger2 = var(59) > 0
trigger2 = power<1000||target,statetype=A||target,BackEdgeBodyDist>2 && target,FrontEdgeBodyDist>2
trigger2 = movehit
trigger2 = roundstate = 2
trigger3 = numtarget
trigger3 = var(59) > 0
trigger3 = var(20)>0 && var(14)=3
trigger3 = movehit
trigger3 = roundstate = 2
trigger3 = target,statetype!=A && target,statetype!=L
trigger4 = numtarget
trigger4 = var(59) = [1,3]
trigger4 = moveguarded
trigger4 = roundstate = 2
trigger4 = P2BodyDist X < 40
trigger4 = target,statetype!=A && target,statetype!=L
trigger5 = numtarget
trigger5 = var(59) > 0
trigger5 = power>=1000||var(20)>0
trigger5 = var(56)=[40,100]
trigger5 = movehit
trigger5 = roundstate = 2
v = 8
value = 1

[State 0, 百r拾参式?灼焉(追)]
type = VarSet
triggerall = AnimElemTime(8) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "x"
trigger2 = numtarget
trigger2 = var(20)=0||var(12)=1 && var(20)>0||var(13)=2 && var(20)>0
trigger2 = var(14)!=3
trigger2 = var(59) > 0
trigger2 = roundstate = 2
trigger2 = power>=1000||var(20)>0
trigger2 = var(56)=[0,40]
trigger2 = target,BackEdgeBodyDist<=2||target,FrontEdgeBodyDist<=2
trigger2 = movehit
trigger2 = target,statetype!=A && target,statetype!=L
trigger3 = var(59) > 3
trigger3 = MoveGuarded
v = 8
value = 2

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 50,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = s1200,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
trigger1 = numtarget
trigger1 = target,movetype=H
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 10
id = var(7) := 1102
stateno = 6000
pos = 96*floor(Const(size.xscale)),-76*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
trigger5 = AnimElem = 6
trigger6 = AnimElem = 7
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8
x = 16

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 9
x = 16

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 10
attr = S,SA
animtype = Hard
priority = 5,Hit
damage = 40,4
guardflag = M
pausetime = 12-var(14),12-var(14)
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-60
hitsound = s25,8
guardsound = s26,1
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -10
air.cornerpush.veloff = 0
air.type = Low
air.velocity = -4,-4
yaccel = .6
air.fall = 1
fall.recover = 0
palfx.time = 35
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 11,>= 1
triggerall = var(8) = 1
trigger1 = var(59)<0
trigger2 = var(59)>0
trigger2 = EnemyNear(floor(fvar(4))),statetype!=A
trigger3 = var(59)>0
trigger3 = EnemyNear(floor(fvar(4))),statetype=A;空中特殊 
trigger3 = AnimElem = 11,>= 2
value = 1210

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 11,>= 1
triggerall = var(8) = 2
trigger1 = var(59)<0
trigger2 = var(59)>0
value = 1240

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1201
;---------------------------------------------------------------------------
; 毒咬みK了
[Statedef 1201]
type = S
movetype = I
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1201
ctrl = ifelse(var(15)=1,1,0)

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
trigger5 = AnimElem = 6
x = 8

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 四百沂?罪み
[Statedef 1210]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 10*floor(fvar(3))
velset = 0,0
anim = 1210
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(3) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "Pみ"
trigger2 = var(59) > 0
trigger2 = movehit
trigger2 = roundstate = 2
v = 8
value = 1

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(3) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "x"
v = 8
value = 2

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(3) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "y"
v = 8
value = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
id = var(7) := 1112
stateno = 6000
pos = 84*floor(Const(size.xscale)),-72*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 50,0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
x = 8

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S,SA
animtype = Hard
priority = 5,Hit
damage = 40,4
guardflag = M
pausetime = 12-var(14),12-var(14)
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,8
guardsound = s26,1
ground.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -7
air.cornerpush.veloff = 0
air.type = Low
air.velocity = -3,-5
yaccel = .35
air.fall = 1
fall.recover = 0
palfx.time = 35
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 6,>= 0
triggerall = var(8) = 1
trigger1 = var(59) <= 0
trigger2 = var(59) > 0
trigger2 = movehit
trigger3 = var(59) > 0
value = 1220

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 5,> 0
triggerall = var(8) = 2
trigger1 = var(59) <= 0
value = 1450

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 5,> 0
triggerall = var(8) = 3
trigger1 = var(59) <= 0
value = 1455

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1211
;---------------------------------------------------------------------------
; 罪みK了
[Statedef 1211]
type = S
movetype = I
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1211
ctrl = ifelse(var(15)=1,1,0)

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
x = 24

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 7
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 8
x = 4

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 四百沂?Pみ
[Statedef 1220]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 10*floor(fvar(3))
velset = 0,0
anim = 1220
ctrl = 0

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 50,0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 8

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1221
;---------------------------------------------------------------------------
; Pみジャンプ
[Statedef 1221]
type = A
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 0
velset = 4,-6
anim = 1221
ctrl = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 4
y = -6

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.4

[State 0, VelAdd]
type = VelAdd
trigger1 = Vel X >= 0
trigger1 = AnimElem = 3,<= 0
x = -0.25

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) = 7
x = 0

[State 0, 走不进墙角]
type = Width
trigger1 = 1
player = 10,0
edge = 50,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S,SA
animtype = Hard
damage = 40,4
guardflag = M
pausetime = 12-var(14),12-var(14)
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-77
hitsound = s25,8
guardsound = s26,1
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -2,-9
air.velocity = -2,-9
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = .43
palfx.time = 60
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(1) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "x"||Command = "y"
trigger2 = var(59) > 0
trigger2 = movehit
trigger2 = roundstate = 2
v = 8
value = 1

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 3,>= 0 && Vel Y <= 0
triggerall = var(8) = 1
trigger1 = var(59)<=0
trigger1 = MoveContact
trigger2 = var(59)>0
trigger2 = movehit
value = 1230

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1222
;---------------------------------------------------------------------------
; PみK了
[Statedef 1222]
type = S
movetype = I
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1222
ctrl = ifelse(var(15)=1,1,0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = s27,3

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
x = 4

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 百式?鬼き(追)
[Statedef 1230]
type = A
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,8)
poweradd = 10*floor(fvar(3))
anim = 1230
ctrl = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = time = 0
y = -3
x = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = 36

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.4

[State 0, VelAdd]
type = VelAdd
trigger1 = Vel X >= 0
trigger1 = AnimElem = 3,<= 0
x = -0.15

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 0
x = 0

[State 0, 走不进墙角]
type = Width
trigger1 = 1
player = 10,0
edge = 45,0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 2
id = var(7) := 1010
stateno = 6000
pos = 0,0
postype = p1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElemTime(7) = 1
id = var(7) := 1011
stateno = 6000
pos = 0,0
postype = p1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1000,1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S,SA
animtype = up
damage = 40,4
guardflag = M
pausetime = 12-var(14),12-var(14)
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-77
hitsound = s25,8
guardsound = s26,1
ground.type = High
ground.slidetime = 30
ground.hittime = 17
ground.velocity = -2,-10
air.velocity = -2,-10
guard.hittime = 17
guard.velocity = -10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = .6
palfx.time = 58
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
id = 1230
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1235
;---------------------------------------------------------------------------
;鬼き(追)落地 
[Statedef 1235]
type = S
movetype = I
physics = N
velset = 0,0
juggle = 0
anim = 1235
ctrl = ifelse(var(15)=1,1,0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = s27,3

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 百拾四式?荒咬み(毒咬み派生)
[Statedef 1240]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 0
velset = 0,0
anim = 1100
ctrl = 0


[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(10) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "九"
trigger2 = var(59) > 0
trigger2 = movehit
trigger3 = var(59) > 0
trigger3 = MoveGuarded
v = 8
value = 1

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(10) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "八"
v = 8
value = 2

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(10) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "弱]"
v = 8
value = 3

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 45,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s1100,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9
id = var(7) := 1102
stateno = 6000
pos = 96*floor(Const(size.xscale)),-68*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 16

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
x = 8

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 10
attr = S,SA
animtype = Hard
priority = 5,Hit
damage = 50,5
getpower = floor(50*fvar(3)),floor(50*fvar(3))
;givepower = 20,0
guardflag = M
pausetime = 11,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-69
hitsound = s25,8
guardsound = s26,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -9,0
air.velocity = -3,-3.5
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
palfx.time = 29
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
trigger1 = var(8) = 1
trigger1 = AnimElem = 13,>= 1
value = 1250

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 14,>= 0
trigger1 = var(8) = 2
value = 1120

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 12,>= 1
trigger1 = var(8) = 3
value = 1310

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1101
;---------------------------------------------------------------------------
; 百r拾八式?九
[Statedef 1250]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1110
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(6) >= 0
trigger1 = var(59) <= 0
trigger1 = Command = "弱]"
v = 8
value = 4

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(6) >= 0
trigger1 = var(59) <= 0
trigger1 = Command ="x"||Command="y"
trigger2 = var(59) > 0
trigger2 = MoveGuarded
v = 8
value = 3

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(6) >= 0
trigger1 = var(59) <= 0
trigger1 = Command != "弱]"
trigger1 = Command = "b"
v = 8
value = 2

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(6) >= 0
trigger1 = var(59) <= 0
trigger1 = Command != "弱]"
trigger1 = Command = "a"
trigger2 = var(59) > 0
trigger2 = movehit
v = 8
value = 1

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 45,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = s1110,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
id = var(7) := 1112
stateno = 6000
pos = 72*floor(Const(size.xscale)),-80*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
trigger5 = AnimElem = 6
trigger6 = AnimElem = 7
trigger7 = AnimElem = 8
x = 8

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S,SA
animtype = Hard
priority = 5,Hit
damage = 50,5
getpower = floor(50*fvar(3)),floor(50*fvar(3))
;givepower = 20,0
guardflag = M
pausetime = 11,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,8
guardsound = s26,1
ground.type = High
ground.slidetime = 17
ground.hittime = 20
ground.velocity = -2,-6.5
air.velocity = -1.5,-9.5
yaccel = 0.45
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
palfx.time = 29
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 8,>= 0
trigger1 = var(8) = 4
value = 1300

[State 0, ChangeState]
type = ChangeState
triggerall = AnimElem = 8,>= 0
trigger1 = var(8) = 3
value = 1123

[State 0, ChangeState]
type = ChangeState
trigger1 = var(8) = 2
trigger1 = AnimElem = 8,>= 0
value = 1150

[State 0, ChangeState]
type = ChangeState
trigger1 = var(8) = 1
trigger1 = AnimElem = 8,>= 0
value = 1260

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1111
;---------------------------------------------------------------------------
; 百r拾五式七（毒咬み派生）
[Statedef 1260]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1260
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0


[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = s20,3

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
x = 10

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S,SA
animtype = DiagUp
priority = 6,Hit
damage = 50,5
getpower = floor(50*fvar(3)),floor(50*fvar(3))
;givepower = 20,0
guardflag = M
pausetime = 11,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-84
hitsound = s25,3
guardsound = s26,1
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -7,-7
air.velocity = -7,-7
yaccel = 0.45
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1260
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
trigger1 = var(8) = 1
trigger1 = AnimTime = 0
trigger1 = power >= 1000||var(20)>0
value = 1700

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1261
;---------------------------------------------------------------------------
; 百r拾五式七K了（毒咬み派生）
[Statedef 1261]
type = S
movetype = I
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1261
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 弱四百r拾七式]
[Statedef 1300]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 100
velset = 0,0
anim = 1300
ctrl = 0

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
trigger1 = prevstateno != 1110
var(20) = -300
ignorehitpause = 1

[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 35,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(9)<0
value = SCA

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1300,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = s27,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 10
id = var(7) := 1112
stateno = 6000
pos = 41*floor(Const(size.xscale)),-85*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
value = A

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 2
x = 4
y = -3

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 3
trigger2 = time = 4
x = 4
y = -2

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 5
trigger2 = time = 6
x = 4
y = -1

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 7
trigger2 = time = 8
x = 4
y = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 9
x = 4
y = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 10
trigger2 = time = 11
trigger3 = time = 12
x = 4
y = 2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
value = S

[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 5
y = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 5
x = 12

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
trigger4 = AnimElem = 9
trigger5 = AnimElem = 10
trigger6 = AnimElem = 11
trigger7 = AnimElem = 12
trigger8 = AnimElem = 13
x = 8

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 10
attr = S,SA
animtype = Hard
priority = 5,Hit
damage = 120,12
guardflag = M
pausetime = 13,13
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-80
hitsound = s25,7
guardsound = s26,1
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
air.cornerpush.veloff = 0
ground.velocity  = -2.5,-9.5
guard.velocity = -8
air.type = Hard
air.velocity = -2.5,-9.5
yaccel = ifelse(PrevStateNo=1110,0.6,0.45)
fall = 1
fall.recover = 0
palfx.time = 60
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 12
envshake.freq = 90
envshake.ampl = -3
envshake.phase = -2
id = 1300 

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 四百r拾七式]
[Statedef 1310]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 40*floor(fvar(3))
velset = 0,0
anim = 1310
ctrl = 0

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
trigger1 = prevstateno != 1100
var(20) = -300
ignorehitpause = 1
;-------------------------------------------------------
[State 0, HitBy]
type = HitBy
trigger1 = numhelper(77777)
trigger1 = var(20)>0 && var(12)=1
trigger1 = var(11)!=1
value = SCA,AT,HP,HA
time = 1
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = numhelper(77777)
trigger1 = var(20)>0 && var(12)=1
trigger1 = var(11)=1
value = SCA,AT
time = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = numhelper(77777)=0
trigger1 = var(20)>0 && var(12)=1
trigger1 = time = 0
helpertype = normal
ID = 77777
stateno = 77777
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
persistent = 0
;--------------------------------------------------------
[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 35,0

[State 0, PosAdd]
type = PosAdd
trigger1 = PrevStateNo = 1100
trigger1 = time = 0
x = 12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1310,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s20,4;1310,1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 6
id = var(7) := 1112
stateno = 6000
pos = 52*floor(Const(size.xscale)),-75*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S,SA
animtype = Hard
priority = 7,Hit
damage = 160,16
getpower = floor(160*fvar(3)),floor(160*fvar(3))
;givepower = 64,0
guardflag = M
pausetime = 30,30
sparkno = s30002
guard.sparkno = s30040
sparkxy = -10,-82
hitsound = s25,7
guardsound = s26,1
ground.type = High
ground.slidetime = 18
ground.hittime   = 18
ground.velocity  = -3.5,-7;-10
guard.velocity = -10
air.type = High
air.velocity = -3.5,-7
air.hittime = 12
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = .5
palfx.time = 65
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 30
envshake.freq = 90
envshake.ampl = -3
envshake.phase = -2

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 8
trigger1 = MoveContact = 0
attr = S,SA
animtype = Hard
priority = 7,Hit
damage = 160,16
getpower = floor(160*fvar(3)),floor(160*fvar(3))
;givepower = 64,0
hitflag = AF
guardflag = M
pausetime = 30,30
sparkno = s30002
guard.sparkno = s30040
sparkxy = -10,-82
hitsound = s24,2
guardsound = s26,1
ground.type = High
ground.slidetime = 18
ground.hittime   = 18
ground.velocity  = -3.5,-7;-10
guard.velocity = -10
air.type = High
air.velocity = -3.5,-7
air.hittime = 12
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = .5
palfx.time = 65
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 30
envshake.freq = 90
envshake.ampl = -3
envshake.phase = -2

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;鹤摘1
[Statedef 1350]
type     = S
movetype = A
physics  = S
juggle   = 8
poweradd = 100
velset   = 0,0
anim     = 1350
ctrl     = 0
sprpriority = 2
facep2 = 1


[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s250,0
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s20,1

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 2 | AnimElem = 3
x = 10

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 9
x = -20


[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
damage    = 120,12
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 11,11
sparkno = s30002
guard.sparkno = s30040
sparkxy = -20, -70
hitsound = s25,2
guardsound = s26,1
ground.type = High
ground.slidetime = 21
ground.hittime  = 22
ground.velocity = -2,-9.5
guard.velocity = -8
air.type = High
air.velocity = -2,-9.5
yaccel = .5
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1350
nochainID = 1350
envshake.time = 12
envshake.ampl = 6; or 7

[State 1000, MoveType]
type = StateTypeSet
trigger1 = AnimElem = 7
MoveType = I

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;鹤摘2
[Statedef 1360]
type     = S
movetype = A
physics  = S
juggle   = 8
poweradd = 100
velset   = 0,0
anim     = 1360
ctrl     = 0
sprpriority = 2
facep2 = 1


[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s250,0
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s20,1

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 2 | AnimElem = 3
x = 10

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 9
x = -20


[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
damage    = 120,12
animtype = Hard
hitflag = MAF
guardflag = MA
priority = 4, Hit
pausetime = 11,11
sparkno = s30002
guard.sparkno = s30040
sparkxy = -20, -70
hitsound = s25,2
guardsound = s26,1
ground.type = High
ground.slidetime = 21
ground.hittime  = 22
ground.velocity = -2,-9.5
guard.velocity = -8
air.type = High
air.velocity = -2,-9.5
yaccel = .5
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1350
nochainID = 1350
envshake.time = 12
envshake.ampl = 6; or 7

[State 1000, MoveType]
type = StateTypeSet
trigger1 = AnimElem = 7
MoveType = I

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;虎伏 
[Statedef 1370]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 30*floor(fvar(3))
velset   = 0,0
anim     = 1370
ctrl     = 0
sprpriority = 5

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s1110,0
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = s20,4

[State 210, Width]
type = Width
trigger1 = AnimElemTime (1) >= 0 && AnimElemTime (5) <= 0
edge = 30,0

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 1 | AnimElem = 2 | AnimElem = 3 | AnimElem = 4 | AnimElem = 5
x = 10

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 8 | AnimElem = 10
x = -10

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
id = var(7) := 1122
stateno = 6000
pos = 60*floor(Const(size.xscale)),-30*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 220, 2]
type = HitDef
trigger1 = Animelem = 5
attr = S, SA
damage    = 100,10
getpower  = floor(100*fvar(3)),floor(100*fvar(3))
;givepower = 40,40
animtype = medium
hitflag = MAF
guardflag = M
sparkno = s30002
guard.sparkno = s30040
sparkxy = -25, -40
hitsound = s25,7
guardsound = s26,1
pausetime = 13,13
ground.hittime = 17
ground.type = low
ground.slidetime = 17
ground.velocity = -5,0
air.velocity = -5,0
;fall = 1
yaccel = .5
palfx.time = 35
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
p2facing = 1
envshake.time = 30
envshake.ampl = 4
envshake.freq = 70
id = 1370

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1370)
trigger1 = movehit = 1
trigger1 = target(1370),statetype!=L
trigger1 = target(1370),stateno = [5000,5999]
value = 1375
ID = 1370
persistent = 0

[State 1000, MoveType]
type = StateTypeSet
trigger1 = AnimElem = 6
MoveType = I

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------------------------------------------------
;虎伏击中 
[Statedef 1375]
type = A
movetype = H
physics = N
velset = 0,0

[State 865, 3]
type = ChangeAnim2
trigger1 = Time = 0
value = 1375

[State 865, 5]
type = SelfState
trigger1 = time = 6
value = 5100
;---------------------------------------------------------------------------
;龙射 
[Statedef 1380]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 30*floor(fvar(3))
velset   = 0,0
anim     = 1380
ctrl     = 0
sprpriority = 5

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s1120,0
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s20,4

[State 210, Width]
type = Width
trigger1 = AnimElemTime (1) >= 0 && AnimElemTime (4) <= 0
edge = 30,0

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 1 | AnimElem = 2 | AnimElem = 3 | AnimElem = 4
x = 10

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
id = var(7) := 1122
stateno = 6000
pos = 60*floor(Const(size.xscale)),-80*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
damage    = 70,7
getpower  = floor(100*fvar(3)),floor(100*fvar(3))
;givepower = 28,28
animtype = Hard
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -25, -70
hitsound = s25,8
guardsound = s26,1
ground.type = Low
ground.slidetime = 18
ground.hittime   = 18
ground.velocity  = -4.2,-6
guard.velocity = -8
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.2,-6
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
palfx.time = 29
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
p2facing = 1
envshake.time = 20
envshake.ampl = 4
envshake.freq = 70
id = 1380

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1380)
trigger1 = movehit = 1
trigger1 = target(1380),statetype!=L
trigger1 = target(1380),stateno = [5000,5999]
value = ifelse(p2statetype = A,5635,5633)
ID = 1380
ignorehitpause = 1
persistent = 0

[State 1000, MoveType]
type = StateTypeSet
trigger1 = AnimElem = 5
MoveType = I

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 七挝迨剑ㄇ幔 
[Statedef 1400]
type = S
movetype = A
physics = S
juggle = 0
poweradd = 100
velset = 0,0
anim = 1400
sprpriority = 2
ctrl = 0

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 0, Width]
type = Width
trigger1 = 1
edge = 20,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = s200,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = s20,3

[State 0, Width]
type = Width
trigger1 = AnimElemTime (1) >= 0 && AnimElemTime (5) <= 0
edge = 30,0

[State 0, Posadd]
type = Posadd
trigger1 = AnimElem = 1 | AnimElem = 2
x = 5

[State 0, Posadd]
type = Posadd
trigger1 = AnimElem = 4
x = 10

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) >= 0
x = 2.5

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 5
y = -4.2

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(5) > 0
y = .35

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
Statetype = A

[State 0, HitDef]
type = HitDef
trigger1 = var(6) = 0
trigger1 = AnimElem = 5
attr = A,SA
animtype = Hard
damage = 60,6
guardflag = M
pausetime = 8,8
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-70
hitsound = s25,3
guardsound = s26,1
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -7,0
air.velocity = -2.5,-5
air.type = High
yaccel = .45
guard.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1400
nochainID = 1403
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, HitDef]
type = HitDef
trigger1 = var(6) = 1
trigger1 = AnimElem = 5
attr = A,SA
animtype = Hard
damage = 60,6
guardflag = M
pausetime = 8,8
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-70
hitsound = s25,3
guardsound = s26,1
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -7,0
air.velocity = -2.5,-5
air.type = High
yaccel = .45
guard.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 0
air.fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1400
nochainID = 1403
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
var(8) = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(5) >= 0 && AnimElemTime(8) < 0
trigger1 = Command = "a"
trigger1 = var(59) <= 0
trigger2 = var(59) > 0
var(8) = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = var(8) = 1
trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
value = 1401

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1405
;---------------------------------------------------------------------------
; 七挝迨剑ㄇ幔 
[Statedef 1401]
type = A
movetype = A
physics = N
juggle = 0
poweradd = 30*floor(fvar(3))
anim = 1401
sprpriority = 1
ctrl = 0

[State 0, Width]
type = Width
trigger1 = 1
edge = 20,0

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .35

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s200,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s20,3

[State 0, HitDef]
type = HitDef
trigger1 = var(6) = 0
trigger1 = AnimElem = 2
attr = A,SA
animtype = Hard
damage = 60,6
guardflag = M
pausetime = 12,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-70
hitsound = s25,3
guardsound = s26,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -2.3,-7
guard.velocity = -9
air.velocity = -2.3,-7
yaccel = 0.54
guard.hittime = 14
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1403
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, HitDef]
type = HitDef
trigger1 = var(6) = 1
trigger1 = AnimElem = 2
attr = A,SA
animtype = Hard
damage = 60,6
guardflag = M
pausetime = 12,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-70
hitsound = s25,3
guardsound = s26,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
ground.velocity = -2.3,-7
guard.velocity = -9
air.velocity = -2.3,-7
yaccel = 0.45
guard.hittime = 14
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1403
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, TargetState]
type = TargetState
trigger1 = var(6)=0
trigger1 = numtarget(1403)
trigger1 = movehit = 1
value = 6020
ID = 1403
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1405
;---------------------------------------------------------------------------
; 七挝迨剑ㄖ兀 
[Statedef 1402]
type = S
movetype = A
physics = S
juggle = 0
poweradd = 100
velset = 0,0
anim = 1402
sprpriority = 2
ctrl = 0

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 0, Width]
type = Width
trigger1 = 1
edge = 20,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = s200,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = s20,3

[State 0, Width]
type = Width
trigger1 = AnimElemTime (1) >= 0 && AnimElemTime (5) <= 0
edge = 30,0

[State 0, Posadd]
type = Posadd
trigger1 = AnimElem = 1 | AnimElem = 2
x = 5

[State 0, Posadd]
type = Posadd
trigger1 = AnimElem = 4
x = 10

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) >= 3
x = 3

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 5
y = -4.2

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(5) > 0
y = .35

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
Statetype = A

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = A,SA
animtype = Hard
damage = 60,6
guardflag = M
pausetime = 12,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-70
hitsound = s25,3
guardsound = s26,1
ground.type = High
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -4,-6
air.velocity = -4,-6
yaccel = .45
guard.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1402
nochainid = 1403
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
var(8) = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(5) >= 0 && AnimElemTime(8) < 0
trigger1 = Command = "b"
trigger1 = var(59) <= 0
trigger2 = var(59) > 0
var(8) = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = var(8) = 1
trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
value = 1403

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1405
;---------------------------------------------------------------------------
; 七挝迨剑ㄖ兀 
[Statedef 1403]
type = A
movetype = A
physics = N
juggle = 0
poweradd = 30*floor(fvar(3))
anim = 1403
sprpriority = 1
ctrl = 0

[State 0, Width]
type = Width
trigger1 = 1
edge = 20,0

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .35

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s200,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s20,3

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A,SA
animtype = Hard
damage = 60,6
guardflag = M
pausetime = 12,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-70
hitsound = s25,3
guardsound = s26,1
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -2.2,-11.5
guard.velocity = -10
air.velocity = -2.2,-11.5
yaccel = .54
guard.hittime = 16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1403
nochainid = 1403
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1405
;---------------------------------------------------------------------------
; 七挝迨?着地
[Statedef 1405]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1405
ctrl = ifelse(var(15)=1,1,0)

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = s27,3

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;葵花之一(轻) 
[Statedef 1450]
type = S
movetype = A
physics = S
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 100
velset = 0,0
anim = 1450
sprpriority = 1
ctrl = 0

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

;------------------------------------------------------------------
[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(4)<0
x = 4.5
[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(5)=0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 4
value = S20,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s450,0
channel = 0

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S,NA
guardflag = M
animtype = Hard
priority = 3,Hit
damage = 40,4
pausetime = 12,13
sparkno = s30002
guard.sparkno = s30040
sparkxy = -20,-75
hitsound = s25,8
guardsound = s26,1
ground.type = High
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -11.3
guard.velocity = -11.3
air.velocity = -3,-4
air.cornerpush.veloff = 0
yaccel = .5
palfx.time = 1
palfx.add = 0,0,0
id=1450
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(3) >= 0 && AnimElemTime(7) < 0
trigger1 = var(59) <= 0
trigger1 = Command = "x"||Command = "y"
trigger2 = var(59) > 0
trigger2 = numtarget
trigger2 = target,statetype!=A
trigger2 = target,statetype!=L
trigger3 = var(59) > 0
trigger3 = numtarget
trigger3 = target,statetype=A
trigger3 = AnimElemTime(5) >= 5
v = 8
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animelemtime(4)>0
trigger1 = var(8)=1
value = 1451
ctrl = 0
;---------------------------------------------------------------------------
;葵花之二(轻) 
[Statedef 1451]
type = S
movetype = A
physics = S
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 0
velset = 0,0
anim = 1451
sprpriority = 1
ctrl = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3)<0
x = 5.5
[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(4)=0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 3
value = S20,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s450,0
channel = 0

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,SA
animtype = Hard
priority = 3,Hit
damage = 40,4
guardflag = M
pausetime = 12-var(14),12-var(14)
sparkno = s30002
guard.sparkno = s30040
sparkxy = -20,-75
hitsound = s25,8
guardsound = s26,1
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3.5,-7
airguard.velocity = -4,-1
air.velocity = -4,-8
air.hittime = 12
guard.velocity = -10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -12
fall = 1
fall.recover = 0
yaccel = .5
palfx.time = 1
palfx.add = 0,0,0
id = 1451
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(3) >= 0 && AnimElemTime(5) < 0
trigger1 = var(59) <= 0
trigger1 = Command = "x"||Command = "y"
trigger2 = var(59) > 0
trigger2 = numtarget
trigger2 = target,statetype!=A
trigger2 = target,statetype!=L
trigger3 = var(59) > 0
trigger3 = numtarget
trigger3 = target,statetype=A
trigger3 = AnimElemTime(4) >= 5
v = 8
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animelemtime(3)>0
trigger1 = var(8)=1
value = 1452
ctrl = 0
;---------------------------------------------------------------------------
;葵花之三(轻) 
[Statedef 1452]
type = A
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 0
velset = 0,0
anim = 1452
sprpriority = 1
ctrl = 0

[State 1000, Velset]
type = Velset
trigger1 = time = 0
x = 0

[State 1000, Velset]
type = Velset
trigger1 = time > 1
x = 5

[State 1000, Velset]
type = Velset
trigger1 = AnimElem = 1
y = -5

[State 1000, VelAdd]
type = VelAdd
trigger1 = time > 0
y = .5

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 4
value = S20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s210,2
channel = 0

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A,SA
animtype = up
damage = 40,4
guardflag = H
pausetime = 6,6
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,7
guardsound = s26,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3.5,15.5
air.velocity = -3.5,15.5
air.cornerpush.veloff = 0
air.type = High
fall = 1
fall.recover = 0
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 4
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92
palfx.time = 1
palfx.add = 0,0,0
id = 1452
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1452)
trigger1 = movehit = 1
trigger1 = target(1452),statetype!=L
value =  ifelse(p2statetype = A,5635,5633)
ID = 1452
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1460
;---------------------------------------------------------------------------
;葵花之一(重) 
[Statedef 1455]
type = S
movetype = A
physics = S
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 100
velset = 0,0
anim = 1450
sprpriority = 1
ctrl = 0

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(4)<0
x = 6
[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(5)=0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 4
value = S20,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s450,0
channel = 0

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S,NA
guardflag = M
animtype = Hard
priority = 3,Hit
damage = 40,4
pausetime = 12,13
sparkno = s30002
guard.sparkno = s30040
sparkxy = -20,-75
hitsound = s25,8
guardsound = s26,1
ground.type = High
air.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -11.3
guard.velocity = -11.3
air.velocity = -3,-4
air.cornerpush.veloff = 0
yaccel = .5
palfx.time = 1
palfx.add = 0,0,0
id=1455
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(3) >= 0 && AnimElemTime(7) < 0
trigger1 = var(59) <= 0
trigger1 = Command = "x"||Command = "y"
trigger2 = var(59) > 0
trigger2 = numtarget
trigger2 = target,statetype!=A
trigger2 = target,statetype!=L
trigger3 = var(59) > 0
trigger3 = numtarget
trigger3 = target,statetype=A
trigger3 = AnimElemTime(5) >= 5
v = 8
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animelemtime(4)>0
trigger1 = var(8) = 1
value = 1456
ctrl = 0
;---------------------------------------------------------------------------
;葵花之二(重) 
[Statedef 1456]
type = S
movetype = A
physics = S
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 0
velset = 0,0
anim = 1451
sprpriority = 1
ctrl = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3)<0
x = 8
[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(4)=0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 3
value = S20,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s450,0
channel = 0

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,SA
animtype = Hard
priority = 3,Hit
damage = 40,4
guardflag = M
pausetime = 12-var(14),12-var(14)
sparkno = s30002
guard.sparkno = s30040
sparkxy = -20,-75
hitsound = s25,8
guardsound = s26,1
ground.type = High
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -3.5,-7
airguard.velocity = -4,-1
air.velocity = -4,-8
air.hittime = 12
guard.velocity = -10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -12
fall = 1
fall.recover = 0
yaccel = .5
palfx.time = 1
palfx.add = 0,0,0
id = 1456
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, VarSet]
type = VarSet
triggerall = AnimElemTime(3) >= 0 && AnimElemTime(5) < 0
trigger1 = var(59) <= 0
trigger1 = Command = "x"||Command = "y"
trigger2 = var(59) > 0
trigger2 = numtarget
trigger2 = target,statetype!=A
trigger2 = target,statetype!=L
trigger3 = var(59) > 0
trigger3 = numtarget
trigger3 = target,statetype=A
trigger3 = AnimElemTime(4) >= 5
v = 8
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animelemtime(3)>0
trigger1 = var(8) = 1
value = 1457
ctrl = 0
;---------------------------------------------------------------------------
;葵花之三(重) 
[Statedef 1457]
type = A
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 0
velset = 0,0
anim = 1452
sprpriority = 1
ctrl = 0

[State 1000, Velset]
type = Velset
trigger1 = time = 0
x = 0

[State 1000, Velset]
type = Velset
trigger1 = time > 1
x = 6.5

[State 1000, Velset]
type = Velset
trigger1 = AnimElem = 1
y = -5

[State 1000, VelAdd]
type = VelAdd
trigger1 = time > 0
y = .5

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 4
value = S20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s210,2
channel = 0

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A,SA
animtype = up
damage = 40,4
guardflag = H
pausetime = 6,6
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,7
guardsound = s26,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3.5,15.5
air.velocity = -3.5,15.5
air.cornerpush.veloff = 0
air.type = High
fall = 1
fall.recover = 0
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 4
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92
palfx.time = 1
palfx.add = 0,0,0
id = 1457

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1457)
trigger1 = movehit = 1
trigger1 = target(1457),statetype!=L
value =  ifelse(p2statetype = A,5635,5633)
ID = 1457
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1460
;---------------------------------------------------------------------------
;葵花(落地) 
[Statedef 1460]
type = S
movetype = I 
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1453
sprpriority = 1
ctrl = ifelse(var(15)=1,1,0)

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; REDキック（轻） 
[Statedef 1500]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 100
velset = 0,0
anim = 1500
sprpriority = 1
ctrl = 0

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s1500,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s20,4

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
movetype = A
physics = N
;===========================================
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
y = -10

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemtime(3) >= 0
x = 4

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
y = -8.5

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 3 >= 0
y = 0.72
;======================================================
[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 8
attr = A,SA
animtype = up
damage = 120,12
guardflag = H
pausetime = 6,6
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-60
hitsound = s25,7
guardsound = s26,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -.5,15.5
air.type = High
air.velocity = -.5,15.5
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
palfx.time = 1
palfx.add = 0,0,0
id = 1500

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1500)
trigger1 = movehit = 1
trigger1 = target(1500),statetype!=L
value =  ifelse(p2statetype = A,5635,5633)
ID = 1500
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1505
;---------------------------------------------------------------------------
; REDキック（重） 
[Statedef 1501]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,2)
poweradd = 100
velset = 0,0
anim = 1501
sprpriority = 1
ctrl = 0

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s1500,1
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s20,4

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
movetype = A
physics = N
;======================================================
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
y = -10

[State 0, VelSet]
type = VelSet
trigger1 = AnimElemtime(3) >= 0
x = 6

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
y = -11

[State 1000, VelAdd]
type = VelAdd
trigger1 = AnimElemtime(3) >= 0
x = -.1
y = .7

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 8
attr = A,SA
animtype = up
damage = 120,12
guardflag = H
pausetime = 6,6
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-60
hitsound = s25,7
guardsound = s26,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -.5,15.5
air.type = High
air.velocity = -.5,15.5
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
palfx.time = 1
palfx.add = 0,0,0
id = 1501

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1501)
trigger1 = movehit = 1
trigger1 = target(1501),statetype!=L
value = ifelse(p2statetype = A,5635,5633)
ID = 1501
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1505
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; REDキック着地
[Statedef 1505]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 0
velset = 0,0
anim = 1505
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = s27,3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
trigger1 = PrevStateNo = 1501
value = 1506

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; REDキック追陌妫ㄇ) 
[Statedef 1510]
type = A
movetype = A
physics = N
juggle = 0
poweradd = 100
velset = 0,0
anim = 1510
sprpriority = 1
ctrl = 0
;--------------------------------------
[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1
;--------------------------------------
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1500,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s20,3

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 3
y = -2

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 4 >= 0
y = 0.45

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = A,SA
animtype = up
damage = 120,12
guardflag = H
pausetime = 6,6
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,7
guardsound = s26,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3.5,15.5
air.velocity = -3.5,15.5
air.cornerpush.veloff = 0
air.type = High
fall = 1
fall.recover = 0
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
palfx.time = 1
palfx.add = 0,0,0
id = 1510

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1510)
trigger1 = movehit = 1
trigger1 = target(1510),statetype!=L
value =  ifelse(p2statetype = A,5635,5633)
ID = 1510
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1505
;---------------------------------------------------------------------------
; REDキック追陌妫ㄖ) 
[Statedef 1511]
type = A
movetype = A
physics = N
juggle = 0
poweradd = 100
velset = 0,0
anim = 1510
sprpriority = 1
ctrl = 0
;--------------------------------------
[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1
;--------------------------------------
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1500,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s20,3

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 5
y = -2

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 4 >= 0
y = 0.45

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = A,SA
animtype = up
damage = 120,12
guardflag = H
pausetime = 6,6
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,7
guardsound = s26,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3.5,15.5
air.velocity = -3.5,15.5
air.cornerpush.veloff = 0
air.type = High
fall = 1
fall.recover = 0
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
palfx.time = 1
palfx.add = 0,0,0
id = 1511

[State 0, TargetState]
type = TargetState
trigger1 = numtarget(1511)
trigger1 = movehit = 1
trigger1 = target(1511),statetype!=L
value =  ifelse(p2statetype = A,5635,5633)
ID = 1511
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1505
;---------------------------------------------------------------------------
; 外式砌穿ち{倒地追击） 
[Statedef 1520]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,7)
poweradd = 20*floor(fvar(3))
velset = 0,0
anim = 1520
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s20,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s27,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s801,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = s24,0
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
id = var(7) := 1122
stateno = 6000
pos = 88*floor(Const(size.xscale)),-24*floor(Const(size.yscale))
postype = p1
ownpal = 1

[State 0, TargetState]
type = TargetState
trigger1 = time = 0
trigger1 = numtarget
trigger1 = target,stateno = 5110
trigger1 = var(15)=1
value = 1521

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S,SA
animtype = up
priority = 5,Hit
damage = 100,10
getpower = floor(100*fvar(3)),floor(100*fvar(3))
;givepower = 40,0
hitflag = MAFDL
guardflag = L
pausetime = 18,18
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-17
hitsound = s25,7
guardsound = s26,1
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -2,-10.5
air.velocity = -2,-10.5
down.velocity = -2,-10.5
air.cornerpush.veloff = 0
yaccel = 0.5
fall = 1
fall.recover = 0
palfx.time = 65
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
envshake.time = 18
envshake.ampl = -8
envshake.freq = 92
envshake.phase = 92

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 12
ctrl = 1
;---------------------------------------------------------------------------
;倒地被追击
[Statedef 1521]
type = L
movetype = H
physics = N
juggle = 0
poweradd = 0
velset = 0,0
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, SelfState]
type = SelfState
trigger1 = time>=100
value = 5120
ignorehitpause = 1
;---------------------------------------------------------------------------
;胧车1
[Statedef 1550]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 100
velset   = 0,0
anim     = 1550
ctrl     = 0
sprpriority = 5
facep2 = 1

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 1000, Width]
type = Width
trigger1 = AnimElemtime(3) > 0
edge = 20,0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s210,1
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s20,3

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 3
x = 5

[State 1000, Velset]
type = Velset
trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(5) < 0
x = 6.5

[State 1000, Velset]
type = Velset
trigger1 = AnimElem = 3
y = -6

[State 1000, Veladd]
type = Veladd
trigger1 =  AnimElemtime(5) >= 0
x = -0.2

[State 1000, VelAdd]
type = VelAdd
trigger1 = AnimElemtime(4) >= 0
x = -.1
y = .5

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
physics  = N

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A, SA
damage    = 120,12
animtype = Hard
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 10,10
sparkno = s30002
guard.sparkno = s30040
sparkxy = -25, -70
hitsound = s25,3
guardsound = s26,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.5,-6
air.velocity = -3.2,-6
yaccel = 0.4
air.type = High
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
ID = 1550
envshake.time = 12
envshake.ampl = 6; or 7

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
MoveType = I

[State 1000, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -20
value = 1005
;---------------------------------------------------------------------------
;胧车2
[Statedef 1560]
type     = S
movetype = A
physics  = S
juggle   = IfElse(var(14)=3 && var(20)>0,0,8)
poweradd = 100
velset   = 0,0
anim     = 1560
ctrl     = 0
sprpriority = 5
facep2 = 1

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 1000, Width]
type = Width
trigger1 = AnimElemtime(3) > 0
edge = 20,0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s200,1
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = s200,1
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 15
value = s210,0
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
trigger3 = AnimElem = 15
value = s20,3

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 3
x = 6

[State 1000, Velset]
type = Velset
trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(5) <= 0
x = 6.8

[State 1000, Velset]
type = Velset
trigger1 = AnimElem = 3
y = -3.2

[State 1000, VelAdd]
type = VelAdd
trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(17) <= 0
x = -.155

[State 1000, VelAdd]
type = VelAdd
trigger1 = AnimElemtime(3) >= 0
y = .05

[State 1000, VelAdd]
type = VelAdd
trigger1 = AnimElemtime(15) >= 0
y = .2

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
physics  = N

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A, SA
damage    = 40,4
animtype = Hard
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 5,5
sparkno = s30002
guard.sparkno = s30040
sparkxy = -25, -70
hitsound = s25,3
guardsound = s26,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5,-7.5
air.velocity = -5,-7
yaccel = .45
air.type = High
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1560
envshake.time = 12
envshake.ampl = 6; or 7

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 8
attr = S, SA
damage    = 40,4
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 5,5
sparkno = s30002
guard.sparkno = s30040
sparkxy = -25, -70
hitsound = s25,3
guardsound = s26,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.5,-6
air.velocity = -3.5,-6
yaccel = .45
air.type = High
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id = 1560
envshake.time = 12
envshake.ampl = 6; or 7

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 16
attr = S, SA
damage    = 40,4
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 9,9
sparkno = s30002
guard.sparkno = s30040
sparkxy = -25, -70
hitsound = s25,4
guardsound = s26,1
ground.type = Low
ground.slidetime = 18
ground.hittime   = 18
ground.velocity  = -4.2,-6
guard.velocity = -8
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.2,-6
air.hittime = 12
yaccel = .5
fall = 1
fall.recover = 0
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
envshake.time = 5
envshake.ampl = -5
envshake.freq = 92
envshake.phase = 92
palfx.time = 1
palfx.add = 0,0,0
id = 1560

[State 0, TargetState]
type = TargetState
trigger1 = AnimElemtime(16) >= 0
trigger1 = numtarget(1560)
trigger1 = movehit = 1
trigger1 = target(1560),statetype!=L
value =  ifelse(p2statetype = A,5635,5633)
ID = 1560
ignorehitpause = 1
persistent = 0

[State 1000, MoveType]
type = StateTypeSet
trigger1 = AnimElem = 17
MoveType = I

[State 1000, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -20
value = 1005
;---------------------------------------------------------------------------
; 琴月前跑 （短） 
[Statedef 1600]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 100
velset   = 0,0
anim     = 1600
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = anim = 1600
value = s1600,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = anim = 1600
value = s28,0
loop = 1
Channel = 6

[State 1000, Velset]
type = Velset
trigger1 = AnimElemtime(2) >= 0
trigger1 = anim = 1600
x = 9

[State 1000, Velset]
type = Velset
trigger1 = anim = 1601
trigger1 = Animtime = 0
x = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time >= 28
trigger1 = anim = 1600
value = 1601
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimElemtime(2) >= 0
trigger1 = p2bodydist X < 70
trigger1 = EnemyNear(floor(fvar(4))),Pos Y-Vel Y*10-const(movement.yaccel)*10*11/2+EnemyNear(floor(fvar(4))),Vel Y*10+EnemyNear(floor(fvar(4))),const(movement.yaccel)*10*11/2>-65
trigger1 = anim = 1600
value = 1602

[State 1000, ChangeState]
type = Changestate
trigger1 = anim = 1601
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 琴月前跑 （长） 
[Statedef 1601]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 100
velset   = 0,0
anim     = 1600
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = anim = 1600
value = s1600,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = anim = 1600
value = s28,0
loop = 1
Channel = 6

[State 1000, Velset]
type = Velset
trigger1 = AnimElemtime(2) >= 0
trigger1 = anim = 1600
x = 9

[State 1000, Velset]
type = Velset
trigger1 = anim = 1601
trigger1 = Animtime = 0
x = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time >= 46
trigger1 = anim = 1600
value = 1601
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimElemtime(2) >= 0
trigger1 = p2bodydist X < 70
trigger1 = EnemyNear(floor(fvar(4))),Pos Y-Vel Y*10-const(movement.yaccel)*10*11/2+EnemyNear(floor(fvar(4))),Vel Y*10+EnemyNear(floor(fvar(4))),const(movement.yaccel)*10*11/2>-65
trigger1 = anim = 1600
value = 1602

[State 1000, ChangeState]
type = Changestate
trigger1 = anim = 1601
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 琴月攻击 
[Statedef 1602]
type = S
movetype = A
physics = S
juggle = IfElse(var(14)=3 && var(20)>0,0,8)
poweradd = 0
anim = 1602
velset = 0,0
sprpriority = 1
ctrl = 0

[State 1000, Width]
type = Width
trigger1 = 1
edge = 30,0

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 2
x = 10

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 6
x = -10

[State 1000, Velset]
type = Velset
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) < 0
x = 8

[State 1000, Velset]
type = Velset
trigger1 = AnimElem = 5
x = 0

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
damage    = 60,6
animtype = Hard
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 11,11
sparkno = s30002
guard.sparkno = s30040
sparkxy = -20, -60
hitsound = s25,2
guardsound = s26,1
ground.type = Low
ground.slidetime = 18
ground.hittime   = 18
ground.velocity  = -8
airguard.velocity = -4,-1
air.type = High
air.velocity = -4.2,-6
air.hittime = 12
yaccel = .5
air.fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id=1602
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemtime(4) >= 0
trigger1 = movehit = 1 
value = SCA
time = 30
ignorehitpause = 1

[State 210, Xe[gX]
type = ChangeState
trigger1 = Movecontact = 1
trigger1 = AnimElemtime(4) >= 0
value = 1603

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 琴月抓取 
[Statedef 1603]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 20*floor(fvar(3))
velset = 0,0
anim = 1603
sprpriority = 1
ctrl = 0

[State 1000, Width]
type = Width
trigger1 = AnimElemtime(1) > 0 && AnimElemtime(3) < 0
edge = 50,0

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 1 | AnimElem = 3
x = 10

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 2
x = 30

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, ST
damage    = 0,10
getpower  = 0,0
;givepower = 0,0
animtype = Hard
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 0,0
sparkno = s6020
guard.sparkno = s30040
sparkxy = -30, -90
hitsound = s25,5
guardsound = s26,1
ground.type = High
ground.slidetime = 19
ground.hittime  = 20
ground.velocity = 0
guard.velocity = -9
air.type = High
air.velocity = 0,0
airguard.velocity = -4,-5
yaccel = .35
fall = 1
fall.recover = 0
p1stateno = 1604;4803
p2stateno = 1605;4805
p1facing = 1
p2facing = 1
ground.cornerpush.veloff = ifelse(Movehit=1,1,0)
air.cornerpush.veloff = ifelse(Movehit=1,1,0)
palfx.time = 1
palfx.add = 0,0,0
hitonce = 0
snap = 42,-90
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 琴月击中 
[Statedef 1604]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
ctrl     = 0
velset   = 0,0
anim     = 1604
sprpriority = 5

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s1600,1
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s24,1
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = s24,2

[State 1100, Explod]
type = Explod
trigger1 = AnimElem = 3
persistent = 0
anim = 6505
postype = P1
pos = 40*floor(Const(size.xscale)),-110*floor(Const(size.yscale))
sprpriority = 10
scale = 0.75*Const(size.xscale),0.75*Const(size.yscale)
ownpal = 1

[State 1000, 3]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) <= 0
pos = 42*Const(size.xscale), -90*Const(size.yscale)

[State 1000, 3]
type = TargetBind
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(3) <= 0
pos = 42*Const(size.xscale), -122*Const(size.yscale)

[State 1000, 3]
type = TargetBind
trigger1 = AnimElemtime(3) = 1
pos = 42*Const(size.xscale), -50*Const(size.yscale)

[State 0, TargetState]
type = TargetState
trigger1 = numtarget
trigger1 = target,movetype=H
trigger1 = target,stateno!=1605
trigger1 = AnimElemtime(2) >= 0
trigger1 = AnimElemtime(3) <= 0
value = 1605
ignorehitpause = 1

[State 2110, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810,]
type = EnvShake
trigger1 = AnimElem = 3
ampl = 16
phase = 100
freq = 100
time = 15

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NT
damage    = 60,6
animtype = Up
guardflag = 
hitflag = MAF
priority = 4, Hit
pausetime = 0,0
sparkno = -1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2,-10
air.velocity = -2,-10
yaccel = .5
air.type = High
fall = 1
fall.recover = 0
palfx.time = 50
palfx.sinadd = var(30),var(31),var(32),16
palfx.add = var(33),var(34),var(35)
palfx.color = var(36)
numhits = 0
hitonce = 0
envshake.time = 12
envshake.ampl = 6; or 7

[State 210, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;(ENEMY)掴まれ
[Statedef 1605]
type = A
movetype = H
physics = N
velset = 0,0
facep2 = 1

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1605

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time>=500
value = -2
kill = 1
absolute = 1
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1

[State 0, SelfState]
type = SelfState
trigger1 = time>=1000
value = 5020
;---------------------------------------------------------------------------
; 琴月抓取(八追击） 
[Statedef 1606]
type = S
movetype = A
physics = N
juggle = 0
poweradd = 20*floor(fvar(3))
velset = 0,0
anim = 1606
sprpriority = 1
ctrl = 0

[State 1000, Width]
type = Width
trigger1 = AnimElemtime(1) > 0 && AnimElemtime(2) < 0
edge = 50,0

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 2
x = 10

[State 1000, Posadd]
type = Posadd
trigger1 = AnimElem = 1
x = 30

[State 1000, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, ST
damage    = 0,10
getpower  = 0,0
;givepower = 0,0
animtype = Hard
guardflag = M
hitflag = MAFD
priority = 4, Hit
pausetime = 0,0
sparkno = s6020
guard.sparkno = s30040
sparkxy = -30, -90
hitsound = s25,5
guardsound = s26,1
ground.type = High
ground.slidetime = 19
ground.hittime  = 20
ground.velocity = 0
guard.velocity = -9
air.type = High
air.velocity = 0,0
airguard.velocity = -4,-5
yaccel = .35
fall = 1
fall.recover = 0
p1stateno = 1604
p2stateno = 1605
p1facing = 1
p2facing = 1
ground.cornerpush.veloff = ifelse(Movehit=1,1,0)
air.cornerpush.veloff = ifelse(Movehit=1,1,0)
palfx.time = 1
palfx.add = 0,0,0
snap = 42,-90
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 灼焉预备 
[Statedef 1700]
type = S
movetype = A
physics = N
juggle = 0
velset = 0,0
anim = 1700
ctrl = 0
poweradd = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(var(13)=2 && var(20)>0,3150,2150)
ctrl = 0
;---------------------------------------------------------------------------
; 百拾式?B(轻) 
[Statedef 1800]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,4)
poweradd = 30*floor(fvar(3))
velset = 0,0
anim = 1800
sprpriority = 1
ctrl = 0

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1
;-------------------------------------------------------------
[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 30,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1800,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = s1800,1
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 12
value = s1800,2
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = s20,4

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
trigger5 = AnimElem = 6
trigger6 = AnimElem = 7
trigger7 = AnimElem = 8
x = 4

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 10
x = 32

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
value = A

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 2
y = -8

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 8 >= 0
y = 0.45

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S,SA
animtype = Hard
damage = 100,10
getpower = floor(100*fvar(3)),floor(100*fvar(3))
;givepower = 40,0
guardflag = M
pausetime = 7,7
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,2
guardsound = s26,1
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -6
air.velocity = -4.5,-3
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id=1800
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 8
attr = A,SA
animtype = Hard
damage = 70,7
getpower = floor(70*fvar(3)),floor(70*fvar(3))
;givepower = 28,0
guardflag = M
pausetime = 11,11
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,2
guardsound = s26,1
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3,-7
air.velocity = -3.5,-7
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id=1800
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 17
attr = A,SA
animtype = up
damage = 70,7
getpower = floor(70*fvar(3)),floor(70*fvar(3))
;givepower = 28,0
guardflag = H
pausetime = 11,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,4
guardsound = s26,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -2.5,12.5
air.velocity = -2.5,12.5
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
palfx.time = 1
palfx.add = 0,0,0
id=1800
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1505
;---------------------------------------------------------------------------
; 百拾式?B(重) 
[Statedef 1801]
type = S
movetype = A
physics = N
juggle = IfElse(var(14)=3 && var(20)>0,0,4)
poweradd = 30*floor(fvar(3))
velset = 0,0
anim = 1801
sprpriority = 1
ctrl = 0

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1
;----------------------------------------------------------
[State 0, 走不进墙角]
type = Width
trigger1 = 1
edge = 30,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1800,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = s1800,1
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 12
value = s1800,2
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = s20,4

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
trigger5 = AnimElem = 6
trigger6 = AnimElem = 7
trigger7 = AnimElem = 8
x = 8

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 10
x = 32

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 8
value = A

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 3
y = -9

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 8 >= 0
y = 0.45

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S,SA
animtype = Hard
damage = 100,10
getpower = floor(100*fvar(3)),floor(100*fvar(3))
;givepower = 40,0
guardflag = M
pausetime = 7,7
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,2
guardsound = s26,1
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -6
air.velocity = -4.5,-3
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id=1801
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 8
attr = A,SA
animtype = Hard
damage = 70,7
getpower = floor(70*fvar(3)),floor(70*fvar(3))
;givepower = 28,0
guardflag = M
pausetime = 4,4
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,2
guardsound = s26,1
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,-8
air.velocity = -4.5,-8
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
palfx.time = 1
palfx.add = 0,0,0
id=1801
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, HitDef]
type = HitDef
trigger1 = AnimElem = 17
attr = A,SA
animtype = up
damage = 70,7
getpower = floor(70*fvar(3)),floor(70*fvar(3))
;givepower = 28,0
guardflag = H
pausetime = 11,12
sparkno = s30002
guard.sparkno = s30040
sparkxy = -15,-67
hitsound = s25,4
guardsound = s26,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -2.5,12.5
air.velocity = -2.5,12.5
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
fall.envshake.time = 14
fall.envshake.ampl = -8
fall.envshake.freq = 92
fall.envshake.phase = 92
palfx.time = 1
palfx.add = 0,0,0
id=1801
envshake.time = 12
envshake.ampl = 6; or 7

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 1505
;---------------------------------------------------------------------------
; 强百八式Bい(慢) 
[Statedef 1900]
type = S
movetype = A
physics = S
juggle = 0
poweradd = 100
velset = 0,0
anim = 1900
ctrl = 0
sprpriority = 2

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1

;-------------------------------------------------------
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s1200,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s1900,0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
ID = 1910
StateNo = 1910
pos = 25,0
postype = p1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
id = var(7) := 1901
stateno = 6000
pos = 0,0
postype = p1
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 强百八式Bい(快)
[Statedef 1901]
type = S
movetype = A
physics = S
juggle = 0
poweradd = 0
velset = 0,0
anim = 1950
ctrl = 0
sprpriority = 2

[State 0, varadd]
type = varadd
triggerall = var(20) > 0
triggerall = time = 1
trigger1 = var(2)=1
var(20) = -300
ignorehitpause = 1
;-------------------------------------------------------
[State 0, HitBy]
type = HitBy
trigger1 = numhelper(77777)
trigger1 = var(20)>0 && var(12)=1
trigger1 = var(11)!=1
value = SCA,AT,HP,HA
time = 1
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
trigger1 = numhelper(77777)
trigger1 = var(20)>0 && var(12)=1
trigger1 = var(11)=1
value = SCA,AT
time = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = numhelper(77777)=0
trigger1 = var(20)>0 && var(12)=1
trigger1 = time = 0
helpertype = normal
ID = 77777
stateno = 77777
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
persistent = 0
;-------------------------------------------------------
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s1200,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = s1900,0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
ID = 1910
StateNo = 1910
pos = 25,0
postype = p1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
id = var(7) := 1901
stateno = 6000
pos = 0,0
postype = p1
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Bい-helper
[Statedef 1910]
type = S
movetype = A
physics = N
poweradd = 0
juggle = 4
ctrl = 0
velset = 0,0
anim = 1910
sprpriority = 10

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = root,stateno = 1900
v = 1
value = 4
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = root,stateno = 1901
v = 1
value = 7
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = var(1)
ignorehitpause = 1

[State 926, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1993]
Type = SelfState
Trigger1 = !IsHelper
Value = 0

[State 1003, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=ifelse(root,var(15)!=1,1911,1910)
ignorehitpause=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = root,var(15)!=1
value = SCA
ignorehitpause = 1

[State 0, boss]
type = HitBy
trigger1 = root,var(15)=1
value = SCA,NP,SP,HP
ignorehitpause = 1

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = movehit = 1
trigger1 = EnemyNear,MoveType = H
Trigger1 = root,fvar(2)>0.3
Trigger1 = EnemyNear,StateNo = [5000,5999]
fv = 2
value = -0.05

[State -2,攻袅ρa正]
Type = AttackMulSet
Trigger1 = 1
value = root,fvar(2)
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = root,var(15)!=1
trigger1 = enemynear,stateno != [5040,5049]
attr = S,SP
animtype = Hard
damage = 120,12
hitflag = MAF
priority = 3,Hit
sprpriority = 5
guardflag = M
pausetime = 0,10
sparkno = s30002
guard.sparkno = s30040
sparkxy = 20,-45
hitsound = s24,0
guardsound = s26,1
ground.type = Low
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -9
air.juggle = 8
air.velocity = -3.6,-3.8
air.fall = 1
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
palfx.time = 35
palfx.sinadd = root,var(30),root,var(31),root,var(32),16
palfx.add = root,var(33),root,var(34),root,var(35)
palfx.color = root,var(36)
ID = 1910
envshake.time = 12
envshake.ampl = 6; or 7

[State 0,  boss]
type = HitDef
trigger1 = root,var(15)=1
trigger1 = time%5 = 0
trigger1 = enemynear,stateno != [5040,5049]
attr = S,SP
animtype = Hard
damage = 120,12
hitflag = MAF
priority = 3,Hit
sprpriority = 5
guardflag = M
pausetime = 0,10
sparkno = s30002
guard.sparkno = s30040
sparkxy = 20-floor(HitCount*vel x*5),-45
hitsound = s24,0
guardsound = s26,1
ground.type = Low
ground.hittime = 23
ground.slidetime = 23
ground.velocity = -9
air.juggle = 8
air.velocity = -3.6,-3.8
air.fall = 1
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
palfx.time = 35
palfx.sinadd = root,var(30),root,var(31),root,var(32),16
palfx.add = root,var(33),root,var(34),root,var(35)
palfx.color = root,var(36)
ID = 1910
envshake.time = 12
envshake.ampl = 6; or 7

[State 1000, Projectile]
type = Projectile
trigger1 = root,var(15)!=1
trigger1 = time = 0
projID = 1912
projanim = 1912
projremove = 1
projpriority = 1
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = -1
offset = 0,0
velocity = vel X, vel Y

[State 1000, boss]
type = Projectile
trigger1 = root,var(15)=1
trigger1 = time = 0
projID = 1912
projanim = 1912
projremove = 0
projpriority = 1
projhitanim = -1
projremanim = -1
projsprpriority = 0
projshadow = 0,0,0
projremovetime = -1
offset = 0,0
velocity = vel X, vel Y

[State 0, Fire]
type = Helper
triggerall = root,numhelper(6001)=0
trigger1 = movehit = 1
pos = 0,0 
stateno = 6001
ID = 6001
ownpal = 1
postype = p2
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add1
alpha = 100,250

[State 710,SHADOW]
type = AfterImage 
trigger1 = time = 0
TimeGap = 2
FrameGap = 1
trans = Add
length = 8
time = 999
PalBright = 18,18,18
PalContrast = 96,96,96
palcolor = root,var(36)
PalAdd = -12,-12,-12
PalMul = .9,.9,.9
sprpriority = 10
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >= 300
trigger2 = FrontEdgeDist < -50
ignorehitpause = 1 

[State 0, ChangeState]
type = ChangeState
trigger1 = MoveContact && root,var(15)!=1
trigger2 = root,numprojID(1912) = 0 && root,var(15)!=1
value = 1911
;---------------------------------------------------------------------------
; Helper-Destroy
[Statedef 1911]
type = S
movetype = A
physics = N
poweradd = 0
ctrl = 0
velset = 0,0
sprpriority = 10
anim = 1911

[State 1993]
Type = SelfState
Trigger1 = !IsHelper
Value = 0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add1
alpha = 100,250

[State 710,SHADOW]
type = AfterImage 
trigger1 = time = 0
TimeGap = 2
FrameGap = 1
trans = Add
length = 8
time = 999
PalBright = 18,18,18
PalContrast = 96,96,96
palcolor = root,var(36)
PalAdd = -12,-12,-12
PalMul = .9,.9,.9
sprpriority = 10
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
